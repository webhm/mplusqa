var ls=Object.defineProperty;var ds=(c,t,r)=>t in c?ls(c,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[t]=r;var A=(c,t,r)=>(ds(c,typeof t!="symbol"?t+"":t,r),r);const us=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}};us();var Nt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function _t(c,t,r,n,a,i){return{tag:c,key:t,attrs:r,children:n,text:a,dom:i,domSize:void 0,state:void 0,events:void 0,instance:void 0}}_t.normalize=function(c){return Array.isArray(c)?_t("[",void 0,void 0,_t.normalizeChildren(c),void 0,void 0):c==null||typeof c=="boolean"?null:typeof c=="object"?c:_t("#",void 0,void 0,String(c),void 0,void 0)};_t.normalizeChildren=function(c){var t=[];if(c.length){for(var r=c[0]!=null&&c[0].key!=null,n=1;n<c.length;n++)if((c[n]!=null&&c[n].key!=null)!==r)throw new TypeError(r&&(c[n]!=null||typeof c[n]=="boolean")?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var n=0;n<c.length;n++)t[n]=_t.normalize(c[n])}return t};var vt=_t,hs=vt,Ma=function(){var c=arguments[this],t=this+1,r;if(c==null?c={}:(typeof c!="object"||c.tag!=null||Array.isArray(c))&&(c={},t=this),arguments.length===t+1)r=arguments[t],Array.isArray(r)||(r=[r]);else for(r=[];t<arguments.length;)r.push(arguments[t++]);return hs("",c.key,c,r)},yr={}.hasOwnProperty,ms=vt,ps=Ma,xt=yr,gs=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,Pa={};function ra(c){for(var t in c)if(xt.call(c,t))return!1;return!0}function fs(c){for(var t,r="div",n=[],a={};t=gs.exec(c);){var i=t[1],s=t[2];if(i===""&&s!=="")r=s;else if(i==="#")a.id=s;else if(i===".")n.push(s);else if(t[3][0]==="["){var l=t[6];l&&(l=l.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),t[4]==="class"?n.push(l):a[t[4]]=l===""?l:l||!0}}return n.length>0&&(a.className=n.join(" ")),Pa[c]={tag:r,attrs:a}}function bs(c,t){var r=t.attrs,n=xt.call(r,"class"),a=n?r.class:r.className;if(t.tag=c.tag,t.attrs={},!ra(c.attrs)&&!ra(r)){var i={};for(var s in r)xt.call(r,s)&&(i[s]=r[s]);r=i}for(var s in c.attrs)xt.call(c.attrs,s)&&s!=="className"&&!xt.call(r,s)&&(r[s]=c.attrs[s]);(a!=null||c.attrs.className!=null)&&(r.className=a!=null?c.attrs.className!=null?String(c.attrs.className)+" "+String(a):a:c.attrs.className!=null?c.attrs.className:null),n&&(r.class=null);for(var s in r)if(xt.call(r,s)&&s!=="key"){t.attrs=r;break}return t}function vs(c){if(c==null||typeof c!="string"&&typeof c!="function"&&typeof c.view!="function")throw Error("The selector must be either a string or a component.");var t=ps.apply(1,arguments);return typeof c=="string"&&(t.children=ms.normalizeChildren(t.children),c!=="[")?bs(Pa[c]||fs(c),t):(t.tag=c,t)}var Na=vs,ys=vt,Cs=function(c){return c==null&&(c=""),ys("<",void 0,void 0,c,void 0,void 0)},Ts=vt,ws=Ma,_s=function(){var c=ws.apply(0,arguments);return c.tag="[",c.children=Ts.normalizeChildren(c.children),c},In=Na;In.trust=Cs;In.fragment=_s;var As=In,ao={exports:{}},Te=function(c){if(!(this instanceof Te))throw new Error("Promise must be called with 'new'.");if(typeof c!="function")throw new TypeError("executor must be a function.");var t=this,r=[],n=[],a=u(r,!0),i=u(n,!1),s=t._instance={resolvers:r,rejectors:n},l=typeof setImmediate=="function"?setImmediate:setTimeout;function u(v,w){return function E(R){var D;try{if(w&&R!=null&&(typeof R=="object"||typeof R=="function")&&typeof(D=R.then)=="function"){if(R===t)throw new TypeError("Promise can't be resolved with itself.");g(D.bind(R))}else l(function(){!w&&v.length===0&&console.error("Possible unhandled promise rejection:",R);for(var O=0;O<v.length;O++)v[O](R);r.length=0,n.length=0,s.state=w,s.retry=function(){E(R)}})}catch(O){i(O)}}}function g(v){var w=0;function E(D){return function(O){w++>0||D(O)}}var R=E(i);try{v(E(a),R)}catch(D){R(D)}}g(c)};Te.prototype.then=function(c,t){var r=this,n=r._instance;function a(u,g,v,w){g.push(function(E){if(typeof u!="function")v(E);else try{i(u(E))}catch(R){s&&s(R)}}),typeof n.retry=="function"&&w===n.state&&n.retry()}var i,s,l=new Te(function(u,g){i=u,s=g});return a(c,n.resolvers,i,!0),a(t,n.rejectors,s,!1),l};Te.prototype.catch=function(c){return this.then(null,c)};Te.prototype.finally=function(c){return this.then(function(t){return Te.resolve(c()).then(function(){return t})},function(t){return Te.resolve(c()).then(function(){return Te.reject(t)})})};Te.resolve=function(c){return c instanceof Te?c:new Te(function(t){t(c)})};Te.reject=function(c){return new Te(function(t,r){r(c)})};Te.all=function(c){return new Te(function(t,r){var n=c.length,a=0,i=[];if(c.length===0)t([]);else for(var s=0;s<c.length;s++)(function(l){function u(g){a++,i[l]=g,a===n&&t(i)}c[l]!=null&&(typeof c[l]=="object"||typeof c[l]=="function")&&typeof c[l].then=="function"?c[l].then(u,r):u(c[l])})(s)})};Te.race=function(c){return new Te(function(t,r){for(var n=0;n<c.length;n++)c[n].then(t,r)})};var Oa=Te,to=Oa;typeof window!="undefined"?(typeof window.Promise=="undefined"?window.Promise=to:window.Promise.prototype.finally||(window.Promise.prototype.finally=to.prototype.finally),ao.exports=window.Promise):typeof Nt!="undefined"?(typeof Nt.Promise=="undefined"?Nt.Promise=to:Nt.Promise.prototype.finally||(Nt.Promise.prototype.finally=to.prototype.finally),ao.exports=Nt.Promise):ao.exports=to;var zr=vt,Is=function(c){var t=c&&c.document,r,n={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function a(h){return h.attrs&&h.attrs.xmlns||n[h.tag]}function i(h,d){if(h.state!==d)throw new Error("'vnode.state' must not be modified.")}function s(h){var d=h.state;try{return this.apply(d,arguments)}finally{i(h,d)}}function l(){try{return t.activeElement}catch{return null}}function u(h,d,p,T,_,S,G){for(var X=p;X<T;X++){var H=d[X];H!=null&&g(h,H,_,G,S)}}function g(h,d,p,T,_){var S=d.tag;if(typeof S=="string")switch(d.state={},d.attrs!=null&&Hr(d.attrs,d,p),S){case"#":v(h,d,_);break;case"<":E(h,d,T,_);break;case"[":R(h,d,p,T,_);break;default:D(h,d,p,T,_)}else x(h,d,p,T,_)}function v(h,d,p){d.dom=t.createTextNode(d.children),Ye(h,d.dom,p)}var w={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function E(h,d,p,T){var _=d.children.match(/^\s*?<(\w+)/im)||[],S=t.createElement(w[_[1]]||"div");p==="http://www.w3.org/2000/svg"?(S.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+d.children+"</svg>",S=S.firstChild):S.innerHTML=d.children,d.dom=S.firstChild,d.domSize=S.childNodes.length,d.instance=[];for(var G=t.createDocumentFragment(),X;X=S.firstChild;)d.instance.push(X),G.appendChild(X);Ye(h,G,T)}function R(h,d,p,T,_){var S=t.createDocumentFragment();if(d.children!=null){var G=d.children;u(S,G,0,G.length,p,null,T)}d.dom=S.firstChild,d.domSize=S.childNodes.length,Ye(h,S,_)}function D(h,d,p,T,_){var S=d.tag,G=d.attrs,X=G&&G.is;T=a(d)||T;var H=T?X?t.createElementNS(T,S,{is:X}):t.createElementNS(T,S):X?t.createElement(S,{is:X}):t.createElement(S);if(d.dom=H,G!=null&&es(d,G,T),Ye(h,H,_),!Wn(d)&&d.children!=null){var ne=d.children;u(H,ne,0,ne.length,p,null,T),d.tag==="select"&&G!=null&&os(d,G)}}function O(h,d){var p;if(typeof h.tag.view=="function"){if(h.state=Object.create(h.tag),p=h.state.view,p.$$reentrantLock$$!=null)return;p.$$reentrantLock$$=!0}else{if(h.state=void 0,p=h.tag,p.$$reentrantLock$$!=null)return;p.$$reentrantLock$$=!0,h.state=h.tag.prototype!=null&&typeof h.tag.prototype.view=="function"?new h.tag(h):h.tag(h)}if(Hr(h.state,h,d),h.attrs!=null&&Hr(h.attrs,h,d),h.instance=zr.normalize(s.call(h.state.view,h)),h.instance===h)throw Error("A view cannot return the vnode it received as argument");p.$$reentrantLock$$=null}function x(h,d,p,T,_){O(d,p),d.instance!=null?(g(h,d.instance,p,T,_),d.dom=d.instance.dom,d.domSize=d.dom!=null?d.instance.domSize:0):d.domSize=0}function Z(h,d,p,T,_,S){if(!(d===p||d==null&&p==null))if(d==null||d.length===0)u(h,p,0,p.length,T,_,S);else if(p==null||p.length===0)Xt(h,d,0,d.length);else{var G=d[0]!=null&&d[0].key!=null,X=p[0]!=null&&p[0].key!=null,H=0,ne=0;if(!G)for(;ne<d.length&&d[ne]==null;)ne++;if(!X)for(;H<p.length&&p[H]==null;)H++;if(G!==X)Xt(h,d,ne,d.length),u(h,p,H,p.length,T,_,S);else if(X){for(var Ne=d.length-1,ve=p.length-1,Do,Oe,pe,Me,ue,qr;Ne>=ne&&ve>=H&&(Me=d[Ne],ue=p[ve],Me.key===ue.key);)Me!==ue&&le(h,Me,ue,T,_,S),ue.dom!=null&&(_=ue.dom),Ne--,ve--;for(;Ne>=ne&&ve>=H&&(Oe=d[ne],pe=p[H],Oe.key===pe.key);)ne++,H++,Oe!==pe&&le(h,Oe,pe,T,Le(d,ne,_),S);for(;Ne>=ne&&ve>=H&&!(H===ve||Oe.key!==ue.key||Me.key!==pe.key);)qr=Le(d,ne,_),Mt(h,Me,qr),Me!==pe&&le(h,Me,pe,T,qr,S),++H<=--ve&&Mt(h,Oe,_),Oe!==ue&&le(h,Oe,ue,T,_,S),ue.dom!=null&&(_=ue.dom),ne++,Ne--,Me=d[Ne],ue=p[ve],Oe=d[ne],pe=p[H];for(;Ne>=ne&&ve>=H&&Me.key===ue.key;)Me!==ue&&le(h,Me,ue,T,_,S),ue.dom!=null&&(_=ue.dom),Ne--,ve--,Me=d[Ne],ue=p[ve];if(H>ve)Xt(h,d,ne,Ne+1);else if(ne>Ne)u(h,p,H,ve+1,T,_,S);else{var cs=_,oa=ve-H+1,eo=new Array(oa),Kr=0,me=0,Br=2147483647,Yr=0,Do,Gr;for(me=0;me<oa;me++)eo[me]=-1;for(me=ve;me>=H;me--){Do==null&&(Do=ee(d,ne,Ne+1)),ue=p[me];var Pt=Do[ue.key];Pt!=null&&(Br=Pt<Br?Pt:-1,eo[me-H]=Pt,Me=d[Pt],d[Pt]=null,Me!==ue&&le(h,Me,ue,T,_,S),ue.dom!=null&&(_=ue.dom),Yr++)}if(_=cs,Yr!==Ne-ne+1&&Xt(h,d,ne,Ne+1),Yr===0)u(h,p,H,ve+1,T,_,S);else if(Br===-1)for(Gr=Re(eo),Kr=Gr.length-1,me=ve;me>=H;me--)pe=p[me],eo[me-H]===-1?g(h,pe,T,S,_):Gr[Kr]===me-H?Kr--:Mt(h,pe,_),pe.dom!=null&&(_=p[me].dom);else for(me=ve;me>=H;me--)pe=p[me],eo[me-H]===-1&&g(h,pe,T,S,_),pe.dom!=null&&(_=p[me].dom)}}else{var Fr=d.length<p.length?d.length:p.length;for(H=H<ne?H:ne;H<Fr;H++)Oe=d[H],pe=p[H],!(Oe===pe||Oe==null&&pe==null)&&(Oe==null?g(h,pe,T,S,Le(d,H+1,_)):pe==null?Oo(h,Oe):le(h,Oe,pe,T,Le(d,H+1,_),S));d.length>Fr&&Xt(h,d,H,d.length),p.length>Fr&&u(h,p,H,p.length,T,_,S)}}}function le(h,d,p,T,_,S){var G=d.tag,X=p.tag;if(G===X){if(p.state=d.state,p.events=d.events,ss(p,d))return;if(typeof G=="string")switch(p.attrs!=null&&Ur(p.attrs,p,T),G){case"#":te(d,p);break;case"<":K(h,d,p,S,_);break;case"[":oe(h,d,p,T,_,S);break;default:j(d,p,T,S)}else de(h,d,p,T,_,S)}else Oo(h,d),g(h,p,T,S,_)}function te(h,d){h.children.toString()!==d.children.toString()&&(h.dom.nodeValue=d.children),d.dom=h.dom}function K(h,d,p,T,_){d.children!==p.children?(Jn(h,d),E(h,p,T,_)):(p.dom=d.dom,p.domSize=d.domSize,p.instance=d.instance)}function oe(h,d,p,T,_,S){Z(h,d.children,p.children,T,_,S);var G=0,X=p.children;if(p.dom=null,X!=null){for(var H=0;H<X.length;H++){var ne=X[H];ne!=null&&ne.dom!=null&&(p.dom==null&&(p.dom=ne.dom),G+=ne.domSize||1)}G!==1&&(p.domSize=G)}}function j(h,d,p,T){var _=d.dom=h.dom;T=a(d)||T,d.tag==="textarea"&&d.attrs==null&&(d.attrs={}),rs(d,h.attrs,d.attrs,T),Wn(d)||Z(_,h.children,d.children,p,null,T)}function de(h,d,p,T,_,S){if(p.instance=zr.normalize(s.call(p.state.view,p)),p.instance===p)throw Error("A view cannot return the vnode it received as argument");Ur(p.state,p,T),p.attrs!=null&&Ur(p.attrs,p,T),p.instance!=null?(d.instance==null?g(h,p.instance,T,S,_):le(h,d.instance,p.instance,T,_,S),p.dom=p.instance.dom,p.domSize=p.instance.domSize):d.instance!=null?(Oo(h,d.instance),p.dom=void 0,p.domSize=0):(p.dom=d.dom,p.domSize=d.domSize)}function ee(h,d,p){for(var T=Object.create(null);d<p;d++){var _=h[d];if(_!=null){var S=_.key;S!=null&&(T[S]=d)}}return T}var J=[];function Re(h){for(var d=[0],p=0,T=0,_=0,S=J.length=h.length,_=0;_<S;_++)J[_]=h[_];for(var _=0;_<S;++_)if(h[_]!==-1){var G=d[d.length-1];if(h[G]<h[_]){J[_]=G,d.push(_);continue}for(p=0,T=d.length-1;p<T;){var X=(p>>>1)+(T>>>1)+(p&T&1);h[d[X]]<h[_]?p=X+1:T=X}h[_]<h[d[p]]&&(p>0&&(J[_]=d[p-1]),d[p]=_)}for(p=d.length,T=d[p-1];p-- >0;)d[p]=T,T=J[T];return J.length=0,d}function Le(h,d,p){for(;d<h.length;d++)if(h[d]!=null&&h[d].dom!=null)return h[d].dom;return p}function Mt(h,d,p){var T=t.createDocumentFragment();yt(h,T,d),Ye(h,T,p)}function yt(h,d,p){for(;p.dom!=null&&p.dom.parentNode===h;){if(typeof p.tag!="string"){if(p=p.instance,p!=null)continue}else if(p.tag==="<")for(var T=0;T<p.instance.length;T++)d.appendChild(p.instance[T]);else if(p.tag!=="[")d.appendChild(p.dom);else if(p.children.length===1){if(p=p.children[0],p!=null)continue}else for(var T=0;T<p.children.length;T++){var _=p.children[T];_!=null&&yt(h,d,_)}break}}function Ye(h,d,p){p!=null?h.insertBefore(d,p):h.appendChild(d)}function Wn(h){if(h.attrs==null||h.attrs.contenteditable==null&&h.attrs.contentEditable==null)return!1;var d=h.children;if(d!=null&&d.length===1&&d[0].tag==="<"){var p=d[0].children;h.dom.innerHTML!==p&&(h.dom.innerHTML=p)}else if(d!=null&&d.length!==0)throw new Error("Child node of a contenteditable must be trusted.");return!0}function Xt(h,d,p,T){for(var _=p;_<T;_++){var S=d[_];S!=null&&Oo(h,S)}}function Oo(h,d){var p=0,T=d.state,_,S;if(typeof d.tag!="string"&&typeof d.state.onbeforeremove=="function"){var G=s.call(d.state.onbeforeremove,d);G!=null&&typeof G.then=="function"&&(p=1,_=G)}if(d.attrs&&typeof d.attrs.onbeforeremove=="function"){var G=s.call(d.attrs.onbeforeremove,d);G!=null&&typeof G.then=="function"&&(p|=2,S=G)}if(i(d,T),!p)xo(d),Or(h,d);else{if(_!=null){var X=function(){p&1&&(p&=2,p||H())};_.then(X,X)}if(S!=null){var X=function(){p&2&&(p&=1,p||H())};S.then(X,X)}}function H(){i(d,T),xo(d),Or(h,d)}}function Jn(h,d){for(var p=0;p<d.instance.length;p++)h.removeChild(d.instance[p])}function Or(h,d){for(;d.dom!=null&&d.dom.parentNode===h;){if(typeof d.tag!="string"){if(d=d.instance,d!=null)continue}else if(d.tag==="<")Jn(h,d);else{if(d.tag!=="["&&(h.removeChild(d.dom),!Array.isArray(d.children)))break;if(d.children.length===1){if(d=d.children[0],d!=null)continue}else for(var p=0;p<d.children.length;p++){var T=d.children[p];T!=null&&Or(h,T)}}break}}function xo(h){if(typeof h.tag!="string"&&typeof h.state.onremove=="function"&&s.call(h.state.onremove,h),h.attrs&&typeof h.attrs.onremove=="function"&&s.call(h.attrs.onremove,h),typeof h.tag!="string")h.instance!=null&&xo(h.instance);else{var d=h.children;if(Array.isArray(d))for(var p=0;p<d.length;p++){var T=d[p];T!=null&&xo(T)}}}function es(h,d,p){h.tag==="input"&&d.type!=null&&h.dom.setAttribute("type",d.type);var T=d!=null&&h.tag==="input"&&d.type==="file";for(var _ in d)xr(h,_,null,d[_],p,T)}function xr(h,d,p,T,_,S){if(!(d==="key"||d==="is"||T==null||Xn(d)||p===T&&!ns(h,d)&&typeof T!="object"||d==="type"&&h.tag==="input")){if(d[0]==="o"&&d[1]==="n")return ta(h,d,T);if(d.slice(0,6)==="xlink:")h.dom.setAttributeNS("http://www.w3.org/1999/xlink",d.slice(6),T);else if(d==="style")ea(h.dom,p,T);else if(Zn(h,d,_)){if(d==="value"){if((h.tag==="input"||h.tag==="textarea")&&h.dom.value===""+T&&(S||h.dom===l())||h.tag==="select"&&p!==null&&h.dom.value===""+T||h.tag==="option"&&p!==null&&h.dom.value===""+T)return;if(S&&""+T!=""){console.error("`value` is read-only on file inputs!");return}}h.dom[d]=T}else typeof T=="boolean"?T?h.dom.setAttribute(d,""):h.dom.removeAttribute(d):h.dom.setAttribute(d==="className"?"class":d,T)}}function ts(h,d,p,T){if(!(d==="key"||d==="is"||p==null||Xn(d)))if(d[0]==="o"&&d[1]==="n")ta(h,d,void 0);else if(d==="style")ea(h.dom,p,null);else if(Zn(h,d,T)&&d!=="className"&&d!=="title"&&!(d==="value"&&(h.tag==="option"||h.tag==="select"&&h.dom.selectedIndex===-1&&h.dom===l()))&&!(h.tag==="input"&&d==="type"))h.dom[d]=null;else{var _=d.indexOf(":");_!==-1&&(d=d.slice(_+1)),p!==!1&&h.dom.removeAttribute(d==="className"?"class":d)}}function os(h,d){if("value"in d)if(d.value===null)h.dom.selectedIndex!==-1&&(h.dom.value=null);else{var p=""+d.value;(h.dom.value!==p||h.dom.selectedIndex===-1)&&(h.dom.value=p)}"selectedIndex"in d&&xr(h,"selectedIndex",null,d.selectedIndex,void 0)}function rs(h,d,p,T){if(d&&d===p&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),p!=null){h.tag==="input"&&p.type!=null&&h.dom.setAttribute("type",p.type);var _=h.tag==="input"&&p.type==="file";for(var S in p)xr(h,S,d&&d[S],p[S],T,_)}var G;if(d!=null)for(var S in d)(G=d[S])!=null&&(p==null||p[S]==null)&&ts(h,S,G,T)}function ns(h,d){return d==="value"||d==="checked"||d==="selectedIndex"||d==="selected"&&h.dom===l()||h.tag==="option"&&h.dom.parentNode===t.activeElement}function Xn(h){return h==="oninit"||h==="oncreate"||h==="onupdate"||h==="onremove"||h==="onbeforeremove"||h==="onbeforeupdate"}function Zn(h,d,p){return p===void 0&&(h.tag.indexOf("-")>-1||h.attrs!=null&&h.attrs.is||d!=="href"&&d!=="list"&&d!=="form"&&d!=="width"&&d!=="height")&&d in h.dom}var as=/[A-Z]/g;function is(h){return"-"+h.toLowerCase()}function Dr(h){return h[0]==="-"&&h[1]==="-"?h:h==="cssFloat"?"float":h.replace(as,is)}function ea(h,d,p){if(d!==p)if(p==null)h.style.cssText="";else if(typeof p!="object")h.style.cssText=p;else if(d==null||typeof d!="object"){h.style.cssText="";for(var T in p){var _=p[T];_!=null&&h.style.setProperty(Dr(T),String(_))}}else{for(var T in p){var _=p[T];_!=null&&(_=String(_))!==String(d[T])&&h.style.setProperty(Dr(T),_)}for(var T in d)d[T]!=null&&p[T]==null&&h.style.removeProperty(Dr(T))}}function Lr(){this._=r}Lr.prototype=Object.create(null),Lr.prototype.handleEvent=function(h){var d=this["on"+h.type],p;typeof d=="function"?p=d.call(h.currentTarget,h):typeof d.handleEvent=="function"&&d.handleEvent(h),this._&&h.redraw!==!1&&(0,this._)(),p===!1&&(h.preventDefault(),h.stopPropagation())};function ta(h,d,p){if(h.events!=null){if(h.events._=r,h.events[d]===p)return;p!=null&&(typeof p=="function"||typeof p=="object")?(h.events[d]==null&&h.dom.addEventListener(d.slice(2),h.events,!1),h.events[d]=p):(h.events[d]!=null&&h.dom.removeEventListener(d.slice(2),h.events,!1),h.events[d]=void 0)}else p!=null&&(typeof p=="function"||typeof p=="object")&&(h.events=new Lr,h.dom.addEventListener(d.slice(2),h.events,!1),h.events[d]=p)}function Hr(h,d,p){typeof h.oninit=="function"&&s.call(h.oninit,d),typeof h.oncreate=="function"&&p.push(s.bind(h.oncreate,d))}function Ur(h,d,p){typeof h.onupdate=="function"&&p.push(s.bind(h.onupdate,d))}function ss(h,d){do{if(h.attrs!=null&&typeof h.attrs.onbeforeupdate=="function"){var p=s.call(h.attrs.onbeforeupdate,h,d);if(p!==void 0&&!p)break}if(typeof h.tag!="string"&&typeof h.state.onbeforeupdate=="function"){var p=s.call(h.state.onbeforeupdate,h,d);if(p!==void 0&&!p)break}return!1}while(!1);return h.dom=d.dom,h.domSize=d.domSize,h.instance=d.instance,h.attrs=d.attrs,h.children=d.children,h.text=d.text,!0}var Zt;return function(h,d,p){if(!h)throw new TypeError("DOM element being rendered to does not exist.");if(Zt!=null&&h.contains(Zt))throw new TypeError("Node is currently being rendered to and thus is locked.");var T=r,_=Zt,S=[],G=l(),X=h.namespaceURI;Zt=h,r=typeof p=="function"?p:void 0;try{h.vnodes==null&&(h.textContent=""),d=zr.normalizeChildren(Array.isArray(d)?d:[d]),Z(h,h.vnodes,d,S,null,X==="http://www.w3.org/1999/xhtml"?void 0:X),h.vnodes=d,G!=null&&l()!==G&&typeof G.focus=="function"&&G.focus();for(var H=0;H<S.length;H++)S[H]()}finally{r=T,Zt=_}}},xa=Is(typeof window!="undefined"?window:null),na=vt,Es=function(c,t,r){var n=[],a=!1,i=-1;function s(){for(i=0;i<n.length;i+=2)try{c(n[i],na(n[i+1]),l)}catch(g){r.error(g)}i=-1}function l(){a||(a=!0,t(function(){a=!1,s()}))}l.sync=s;function u(g,v){if(v!=null&&v.view==null&&typeof v!="function")throw new TypeError("m.mount expects a component, not a vnode.");var w=n.indexOf(g);w>=0&&(n.splice(w,2),w<=i&&(i-=2),c(g,[])),v!=null&&(n.push(g,v),c(g,na(v),l))}return{mount:u,redraw:l}},Ss=xa,En=Es(Ss,typeof requestAnimationFrame!="undefined"?requestAnimationFrame:null,typeof console!="undefined"?console:null),Da=function(c){if(Object.prototype.toString.call(c)!=="[object Object]")return"";var t=[];for(var r in c)n(r,c[r]);return t.join("&");function n(a,i){if(Array.isArray(i))for(var s=0;s<i.length;s++)n(a+"["+s+"]",i[s]);else if(Object.prototype.toString.call(i)==="[object Object]")for(var s in i)n(a+"["+s+"]",i[s]);else t.push(encodeURIComponent(a)+(i!=null&&i!==""?"="+encodeURIComponent(i):""))}},ks=yr,La=Object.assign||function(c,t){for(var r in t)ks.call(t,r)&&(c[r]=t[r])},Rs=Da,Ms=La,Sn=function(c,t){if(/:([^\/\.-]+)(\.{3})?:/.test(c))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(t==null)return c;var r=c.indexOf("?"),n=c.indexOf("#"),a=n<0?c.length:n,i=r<0?a:r,s=c.slice(0,i),l={};Ms(l,t);var u=s.replace(/:([^\/\.-]+)(\.{3})?/g,function(O,x,Z){return delete l[x],t[x]==null?O:Z?t[x]:encodeURIComponent(String(t[x]))}),g=u.indexOf("?"),v=u.indexOf("#"),w=v<0?u.length:v,E=g<0?w:g,R=u.slice(0,E);r>=0&&(R+=c.slice(r,a)),g>=0&&(R+=(r<0?"?":"&")+u.slice(g,w));var D=Rs(l);return D&&(R+=(r<0&&g<0?"?":"&")+D),n>=0&&(R+=c.slice(n)),v>=0&&(R+=(n<0?"":"&")+u.slice(v)),R},Ps=Sn,aa=yr,Ns=function(c,t,r){var n=0;function a(l){return new t(l)}a.prototype=t.prototype,a.__proto__=t;function i(l){return function(u,g){typeof u!="string"?(g=u,u=u.url):g==null&&(g={});var v=new t(function(D,O){l(Ps(u,g.params),g,function(x){if(typeof g.type=="function")if(Array.isArray(x))for(var Z=0;Z<x.length;Z++)x[Z]=new g.type(x[Z]);else x=new g.type(x);D(x)},O)});if(g.background===!0)return v;var w=0;function E(){--w===0&&typeof r=="function"&&r()}return R(v);function R(D){var O=D.then;return D.constructor=a,D.then=function(){w++;var x=O.apply(D,arguments);return x.then(E,function(Z){if(E(),w===0)throw Z}),R(x)},D}}}function s(l,u){for(var g in l.headers)if(aa.call(l.headers,g)&&g.toLowerCase()===u)return!0;return!1}return{request:i(function(l,u,g,v){var w=u.method!=null?u.method.toUpperCase():"GET",E=u.body,R=(u.serialize==null||u.serialize===JSON.serialize)&&!(E instanceof c.FormData||E instanceof c.URLSearchParams),D=u.responseType||(typeof u.extract=="function"?"":"json"),O=new c.XMLHttpRequest,x=!1,Z=!1,le=O,te,K=O.abort;O.abort=function(){x=!0,K.call(this)},O.open(w,l,u.async!==!1,typeof u.user=="string"?u.user:void 0,typeof u.password=="string"?u.password:void 0),R&&E!=null&&!s(u,"content-type")&&O.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof u.deserialize!="function"&&!s(u,"accept")&&O.setRequestHeader("Accept","application/json, text/*"),u.withCredentials&&(O.withCredentials=u.withCredentials),u.timeout&&(O.timeout=u.timeout),O.responseType=D;for(var oe in u.headers)aa.call(u.headers,oe)&&O.setRequestHeader(oe,u.headers[oe]);O.onreadystatechange=function(j){if(!x&&j.target.readyState===4)try{var de=j.target.status>=200&&j.target.status<300||j.target.status===304||/^file:\/\//i.test(l),ee=j.target.response,J;if(D==="json"){if(!j.target.responseType&&typeof u.extract!="function")try{ee=JSON.parse(j.target.responseText)}catch{ee=null}}else(!D||D==="text")&&ee==null&&(ee=j.target.responseText);if(typeof u.extract=="function"?(ee=u.extract(j.target,u),de=!0):typeof u.deserialize=="function"&&(ee=u.deserialize(ee)),de)g(ee);else{var Re=function(){try{J=j.target.responseText}catch{J=ee}var Le=new Error(J);Le.code=j.target.status,Le.response=ee,v(Le)};O.status===0?setTimeout(function(){Z||Re()}):Re()}}catch(Le){v(Le)}},O.ontimeout=function(j){Z=!0;var de=new Error("Request timed out");de.code=j.target.status,v(de)},typeof u.config=="function"&&(O=u.config(O,u,l)||O,O!==le&&(te=O.abort,O.abort=function(){x=!0,te.call(this)})),E==null?O.send():typeof u.serialize=="function"?O.send(u.serialize(E)):E instanceof c.FormData||E instanceof c.URLSearchParams?O.send(E):O.send(JSON.stringify(E))}),jsonp:i(function(l,u,g,v){var w=u.callbackName||"_mithril_"+Math.round(Math.random()*1e16)+"_"+n++,E=c.document.createElement("script");c[w]=function(R){delete c[w],E.parentNode.removeChild(E),g(R)},E.onerror=function(){delete c[w],E.parentNode.removeChild(E),v(new Error("JSONP request failed"))},E.src=l+(l.indexOf("?")<0?"?":"&")+encodeURIComponent(u.callbackKey||"callback")+"="+encodeURIComponent(w),c.document.documentElement.appendChild(E)})}},Os=ao.exports,xs=En,Ds=Ns(typeof window!="undefined"?window:null,Os,xs.redraw);function ia(c){try{return decodeURIComponent(c)}catch{return c}}var Ha=function(c){if(c===""||c==null)return{};c.charAt(0)==="?"&&(c=c.slice(1));for(var t=c.split("&"),r={},n={},a=0;a<t.length;a++){var i=t[a].split("="),s=ia(i[0]),l=i.length===2?ia(i[1]):"";l==="true"?l=!0:l==="false"&&(l=!1);var u=s.split(/\]\[?|\[/),g=n;s.indexOf("[")>-1&&u.pop();for(var v=0;v<u.length;v++){var w=u[v],E=u[v+1],R=E==""||!isNaN(parseInt(E,10));if(w===""){var s=u.slice(0,v).join();r[s]==null&&(r[s]=Array.isArray(g)?g.length:0),w=r[s]++}else if(w==="__proto__")break;if(v===u.length-1)g[w]=l;else{var D=Object.getOwnPropertyDescriptor(g,w);D!=null&&(D=D.value),D==null&&(g[w]=D=R?[]:{}),g=D}}}return n},Ls=Ha,kn=function(c){var t=c.indexOf("?"),r=c.indexOf("#"),n=r<0?c.length:r,a=t<0?n:t,i=c.slice(0,a).replace(/\/{2,}/g,"/");return i?(i[0]!=="/"&&(i="/"+i),i.length>1&&i[i.length-1]==="/"&&(i=i.slice(0,-1))):i="/",{path:i,params:t<0?{}:Ls(c.slice(t+1,n))}},Hs=kn,Us=function(c){var t=Hs(c),r=Object.keys(t.params),n=[],a=new RegExp("^"+t.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(i,s,l){return s==null?"\\"+i:(n.push({k:s,r:l==="..."}),l==="..."?"(.*)":l==="."?"([^/]+)\\.":"([^/]+)"+(l||""))})+"$");return function(i){for(var s=0;s<r.length;s++)if(t.params[r[s]]!==i.params[r[s]])return!1;if(!n.length)return a.test(i.path);var l=a.exec(i.path);if(l==null)return!1;for(var s=0;s<n.length;s++)i.params[n[s].k]=n[s].r?l[s+1]:decodeURIComponent(l[s+1]);return!0}},sa=yr,ca=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$"),Ua=function(c,t){var r={};if(t!=null)for(var n in c)sa.call(c,n)&&!ca.test(n)&&t.indexOf(n)<0&&(r[n]=c[n]);else for(var n in c)sa.call(c,n)&&!ca.test(n)&&(r[n]=c[n]);return r},Fs=vt,qs=Na,Ks=ao.exports,la=Sn,da=kn,Bs=Us,Ys=La,Gs=Ua,$r={};function zs(c){try{return decodeURIComponent(c)}catch{return c}}var $s=function(c,t){var r=c==null?null:typeof c.setImmediate=="function"?c.setImmediate:c.setTimeout,n=Ks.resolve(),a=!1,i=!1,s=0,l,u,g=$r,v,w,E,R,D={onbeforeupdate:function(){return s=s?2:1,!(!s||$r===g)},onremove:function(){c.removeEventListener("popstate",Z,!1),c.removeEventListener("hashchange",x,!1)},view:function(){if(!(!s||$r===g)){var K=[Fs(v,w.key,w)];return g&&(K=g.render(K[0])),K}}},O=te.SKIP={};function x(){a=!1;var K=c.location.hash;te.prefix[0]!=="#"&&(K=c.location.search+K,te.prefix[0]!=="?"&&(K=c.location.pathname+K,K[0]!=="/"&&(K="/"+K)));var oe=K.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,zs).slice(te.prefix.length),j=da(oe);Ys(j.params,c.history.state);function de(J){console.error(J),le(u,null,{replace:!0})}ee(0);function ee(J){for(;J<l.length;J++)if(l[J].check(j)){var Re=l[J].component,Le=l[J].route,Mt=Re,yt=R=function(Ye){if(yt===R){if(Ye===O)return ee(J+1);v=Ye!=null&&(typeof Ye.view=="function"||typeof Ye=="function")?Ye:"div",w=j.params,E=oe,R=null,g=Re.render?Re:null,s===2?t.redraw():(s=2,t.redraw.sync())}};Re.view||typeof Re=="function"?(Re={},yt(Mt)):Re.onmatch?n.then(function(){return Re.onmatch(j.params,oe,Le)}).then(yt,oe===u?null:de):yt("div");return}if(oe===u)throw new Error("Could not resolve default route "+u+".");le(u,null,{replace:!0})}}function Z(){a||(a=!0,r(x))}function le(K,oe,j){if(K=la(K,oe),i){Z();var de=j?j.state:null,ee=j?j.title:null;j&&j.replace?c.history.replaceState(de,ee,te.prefix+K):c.history.pushState(de,ee,te.prefix+K)}else c.location.href=te.prefix+K}function te(K,oe,j){if(!K)throw new TypeError("DOM element being rendered to does not exist.");if(l=Object.keys(j).map(function(ee){if(ee[0]!=="/")throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(ee))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:ee,component:j[ee],check:Bs(ee)}}),u=oe,oe!=null){var de=da(oe);if(!l.some(function(ee){return ee.check(de)}))throw new ReferenceError("Default route doesn't match any known routes.")}typeof c.history.pushState=="function"?c.addEventListener("popstate",Z,!1):te.prefix[0]==="#"&&c.addEventListener("hashchange",x,!1),i=!0,t.mount(K,D),x()}return te.set=function(K,oe,j){R!=null&&(j=j||{},j.replace=!0),R=null,le(K,oe,j)},te.get=function(){return E},te.prefix="#!",te.Link={view:function(K){var oe=qs(K.attrs.selector||"a",Gs(K.attrs,["options","params","selector","onclick"]),K.children),j,de,ee;return(oe.attrs.disabled=Boolean(oe.attrs.disabled))?(oe.attrs.href=null,oe.attrs["aria-disabled"]="true"):(j=K.attrs.options,de=K.attrs.onclick,ee=la(oe.attrs.href,K.attrs.params),oe.attrs.href=te.prefix+ee,oe.attrs.onclick=function(J){var Re;typeof de=="function"?Re=de.call(J.currentTarget,J):de==null||typeof de!="object"||typeof de.handleEvent=="function"&&de.handleEvent(J),Re!==!1&&!J.defaultPrevented&&(J.button===0||J.which===0||J.which===1)&&(!J.currentTarget.target||J.currentTarget.target==="_self")&&!J.ctrlKey&&!J.metaKey&&!J.shiftKey&&!J.altKey&&(J.preventDefault(),J.redraw=!1,te.set(ee,null,j))}),oe}},te.param=function(K){return w&&K!=null?w[K]:w},te},js=En,Vs=$s(typeof window!="undefined"?window:null,js),Cr=As,Fa=Ds,qa=En,_e=function(){return Cr.apply(this,arguments)};_e.m=Cr;_e.trust=Cr.trust;_e.fragment=Cr.fragment;_e.Fragment="[";_e.mount=qa.mount;_e.route=Vs;_e.render=xa;_e.redraw=qa.redraw;_e.request=Fa.request;_e.jsonp=Fa.jsonp;_e.parseQueryString=Ha;_e.buildQueryString=Da;_e.parsePathname=kn;_e.buildPathname=Sn;_e.vnode=vt;_e.PromisePolyfill=Oa;_e.censor=Ua;var o=_e;class Be{}A(Be,"apiUrl","https://api.hospitalmetropolitano.org");class Qs{constructor(){this.token=localStorage.getItem("userToken")==null?null:localStorage.getItem("userToken"),this.user=localStorage.getItem("userToken")==null?null:JSON.parse(atob(localStorage.getItem("userToken").split(".")[1])).data}async login(t){try{y.messageError=null;let r=await fetch(Be.apiUrl+"/v2/sso/auth",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:t.usrToken}});if(r.ok){let n=await r.json();return n.status?(this.token=n.data.jwt,localStorage.clear(),localStorage.setItem("userToken",this.token),!0):(localStorage.clear(),y.messageError=n.message,!1)}else return!1}catch(r){return console.error(r),!1}}logout(){this.token=null,this.user=null,localStorage.removeItem("userToken"),localStorage.clear()}isAuthenticated(){if(this.token&&this.user){let r=JSON.parse(atob(this.token.split(".")[1])).exp*1e3;return Date.now()<r}else return!1}hasRole(t){return!!(this.user&&this.user.role===t)}hasProfile(t){return!!(this.user&&this.user.profile.includes(t))}}const Ws="modulepreload",ua={},Js="/",ha=function(t,r){return!r||r.length===0?t():Promise.all(r.map(n=>{if(n=`${Js}${n}`,n in ua)return;ua[n]=!0;const a=n.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const s=document.createElement("link");if(s.rel=a?"stylesheet":Ws,a||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),a)return new Promise((l,u)=>{s.addEventListener("load",l),s.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};/*! @azure/msal-common v14.1.0 2023-10-05 */const b={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",REGIONAL_AUTH_NON_MSI_QUERY_STRING:"allowestsrnonmsi=true",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Lo={SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},So=[b.OPENID_SCOPE,b.PROFILE_SCOPE,b.OFFLINE_ACCESS_SCOPE],ma=[...So,b.EMAIL_SCOPE],ot={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Ae={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},io={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},B={CLIENT_ID:"client_id",REDIRECT_URI:"redirect_uri",RESPONSE_TYPE:"response_type",RESPONSE_MODE:"response_mode",GRANT_TYPE:"grant_type",CLAIMS:"claims",SCOPE:"scope",ERROR:"error",ERROR_DESCRIPTION:"error_description",ACCESS_TOKEN:"access_token",ID_TOKEN:"id_token",REFRESH_TOKEN:"refresh_token",EXPIRES_IN:"expires_in",STATE:"state",NONCE:"nonce",PROMPT:"prompt",SESSION_STATE:"session_state",CLIENT_INFO:"client_info",CODE:"code",CODE_CHALLENGE:"code_challenge",CODE_CHALLENGE_METHOD:"code_challenge_method",CODE_VERIFIER:"code_verifier",CLIENT_REQUEST_ID:"client-request-id",X_CLIENT_SKU:"x-client-SKU",X_CLIENT_VER:"x-client-VER",X_CLIENT_OS:"x-client-OS",X_CLIENT_CPU:"x-client-CPU",X_CLIENT_CURR_TELEM:"x-client-current-telemetry",X_CLIENT_LAST_TELEM:"x-client-last-telemetry",X_MS_LIB_CAPABILITY:"x-ms-lib-capability",X_APP_NAME:"x-app-name",X_APP_VER:"x-app-ver",POST_LOGOUT_URI:"post_logout_redirect_uri",ID_TOKEN_HINT:"id_token_hint",DEVICE_CODE:"device_code",CLIENT_SECRET:"client_secret",CLIENT_ASSERTION:"client_assertion",CLIENT_ASSERTION_TYPE:"client_assertion_type",TOKEN_TYPE:"token_type",REQ_CNF:"req_cnf",OBO_ASSERTION:"assertion",REQUESTED_TOKEN_USE:"requested_token_use",ON_BEHALF_OF:"on_behalf_of",FOCI:"foci",CCS_HEADER:"X-AnchorMailbox",RETURN_SPA_CODE:"return_spa_code",NATIVE_BROKER:"nativebroker",LOGOUT_HINT:"logout_hint"},Ho={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Pe={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},jr={ACCOUNT:"account",SID:"sid",LOGIN_HINT:"login_hint",ID_TOKEN:"id_token",DOMAIN_HINT:"domain_hint",ORGANIZATIONS:"organizations",CONSUMERS:"consumers",ACCOUNT_ID:"accountIdentifier",HOMEACCOUNT_ID:"homeAccountIdentifier"},pa={PLAIN:"plain",S256:"S256"},ko={QUERY:"query",FRAGMENT:"fragment"},Xs={...ko,FORM_POST:"form_post"},Ka={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Uo={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},ke={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},F={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Vr={ADFS:1001,MSA:1002,MSSTS:1003,GENERIC:1004,ACCESS_TOKEN:2001,REFRESH_TOKEN:2002,ID_TOKEN:2003,APP_METADATA:3001,UNDEFINED:9999},Zr="appmetadata",Zs="client_info",so="1",co={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Je={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Ie={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},ae={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},lo={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},ga={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},fa={username:"username",password:"password"},Fo={httpSuccess:200,httpBadRequest:400},Ot={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Qr={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},qe={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},ec={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};/*! @azure/msal-common v14.1.0 2023-10-05 */const po="unexpected_error",en="post_request_failed";/*! @azure/msal-common v14.1.0 2023-10-05 */const Bo={[po]:"Unexpected error in authentication.",[en]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};Bo[po],Bo[en];class he extends Error{constructor(t,r,n){const a=r?`${t}: ${r}`:t;super(a),Object.setPrototypeOf(this,he.prototype),this.errorCode=t||b.EMPTY_STRING,this.errorMessage=r||b.EMPTY_STRING,this.subError=n||b.EMPTY_STRING,this.name="AuthError"}setCorrelationId(t){this.correlationId=t}}function Ba(c,t){return new he(c,t?`${Bo[c]} ${t}`:Bo[c])}/*! @azure/msal-common v14.1.0 2023-10-05 */const go="client_info_decoding_error",Yo="client_info_empty_error",fo="token_parsing_error",Go="null_or_empty_token",Ke="endpoints_resolution_error",zo="network_error",$o="openid_config_error",bo="hash_not_deserialized",mt="invalid_state",jo="state_mismatch",pt="state_not_found",Vo="nonce_mismatch",vo="auth_time_not_found",Qo="max_age_transpired",tn="multiple_matching_tokens",Wo="multiple_matching_accounts",Jo="multiple_matching_appMetadata",Xo="request_cannot_be_made",Zo="cannot_remove_empty_scope",er="cannot_append_scopeset",yo="empty_input_scopeset",on="device_code_polling_cancelled",rn="device_code_expired",nn="device_code_unknown_error",Co="no_account_in_silent_request",tr="invalid_cache_record",To="invalid_cache_environment",wo="no_account_found",_o="no_crypto_object",Bt="unexpected_credential_type",an="invalid_assertion",sn="invalid_client_credential",Xe="token_refresh_required",cn="user_timeout_reached",or="token_claims_cnf_required_for_signedjwt",rr="authorization_code_missing_from_server_response",nr="binding_key_not_removed",ar="end_session_endpoint_not_supported",Ao="key_id_missing",ln="no_network_connectivity",dn="user_canceled",un="missing_tenant_id_error",W="method_not_implemented";/*! @azure/msal-common v14.1.0 2023-10-05 */const z={[go]:"The client info could not be parsed/decoded correctly",[Yo]:"The client info was empty",[fo]:"Token cannot be parsed",[Go]:"The token is null or empty",[Ke]:"Endpoints cannot be resolved",[zo]:"Network request failed",[$o]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[bo]:"The hash parameters could not be deserialized",[mt]:"State was not the expected format",[jo]:"State mismatch error",[pt]:"State not found",[Vo]:"Nonce mismatch error",[vo]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Qo]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[tn]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Wo]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Jo]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Xo]:"Token request cannot be made without authorization code or refresh token.",[Zo]:"Cannot remove null or empty scope from ScopeSet",[er]:"Cannot append ScopeSet",[yo]:"Empty input ScopeSet cannot be processed",[on]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[rn]:"Device code is expired.",[nn]:"Device code stopped polling for unknown reasons.",[Co]:"Please pass an account object, silent flow is not supported without account information",[tr]:"Cache record object was null or undefined.",[To]:"Invalid environment when attempting to create cache entry",[wo]:"No account found in cache for given key.",[_o]:"No crypto object detected.",[Bt]:"Unexpected credential type.",[an]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[sn]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Xe]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[cn]:"User defined timeout for device code polling reached",[or]:"Cannot generate a POP jwt if the token_claims are not populated",[rr]:"Server response does not contain an authorization code to proceed",[nr]:"Could not remove the credential's binding key from storage.",[ar]:"The provided authority does not support logout",[Ao]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[ln]:"No network connectivity. Check your internet connection.",[dn]:"User cancelled the flow.",[un]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[W]:"This method has not been implemented"};z[go],z[Yo],z[fo],z[Go],z[Ke],z[zo],z[$o],z[bo],z[mt],z[jo],z[pt],z[Vo],z[vo],z[Qo],z[tn],z[Wo],z[Jo],z[Xo],z[Zo],z[er],z[yo],z[on],z[rn],z[nn],z[Co],z[tr],z[To],z[wo],z[_o],z[Bt],z[an],z[sn],z[Xe],z[cn],z[or],z[rr],z[nr],z[ar],z[Ao],z[ln],z[dn],z[un];class Tr extends he{constructor(t,r){super(t,r?`${z[t]}: ${r}`:z[t]),this.name="ClientAuthError",Object.setPrototypeOf(this,Tr.prototype)}}function I(c,t){return new Tr(c,t)}/*! @azure/msal-common v14.1.0 2023-10-05 */const ir={createNewGuid:()=>{throw I(W)},base64Decode:()=>{throw I(W)},base64Encode:()=>{throw I(W)},async getPublicKeyThumbprint(){throw I(W)},async removeTokenBindingKey(){throw I(W)},async clearKeystore(){throw I(W)},async signJwt(){throw I(W)},async hashString(){throw I(W)}};/*! @azure/msal-common v14.1.0 2023-10-05 */var ye;(function(c){c[c.Error=0]="Error",c[c.Warning=1]="Warning",c[c.Info=2]="Info",c[c.Verbose=3]="Verbose",c[c.Trace=4]="Trace"})(ye||(ye={}));class gt{constructor(t,r,n){this.level=ye.Info;const a=()=>{},i=t||gt.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||a,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:ye.Info,this.correlationId=i.correlationId||b.EMPTY_STRING,this.packageName=r||b.EMPTY_STRING,this.packageVersion=n||b.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ye.Info}}clone(t,r,n){return new gt({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},t,r)}logMessage(t,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;const i=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${ye[r.logLevel]} - ${t}`;this.executeCallback(r.logLevel,i,r.containsPii||!1)}executeCallback(t,r,n){this.localCallback&&this.localCallback(t,r,n)}error(t,r){this.logMessage(t,{logLevel:ye.Error,containsPii:!1,correlationId:r||b.EMPTY_STRING})}errorPii(t,r){this.logMessage(t,{logLevel:ye.Error,containsPii:!0,correlationId:r||b.EMPTY_STRING})}warning(t,r){this.logMessage(t,{logLevel:ye.Warning,containsPii:!1,correlationId:r||b.EMPTY_STRING})}warningPii(t,r){this.logMessage(t,{logLevel:ye.Warning,containsPii:!0,correlationId:r||b.EMPTY_STRING})}info(t,r){this.logMessage(t,{logLevel:ye.Info,containsPii:!1,correlationId:r||b.EMPTY_STRING})}infoPii(t,r){this.logMessage(t,{logLevel:ye.Info,containsPii:!0,correlationId:r||b.EMPTY_STRING})}verbose(t,r){this.logMessage(t,{logLevel:ye.Verbose,containsPii:!1,correlationId:r||b.EMPTY_STRING})}verbosePii(t,r){this.logMessage(t,{logLevel:ye.Verbose,containsPii:!0,correlationId:r||b.EMPTY_STRING})}trace(t,r){this.logMessage(t,{logLevel:ye.Trace,containsPii:!1,correlationId:r||b.EMPTY_STRING})}tracePii(t,r){this.logMessage(t,{logLevel:ye.Trace,containsPii:!0,correlationId:r||b.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v14.1.0 2023-10-05 */const Ya="@azure/msal-common",Rn="14.1.0";/*! @azure/msal-common v14.1.0 2023-10-05 */const Mn={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v14.1.0 2023-10-05 */const Ga="redirect_uri_empty",tc="claims_request_parsing_error",za="authority_uri_insecure",oo="url_parse_error",Pn="empty_url_error",$a="empty_input_scopes_error",ja="invalid_prompt_value",Nn="invalid_claims",On="token_request_empty",Va="logout_request_empty",Qa="invalid_code_challenge_method",xn="pkce_params_missing",Wa="invalid_cloud_discovery_metadata",Ja="invalid_authority_metadata",Xa="untrusted_authority",wr="missing_ssh_jwk",Za="missing_ssh_kid",oc="missing_nonce_authentication_header",rc="invalid_authentication_header",ei="cannot_set_OIDCOptions",ti="cannot_allow_native_broker",oi="authority_mismatch";/*! @azure/msal-common v14.1.0 2023-10-05 */const nc={[Ga]:"A redirect URI is required for all calls, and none has been set.",[tc]:"Could not parse the given claims request object.",[za]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[oo]:"URL could not be parsed into appropriate segments.",[Pn]:"URL was empty or null.",[$a]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[ja]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[Nn]:"Given claims parameter must be a stringified JSON object.",[On]:"Token request was empty and not found in cache.",[Va]:"The logout request was null or undefined.",[Qa]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[xn]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Wa]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Ja]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Xa]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[wr]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Za]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[oc]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[rc]:"Invalid authentication header provided",[ei]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[ti]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[oi]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class Dn extends he{constructor(t){super(t,nc[t]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Dn.prototype)}}function ie(c){return new Dn(c)}/*! @azure/msal-common v14.1.0 2023-10-05 */class He{static isEmptyObj(t){if(t)try{const r=JSON.parse(t);return Object.keys(r).length===0}catch{}return!0}static startsWith(t,r){return t.indexOf(r)===0}static endsWith(t,r){return t.length>=r.length&&t.lastIndexOf(r)===t.length-r.length}static queryStringToObject(t){const r={},n=t.split("&"),a=i=>decodeURIComponent(i.replace(/\+/g," "));return n.forEach(i=>{if(i.trim()){const[s,l]=i.split(/=(.+)/g,2);s&&l&&(r[a(s)]=a(l))}}),r}static trimArrayEntries(t){return t.map(r=>r.trim())}static removeEmptyStringsFromArray(t){return t.filter(r=>!!r)}static jsonParseHelper(t){try{return JSON.parse(t)}catch{return null}}static matchPattern(t,r){return new RegExp(t.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}}/*! @azure/msal-common v14.1.0 2023-10-05 */class ge{constructor(t){const r=t?He.trimArrayEntries([...t]):[],n=r?He.removeEmptyStringsFromArray(r):[];this.validateInputScopes(n),this.scopes=new Set,n.forEach(a=>this.scopes.add(a))}static fromString(t){const n=(t||b.EMPTY_STRING).split(" ");return new ge(n)}static createSearchScopes(t){const r=new ge(t);return r.containsOnlyOIDCScopes()?r.removeScope(b.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}validateInputScopes(t){if(!t||t.length<1)throw ie($a)}containsScope(t){const r=this.printScopesLowerCase().split(" "),n=new ge(r);return t?n.scopes.has(t.toLowerCase()):!1}containsScopeSet(t){return!t||t.scopes.size<=0?!1:this.scopes.size>=t.scopes.size&&t.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let t=0;return ma.forEach(r=>{this.containsScope(r)&&(t+=1)}),this.scopes.size===t}appendScope(t){t&&this.scopes.add(t.trim())}appendScopes(t){try{t.forEach(r=>this.appendScope(r))}catch{throw I(er)}}removeScope(t){if(!t)throw I(Zo);this.scopes.delete(t.trim())}removeOIDCScopes(){ma.forEach(t=>{this.scopes.delete(t)})}unionScopeSets(t){if(!t)throw I(yo);const r=new Set;return t.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(t){if(!t)throw I(yo);t.containsOnlyOIDCScopes()||t.removeOIDCScopes();const r=this.unionScopeSets(t),n=t.getScopeCount(),a=this.getScopeCount();return r.size<a+n}getScopeCount(){return this.scopes.size}asArray(){const t=[];return this.scopes.forEach(r=>t.push(r)),t}printScopes(){return this.scopes?this.asArray().join(" "):b.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.1.0 2023-10-05 */function sr(c,t){if(!c)throw I(Yo);try{const r=t.base64Decode(c);return JSON.parse(r)}catch{throw I(go)}}function Ut(c){if(!c)throw I(go);const t=c.split(ke.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?b.EMPTY_STRING:t[1]}}/*! @azure/msal-common v14.1.0 2023-10-05 */const je={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.1.0 2023-10-05 */const st={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.1.0 2023-10-05 */class fe{generateAccountId(){return[this.homeAccountId,this.environment].join(ke.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return fe.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType}}static generateAccountCacheKey(t){return[t.homeAccountId,t.environment||b.EMPTY_STRING,t.tenantId||b.EMPTY_STRING].join(ke.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(t,r){const n=new fe;r.authorityType===je.Adfs?n.authorityType=Uo.ADFS_ACCOUNT_TYPE:r.protocolMode===st.AAD?n.authorityType=Uo.MSSTS_ACCOUNT_TYPE:n.authorityType=Uo.GENERIC_ACCOUNT_TYPE,n.clientInfo=t.clientInfo,n.homeAccountId=t.homeAccountId,n.nativeAccountId=t.nativeAccountId;const a=t.environment||r&&r.getPreferredCache();if(!a)throw I(To);n.environment=a,n.realm=t.idTokenClaims.tid||b.EMPTY_STRING,n.idTokenClaims=t.idTokenClaims,n.localAccountId=t.idTokenClaims.oid||t.idTokenClaims.sub||b.EMPTY_STRING;const i=t.idTokenClaims.preferred_username||t.idTokenClaims.upn,s=t.idTokenClaims.emails?t.idTokenClaims.emails[0]:null;return n.username=i||s||b.EMPTY_STRING,n.name=t.idTokenClaims.name,n.cloudGraphHostName=t.cloudGraphHostName,n.msGraphHost=t.msGraphHost,n}static createFromAccountInfo(t,r,n){const a=new fe;return a.authorityType=t.authorityType||Uo.GENERIC_ACCOUNT_TYPE,a.homeAccountId=t.homeAccountId,a.localAccountId=t.localAccountId,a.nativeAccountId=t.nativeAccountId,a.realm=t.tenantId,a.environment=t.environment,a.username=t.username,a.name=t.name,a.idTokenClaims=t.idTokenClaims,a.cloudGraphHostName=r,a.msGraphHost=n,a}static generateHomeAccountId(t,r,n,a,i){const s=i!=null&&i.sub?i.sub:b.EMPTY_STRING;if(r===je.Adfs||r===je.Dsts)return s;if(t)try{const l=sr(t,a);if(l.uid&&l.utid)return`${l.uid}${ke.CLIENT_INFO_SEPARATOR}${l.utid}`}catch{}return n.verbose("No client info in response"),s}static isAccountEntity(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("localAccountId")&&t.hasOwnProperty("username")&&t.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(t,r,n){if(!t||!r)return!1;let a=!0;if(n){const i=t.idTokenClaims||{},s=r.idTokenClaims||{};a=i.iat===s.iat&&i.nonce===s.nonce}return t.homeAccountId===r.homeAccountId&&t.localAccountId===r.localAccountId&&t.username===r.username&&t.tenantId===r.tenantId&&t.environment===r.environment&&t.nativeAccountId===r.nativeAccountId&&a}}/*! @azure/msal-common v14.1.0 2023-10-05 */function ft(c,t){const r=ac(c);try{const n=t(r);return JSON.parse(n)}catch{throw I(fo)}}function ac(c){if(!c)throw I(Go);const r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(c);if(!r||r.length<4)throw I(fo);return r[2]}function ri(c,t){if(t===0||Date.now()-3e5>c+t)throw I(Qo)}/*! @azure/msal-common v14.1.0 2023-10-05 */class De{constructor(t,r,n){this.clientId=t,this.cryptoImpl=r,this.commonLogger=n.clone(Ya,Rn)}getAllAccounts(t){if(t)return this.getAccountsFilteredBy(t).map(i=>i.getAccountInfo());const r=this.getAccountKeys();return r.length<1?[]:r.reduce((i,s)=>{const l=this.getAccount(s);return l&&i.push(l),i},[]).map(i=>this.getAccountInfoFromEntity(i))}getAccountInfoFilteredBy(t){const r=this.getAccountsFilteredBy(t);return r.length>0?this.getAccountInfoFromEntity(r[0]):null}getAccountInfoFromEntity(t){const r=t.getAccountInfo(),n=this.getIdToken(r);return n&&(r.idToken=n.secret,r.idTokenClaims=ft(n.secret,this.cryptoImpl.base64Decode)),r}async saveCacheRecord(t,r){if(!t)throw I(tr);t.account&&this.setAccount(t.account),!!t.idToken&&(r==null?void 0:r.idToken)!==!1&&this.setIdTokenCredential(t.idToken),!!t.accessToken&&(r==null?void 0:r.accessToken)!==!1&&await this.saveAccessToken(t.accessToken),!!t.refreshToken&&(r==null?void 0:r.refreshToken)!==!1&&this.setRefreshTokenCredential(t.refreshToken),t.appMetadata&&this.setAppMetadata(t.appMetadata)}async saveAccessToken(t){const r={clientId:t.clientId,credentialType:t.credentialType,environment:t.environment,homeAccountId:t.homeAccountId,realm:t.realm,tokenType:t.tokenType,requestedClaimsHash:t.requestedClaimsHash},n=this.getTokenKeys(),a=ge.fromString(t.target),i=[];n.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,r,!1))return;const l=this.getAccessTokenCredential(s);l&&this.credentialMatchesFilter(l,r)&&ge.fromString(l.target).intersectingScopeSets(a)&&i.push(this.removeAccessToken(s))}),await Promise.all(i),this.setAccessTokenCredential(t)}getAccountsFilteredBy(t){const r=this.getAccountKeys(),n=[];return r.forEach(a=>{if(!this.isAccountKey(a,t.homeAccountId,t.tenantId))return;const i=this.getAccount(a);!i||!!t.homeAccountId&&!this.matchHomeAccountId(i,t.homeAccountId)||!!t.localAccountId&&!this.matchLocalAccountId(i,t.localAccountId)||!!t.username&&!this.matchUsername(i,t.username)||!!t.environment&&!this.matchEnvironment(i,t.environment)||!!t.realm&&!this.matchRealm(i,t.realm)||!!t.tenantId&&!this.matchRealm(i,t.tenantId)||!!t.nativeAccountId&&!this.matchNativeAccountId(i,t.nativeAccountId)||!!t.loginHint&&!this.matchLoginHint(i,t.loginHint)||!!t.authorityType&&!this.matchAuthorityType(i,t.authorityType)||!!t.name&&!this.matchName(i,t.name)||n.push(i)}),n}isAccountKey(t,r,n){return!(t.split(ke.CACHE_KEY_SEPARATOR).length<3||r&&!t.toLowerCase().includes(r.toLowerCase())||n&&!t.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(t){if(t.split(ke.CACHE_KEY_SEPARATOR).length<6)return!1;const r=t.toLowerCase();if(r.indexOf(F.ID_TOKEN.toLowerCase())===-1&&r.indexOf(F.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(F.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(F.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(F.REFRESH_TOKEN.toLowerCase())>-1){const n=`${F.REFRESH_TOKEN}${ke.CACHE_KEY_SEPARATOR}${this.clientId}${ke.CACHE_KEY_SEPARATOR}`,a=`${F.REFRESH_TOKEN}${ke.CACHE_KEY_SEPARATOR}${so}${ke.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(a.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(t,r){return!(!!r.clientId&&!this.matchClientId(t,r.clientId)||!!r.userAssertionHash&&!this.matchUserAssertionHash(t,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(t,r.homeAccountId)||!!r.environment&&!this.matchEnvironment(t,r.environment)||!!r.realm&&!this.matchRealm(t,r.realm)||!!r.credentialType&&!this.matchCredentialType(t,r.credentialType)||!!r.familyId&&!this.matchFamilyId(t,r.familyId)||!!r.target&&!this.matchTarget(t,r.target)||(r.requestedClaimsHash||t.requestedClaimsHash)&&t.requestedClaimsHash!==r.requestedClaimsHash||t.credentialType===F.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(!!r.tokenType&&!this.matchTokenType(t,r.tokenType)||r.tokenType===ae.SSH&&r.keyId&&!this.matchKeyId(t,r.keyId)))}getAppMetadataFilteredBy(t){return this.getAppMetadataFilteredByInternal(t.environment,t.clientId)}getAppMetadataFilteredByInternal(t,r){const n=this.getKeys(),a={};return n.forEach(i=>{if(!this.isAppMetadata(i))return;const s=this.getAppMetadata(i);!s||!!t&&!this.matchEnvironment(s,t)||!!r&&!this.matchClientId(s,r)||(a[i]=s)}),a}getAuthorityMetadataByAlias(t){const r=this.getAuthorityMetadataKeys();let n=null;return r.forEach(a=>{if(!this.isAuthorityMetadata(a)||a.indexOf(this.clientId)===-1)return;const i=this.getAuthorityMetadata(a);!i||i.aliases.indexOf(t)!==-1&&(n=i)}),n}async removeAllAccounts(){const t=this.getAccountKeys(),r=[];t.forEach(n=>{r.push(this.removeAccount(n))}),await Promise.all(r)}async removeAccount(t){const r=this.getAccount(t);!r||(await this.removeAccountContext(r),this.removeItem(t))}async removeAccountContext(t){const r=this.getTokenKeys(),n=t.generateAccountId(),a=[];r.idToken.forEach(i=>{i.indexOf(n)===0&&this.removeIdToken(i)}),r.accessToken.forEach(i=>{i.indexOf(n)===0&&a.push(this.removeAccessToken(i))}),r.refreshToken.forEach(i=>{i.indexOf(n)===0&&this.removeRefreshToken(i)}),await Promise.all(a)}async removeAccessToken(t){const r=this.getAccessTokenCredential(t);if(!!r){if(r.credentialType.toLowerCase()===F.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&r.tokenType===ae.POP){const a=r.keyId;if(a)try{await this.cryptoImpl.removeTokenBindingKey(a)}catch{throw I(nr)}}return this.removeItem(t)}}removeAppMetadata(){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r)}),!0}readCacheRecord(t,r,n){const a=this.getTokenKeys(),i=this.readAccountFromCache(t),s=this.getIdToken(t,a),l=this.getAccessToken(t,r,a),u=this.getRefreshToken(t,!1,a),g=this.readAppMetadataFromCache(n);return i&&s&&(i.idTokenClaims=ft(s.secret,this.cryptoImpl.base64Decode)),{account:i,idToken:s,accessToken:l,refreshToken:u,appMetadata:g}}readAccountFromCache(t){const r=fe.generateAccountCacheKey(t);return this.getAccount(r)}getIdToken(t,r){this.commonLogger.trace("CacheManager - getIdToken called");const n={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:F.ID_TOKEN,clientId:this.clientId,realm:t.tenantId},a=this.getIdTokensByFilter(n,r),i=a.length;return i<1?(this.commonLogger.info("CacheManager:getIdToken - No token found"),null):i>1?(this.commonLogger.info("CacheManager:getIdToken - Multiple id tokens found, clearing them"),a.forEach(s=>{this.removeIdToken(s.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getIdToken - Returning id token"),a[0])}getIdTokensByFilter(t,r){const n=r&&r.idToken||this.getTokenKeys().idToken,a=[];return n.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,{clientId:this.clientId,...t}))return;const s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,t)&&a.push(s)}),a}idTokenKeyMatchesFilter(t,r){const n=t.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(t){this.removeItem(t)}removeRefreshToken(t){this.removeItem(t)}getAccessToken(t,r,n){this.commonLogger.trace("CacheManager - getAccessToken called");const a=ge.createSearchScopes(r.scopes),i=r.authenticationScheme||ae.BEARER,s=i&&i.toLowerCase()!==ae.BEARER.toLowerCase()?F.ACCESS_TOKEN_WITH_AUTH_SCHEME:F.ACCESS_TOKEN,l={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:s,clientId:this.clientId,realm:t.tenantId,target:a,tokenType:i,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},u=n&&n.accessToken||this.getTokenKeys().accessToken,g=[];u.forEach(w=>{if(this.accessTokenKeyMatchesFilter(w,l,!0)){const E=this.getAccessTokenCredential(w);E&&this.credentialMatchesFilter(E,l)&&g.push(E)}});const v=g.length;return v<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):v>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),g.forEach(w=>{this.removeAccessToken(w.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),g[0])}accessTokenKeyMatchesFilter(t,r,n){const a=t.toLowerCase();if(r.clientId&&a.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&a.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&a.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&a.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){const i=r.target.asArray();for(let s=0;s<i.length;s++){if(n&&!a.includes(i[s].toLowerCase()))return!1;if(!n&&a.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(t){const r=this.getTokenKeys(),n=[];return r.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,t,!0))return;const i=this.getAccessTokenCredential(a);i&&this.credentialMatchesFilter(i,t)&&n.push(i)}),n}getRefreshToken(t,r,n){this.commonLogger.trace("CacheManager - getRefreshToken called");const a=r?so:void 0,i={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:F.REFRESH_TOKEN,clientId:this.clientId,familyId:a},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,l=[];return s.forEach(g=>{if(this.refreshTokenKeyMatchesFilter(g,i)){const v=this.getRefreshTokenCredential(g);v&&this.credentialMatchesFilter(v,i)&&l.push(v)}}),l.length<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(t,r){const n=t.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(t){const r={environment:t,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),a=Object.keys(n).map(s=>n[s]),i=a.length;if(i<1)return null;if(i>1)throw I(Jo);return a[0]}isAppMetadataFOCI(t){const r=this.readAppMetadataFromCache(t);return!!(r&&r.familyId===so)}matchHomeAccountId(t,r){return typeof t.homeAccountId=="string"&&r===t.homeAccountId}matchLocalAccountId(t,r){return typeof t.localAccountId=="string"&&r===t.localAccountId}matchUsername(t,r){return typeof t.username=="string"&&r.toLowerCase()===t.username.toLowerCase()}matchName(t,r){var n;return r.toLowerCase()===((n=t.name)==null?void 0:n.toLowerCase())}matchUserAssertionHash(t,r){return!!(t.userAssertionHash&&r===t.userAssertionHash)}matchEnvironment(t,r){const n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(t.environment)>-1)}matchCredentialType(t,r){return t.credentialType&&r.toLowerCase()===t.credentialType.toLowerCase()}matchClientId(t,r){return!!(t.clientId&&r===t.clientId)}matchFamilyId(t,r){return!!(t.familyId&&r===t.familyId)}matchRealm(t,r){return!!(t.realm&&r===t.realm)}matchNativeAccountId(t,r){return!!(t.nativeAccountId&&r===t.nativeAccountId)}matchLoginHint(t,r){var n,a;return((n=t.idTokenClaims)==null?void 0:n.login_hint)===r||t.username===r||((a=t.idTokenClaims)==null?void 0:a.upn)===r}matchAuthorityType(t,r){return!!(t.authorityType&&r.toLowerCase()===t.authorityType.toLowerCase())}matchTarget(t,r){return t.credentialType!==F.ACCESS_TOKEN&&t.credentialType!==F.ACCESS_TOKEN_WITH_AUTH_SCHEME||!t.target?!1:ge.fromString(t.target).containsScopeSet(r)}matchTokenType(t,r){return!!(t.tokenType&&t.tokenType===r)}matchKeyId(t,r){return!!(t.keyId&&t.keyId===r)}isAppMetadata(t){return t.indexOf(Zr)!==-1}isAuthorityMetadata(t){return t.indexOf(co.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(t){return`${co.CACHE_KEY}-${this.clientId}-${t}`}static toObject(t,r){for(const n in r)t[n]=r[n];return t}}class ic extends De{setAccount(){throw I(W)}getAccount(){throw I(W)}setIdTokenCredential(){throw I(W)}getIdTokenCredential(){throw I(W)}setAccessTokenCredential(){throw I(W)}getAccessTokenCredential(){throw I(W)}setRefreshTokenCredential(){throw I(W)}getRefreshTokenCredential(){throw I(W)}setAppMetadata(){throw I(W)}getAppMetadata(){throw I(W)}setServerTelemetry(){throw I(W)}getServerTelemetry(){throw I(W)}setAuthorityMetadata(){throw I(W)}getAuthorityMetadata(){throw I(W)}getAuthorityMetadataKeys(){throw I(W)}setThrottlingCache(){throw I(W)}getThrottlingCache(){throw I(W)}removeItem(){throw I(W)}containsKey(){throw I(W)}getKeys(){throw I(W)}getAccountKeys(){throw I(W)}getTokenKeys(){throw I(W)}async clear(){throw I(W)}updateCredentialCacheKey(){throw I(W)}}/*! @azure/msal-common v14.1.0 2023-10-05 */const sc=300,ni={tokenRenewalOffsetSeconds:sc,preventCorsPreflight:!1},cc={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ye.Info,correlationId:b.EMPTY_STRING},lc={claimsBasedCachingEnabled:!1},dc={async sendGetRequestAsync(){throw I(W)},async sendPostRequestAsync(){throw I(W)}},uc={sku:b.SKU,version:Rn,cpu:b.EMPTY_STRING,os:b.EMPTY_STRING},hc={clientSecret:b.EMPTY_STRING,clientAssertion:void 0},mc={azureCloudInstance:Mn.None,tenant:`${b.DEFAULT_COMMON_TENANT}`},pc={application:{appName:"",appVersion:""}};function gc({authOptions:c,systemOptions:t,loggerOptions:r,cacheOptions:n,storageInterface:a,networkInterface:i,cryptoInterface:s,clientCredentials:l,libraryInfo:u,telemetry:g,serverTelemetryManager:v,persistencePlugin:w,serializableCache:E}){const R={...cc,...r};return{authOptions:fc(c),systemOptions:{...ni,...t},loggerOptions:R,cacheOptions:{...lc,...n},storageInterface:a||new ic(c.clientId,ir,new gt(R)),networkInterface:i||dc,cryptoInterface:s||ir,clientCredentials:l||hc,libraryInfo:{...uc,...u},telemetry:{...pc,...g},serverTelemetryManager:v||null,persistencePlugin:w||null,serializableCache:E||null}}function fc(c){return{clientCapabilities:[],azureCloudOptions:mc,skipAuthorityMetadataCache:!1,...c}}function hn(c){return c.authOptions.authority.options.protocolMode===st.OIDC}/*! @azure/msal-common v14.1.0 2023-10-05 */class ct extends he{constructor(t,r,n){super(t,r,n),this.name="ServerError",Object.setPrototypeOf(this,ct.prototype)}}/*! @azure/msal-common v14.1.0 2023-10-05 */class Ze{static generateThrottlingStorageKey(t){return`${lo.THROTTLING_PREFIX}.${JSON.stringify(t)}`}static preProcess(t,r){var i;const n=Ze.generateThrottlingStorageKey(r),a=t.getThrottlingCache(n);if(a){if(a.throttleTime<Date.now()){t.removeItem(n);return}throw new ct(((i=a.errorCodes)==null?void 0:i.join(" "))||b.EMPTY_STRING,a.errorMessage,a.subError)}}static postProcess(t,r,n){if(Ze.checkResponseStatus(n)||Ze.checkResponseForRetryAfter(n)){const a={throttleTime:Ze.calculateThrottleTime(parseInt(n.headers[ot.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};t.setThrottlingCache(Ze.generateThrottlingStorageKey(r),a)}}static checkResponseStatus(t){return t.status===429||t.status>=500&&t.status<600}static checkResponseForRetryAfter(t){return t.headers?t.headers.hasOwnProperty(ot.RETRY_AFTER)&&(t.status<200||t.status>=300):!1}static calculateThrottleTime(t){const r=t<=0?0:t,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||lo.DEFAULT_THROTTLE_TIME_SECONDS),n+lo.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(t,r,n,a){const i={clientId:r,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:a,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},s=this.generateThrottlingStorageKey(i);t.removeItem(s)}}/*! @azure/msal-common v14.1.0 2023-10-05 */class bc{constructor(t,r){this.networkClient=t,this.cacheManager=r}async sendPostRequest(t,r,n){Ze.preProcess(this.cacheManager,t);let a;try{a=await this.networkClient.sendPostRequestAsync(r,n)}catch(i){throw i instanceof he?i:I(zo)}return Ze.postProcess(this.cacheManager,t,a),a}}/*! @azure/msal-common v14.1.0 2023-10-05 */const Qe={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.1.0 2023-10-05 */class Ct{static validateRedirectUri(t){if(!t)throw ie(Ga)}static validatePrompt(t){const r=[];for(const n in Pe)r.push(Pe[n]);if(r.indexOf(t)<0)throw ie(ja)}static validateClaims(t){try{JSON.parse(t)}catch{throw ie(Nn)}}static validateCodeChallengeParams(t,r){if(!t||!r)throw ie(xn);this.validateCodeChallengeMethod(r)}static validateCodeChallengeMethod(t){if([pa.PLAIN,pa.S256].indexOf(t)<0)throw ie(Qa)}static sanitizeEQParams(t,r){return t?(r.forEach((n,a)=>{t[a]&&delete t[a]}),Object.fromEntries(Object.entries(t).filter(n=>n[1]!==""))):{}}}/*! @azure/msal-common v14.1.0 2023-10-05 */class uo{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(B.RESPONSE_TYPE,encodeURIComponent(b.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(B.RESPONSE_TYPE,encodeURIComponent(`${b.TOKEN_RESPONSE_TYPE} ${b.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(t){this.parameters.set(B.RESPONSE_MODE,encodeURIComponent(t||Xs.QUERY))}addNativeBroker(){this.parameters.set(B.NATIVE_BROKER,encodeURIComponent("1"))}addScopes(t,r=!0,n=So){r&&!n.includes("openid")&&!t.includes("openid")&&n.push("openid");const a=r?[...t||[],...n]:t||[],i=new ge(a);this.parameters.set(B.SCOPE,encodeURIComponent(i.printScopes()))}addClientId(t){this.parameters.set(B.CLIENT_ID,encodeURIComponent(t))}addRedirectUri(t){Ct.validateRedirectUri(t),this.parameters.set(B.REDIRECT_URI,encodeURIComponent(t))}addPostLogoutRedirectUri(t){Ct.validateRedirectUri(t),this.parameters.set(B.POST_LOGOUT_URI,encodeURIComponent(t))}addIdTokenHint(t){this.parameters.set(B.ID_TOKEN_HINT,encodeURIComponent(t))}addDomainHint(t){this.parameters.set(jr.DOMAIN_HINT,encodeURIComponent(t))}addLoginHint(t){this.parameters.set(jr.LOGIN_HINT,encodeURIComponent(t))}addCcsUpn(t){this.parameters.set(ot.CCS_HEADER,encodeURIComponent(`UPN:${t}`))}addCcsOid(t){this.parameters.set(ot.CCS_HEADER,encodeURIComponent(`Oid:${t.uid}@${t.utid}`))}addSid(t){this.parameters.set(jr.SID,encodeURIComponent(t))}addClaims(t,r){const n=this.addClientCapabilitiesToClaims(t,r);Ct.validateClaims(n),this.parameters.set(B.CLAIMS,encodeURIComponent(n))}addCorrelationId(t){this.parameters.set(B.CLIENT_REQUEST_ID,encodeURIComponent(t))}addLibraryInfo(t){this.parameters.set(B.X_CLIENT_SKU,t.sku),this.parameters.set(B.X_CLIENT_VER,t.version),t.os&&this.parameters.set(B.X_CLIENT_OS,t.os),t.cpu&&this.parameters.set(B.X_CLIENT_CPU,t.cpu)}addApplicationTelemetry(t){t!=null&&t.appName&&this.parameters.set(B.X_APP_NAME,t.appName),t!=null&&t.appVersion&&this.parameters.set(B.X_APP_VER,t.appVersion)}addPrompt(t){Ct.validatePrompt(t),this.parameters.set(`${B.PROMPT}`,encodeURIComponent(t))}addState(t){t&&this.parameters.set(B.STATE,encodeURIComponent(t))}addNonce(t){this.parameters.set(B.NONCE,encodeURIComponent(t))}addCodeChallengeParams(t,r){if(Ct.validateCodeChallengeParams(t,r),t&&r)this.parameters.set(B.CODE_CHALLENGE,encodeURIComponent(t)),this.parameters.set(B.CODE_CHALLENGE_METHOD,encodeURIComponent(r));else throw ie(xn)}addAuthorizationCode(t){this.parameters.set(B.CODE,encodeURIComponent(t))}addDeviceCode(t){this.parameters.set(B.DEVICE_CODE,encodeURIComponent(t))}addRefreshToken(t){this.parameters.set(B.REFRESH_TOKEN,encodeURIComponent(t))}addCodeVerifier(t){this.parameters.set(B.CODE_VERIFIER,encodeURIComponent(t))}addClientSecret(t){this.parameters.set(B.CLIENT_SECRET,encodeURIComponent(t))}addClientAssertion(t){t&&this.parameters.set(B.CLIENT_ASSERTION,encodeURIComponent(t))}addClientAssertionType(t){t&&this.parameters.set(B.CLIENT_ASSERTION_TYPE,encodeURIComponent(t))}addOboAssertion(t){this.parameters.set(B.OBO_ASSERTION,encodeURIComponent(t))}addRequestTokenUse(t){this.parameters.set(B.REQUESTED_TOKEN_USE,encodeURIComponent(t))}addGrantType(t){this.parameters.set(B.GRANT_TYPE,encodeURIComponent(t))}addClientInfo(){this.parameters.set(Zs,"1")}addExtraQueryParameters(t){const r=Ct.sanitizeEQParams(t,this.parameters);Object.keys(r).forEach(n=>{this.parameters.set(n,t[n])})}addClientCapabilitiesToClaims(t,r){let n;if(!t)n={};else try{n=JSON.parse(t)}catch{throw ie(Nn)}return r&&r.length>0&&(n.hasOwnProperty(Ho.ACCESS_TOKEN)||(n[Ho.ACCESS_TOKEN]={}),n[Ho.ACCESS_TOKEN][Ho.XMS_CC]={values:r}),JSON.stringify(n)}addUsername(t){this.parameters.set(fa.username,encodeURIComponent(t))}addPassword(t){this.parameters.set(fa.password,encodeURIComponent(t))}addPopToken(t){t&&(this.parameters.set(B.TOKEN_TYPE,ae.POP),this.parameters.set(B.REQ_CNF,encodeURIComponent(t)))}addSshJwk(t){t&&(this.parameters.set(B.TOKEN_TYPE,ae.SSH),this.parameters.set(B.REQ_CNF,encodeURIComponent(t)))}addServerTelemetry(t){this.parameters.set(B.X_CLIENT_CURR_TELEM,t.generateCurrentRequestHeaderValue()),this.parameters.set(B.X_CLIENT_LAST_TELEM,t.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(B.X_MS_LIB_CAPABILITY,lo.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(t){this.parameters.set(B.LOGOUT_HINT,encodeURIComponent(t))}createQueryString(){const t=new Array;return this.parameters.forEach((r,n)=>{t.push(`${n}=${r}`)}),t.join("&")}}/*! @azure/msal-common v14.1.0 2023-10-05 */const C={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",BaseClientExecutePostToTokenEndpoint:"baseClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponseFromHash:"handleCodeResponseFromHash",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromiseMeasurement",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},vc={NotStarted:0,InProgress:1,Completed:2};/*! @azure/msal-common v14.1.0 2023-10-05 */class Ln{constructor(t,r){this.config=gc(t),this.logger=new gt(this.config.loggerOptions,Ya,Rn),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new bc(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(t){const r={};if(r[ot.CONTENT_TYPE]=b.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&t)switch(t.type){case Qe.HOME_ACCOUNT_ID:try{const n=Ut(t.credential);r[ot.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Qe.UPN:r[ot.CCS_HEADER]=`UPN: ${t.credential}`;break}return r}async executePostToTokenEndpoint(t,r,n,a,i){var l,u,g,v;(l=this.performanceClient)==null||l.addQueueMeasurement(C.BaseClientExecutePostToTokenEndpoint,i);const s=await this.networkManager.sendPostRequest(a,t,{body:r,headers:n});return(v=this.performanceClient)==null||v.addFields({refreshTokenSize:((u=s.body.refresh_token)==null?void 0:u.length)||0,httpVerToken:((g=s.headers)==null?void 0:g[ot.X_MS_HTTP_VERSION])||""},i),this.config.serverTelemetryManager&&s.status<500&&s.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),s}updateAuthority(t){if(!t.discoveryComplete())throw I(Ke);this.authority=t}createTokenQueryParameters(t){const r=new uo;return t.tokenQueryParameters&&r.addExtraQueryParameters(t.tokenQueryParameters),r.createQueryString()}}/*! @azure/msal-common v14.1.0 2023-10-05 */class ut{generateAccountId(){return ut.generateAccountIdForCacheKey(this.homeAccountId,this.environment)}generateCredentialId(){return ut.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)}generateTarget(){return ut.generateTargetForCacheKey(this.target)}generateCredentialKey(){return ut.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId,this.tokenType,this.requestedClaimsHash)}generateType(){switch(this.credentialType){case F.ID_TOKEN:return Vr.ID_TOKEN;case F.ACCESS_TOKEN:case F.ACCESS_TOKEN_WITH_AUTH_SCHEME:return Vr.ACCESS_TOKEN;case F.REFRESH_TOKEN:return Vr.REFRESH_TOKEN;default:throw I(Bt)}}static generateCredentialCacheKey(t,r,n,a,i,s,l,u,g){return[this.generateAccountIdForCacheKey(t,r),this.generateCredentialIdForCacheKey(n,a,i,l),this.generateTargetForCacheKey(s),this.generateClaimsHashForCacheKey(g),this.generateSchemeForCacheKey(u)].join(ke.CACHE_KEY_SEPARATOR).toLowerCase()}static generateAccountIdForCacheKey(t,r){return[t,r].join(ke.CACHE_KEY_SEPARATOR).toLowerCase()}static generateCredentialIdForCacheKey(t,r,n,a){const i=t===F.REFRESH_TOKEN&&a||r;return[t,i,n||b.EMPTY_STRING].join(ke.CACHE_KEY_SEPARATOR).toLowerCase()}static generateTargetForCacheKey(t){return(t||b.EMPTY_STRING).toLowerCase()}static generateClaimsHashForCacheKey(t){return(t||b.EMPTY_STRING).toLowerCase()}static generateSchemeForCacheKey(t){return t&&t.toLowerCase()!==ae.BEARER.toLowerCase()?t.toLowerCase():b.EMPTY_STRING}}/*! @azure/msal-common v14.1.0 2023-10-05 */class et extends ut{static createIdTokenEntity(t,r,n,a,i){const s=new et;return s.credentialType=F.ID_TOKEN,s.homeAccountId=t,s.environment=r,s.clientId=a,s.secret=n,s.realm=i,s}static isIdTokenEntity(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t.credentialType===F.ID_TOKEN:!1}}/*! @azure/msal-common v14.1.0 2023-10-05 */class xe{static nowSeconds(){return Math.round(new Date().getTime()/1e3)}static isTokenExpired(t,r){const n=Number(t)||0;return xe.nowSeconds()+r>n}static wasClockTurnedBack(t){return Number(t)>xe.nowSeconds()}static delay(t,r){return new Promise(n=>setTimeout(()=>n(r),t))}}/*! @azure/msal-common v14.1.0 2023-10-05 */class tt extends ut{static createAccessTokenEntity(t,r,n,a,i,s,l,u,g,v,w,E,R,D,O){var le,te;const x=new tt;x.homeAccountId=t,x.credentialType=F.ACCESS_TOKEN,x.secret=n;const Z=xe.nowSeconds();if(x.cachedAt=Z.toString(),x.expiresOn=l.toString(),x.extendedExpiresOn=u.toString(),v&&(x.refreshOn=v.toString()),x.environment=r,x.clientId=a,x.realm=i,x.target=s,x.userAssertionHash=E,x.tokenType=w||ae.BEARER,D&&(x.requestedClaims=D,x.requestedClaimsHash=O),((le=x.tokenType)==null?void 0:le.toLowerCase())!==ae.BEARER.toLowerCase())switch(x.credentialType=F.ACCESS_TOKEN_WITH_AUTH_SCHEME,x.tokenType){case ae.POP:const K=ft(n,g.base64Decode);if(!((te=K==null?void 0:K.cnf)!=null&&te.kid))throw I(or);x.keyId=K.cnf.kid;break;case ae.SSH:x.keyId=R}return x}static isAccessTokenEntity(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t.hasOwnProperty("target")&&(t.credentialType===F.ACCESS_TOKEN||t.credentialType===F.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}}/*! @azure/msal-common v14.1.0 2023-10-05 */class ht extends ut{static createRefreshTokenEntity(t,r,n,a,i,s){const l=new ht;return l.clientId=a,l.credentialType=F.REFRESH_TOKEN,l.environment=r,l.homeAccountId=t,l.secret=n,l.userAssertionHash=s,i&&(l.familyId=i),l}static isRefreshTokenEntity(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t.credentialType===F.REFRESH_TOKEN:!1}}/*! @azure/msal-common v14.1.0 2023-10-05 */const Io="no_tokens_found",cr="native_account_unavailable",yc="interaction_required",Cc="consent_required",Tc="login_required";/*! @azure/msal-common v14.1.0 2023-10-05 */const ba=[yc,Cc,Tc],wc=["message_only","additional_action","basic_action","user_password_expired","consent_required"],mn={[Io]:"No refresh token found in the cache. Please sign-in.",[cr]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API."};mn[Io],mn[cr];class nt extends he{constructor(t,r,n,a,i,s,l){super(t,r,n),Object.setPrototypeOf(this,nt.prototype),this.timestamp=a||b.EMPTY_STRING,this.traceId=i||b.EMPTY_STRING,this.correlationId=s||b.EMPTY_STRING,this.claims=l||b.EMPTY_STRING,this.name="InteractionRequiredAuthError"}}function va(c,t,r){const n=!!c&&ba.indexOf(c)>-1,a=!!r&&wc.indexOf(r)>-1,i=!!t&&ba.some(s=>t.indexOf(s)>-1);return n||i||a}function ai(c){return new nt(c,mn[c])}/*! @azure/msal-common v14.1.0 2023-10-05 */class Ft{constructor(t,r,n,a,i){this.account=t||null,this.idToken=r||null,this.accessToken=n||null,this.refreshToken=a||null,this.appMetadata=i||null}}/*! @azure/msal-common v14.1.0 2023-10-05 */class We{static setRequestState(t,r,n){const a=We.generateLibraryState(t,n);return r?`${a}${b.RESOURCE_DELIM}${r}`:a}static generateLibraryState(t,r){if(!t)throw I(_o);const n={id:t.createNewGuid()};r&&(n.meta=r);const a=JSON.stringify(n);return t.base64Encode(a)}static parseRequestState(t,r){if(!t)throw I(_o);if(!r)throw I(mt);try{const n=r.split(b.RESOURCE_DELIM),a=n[0],i=n.length>1?n.slice(1).join(b.RESOURCE_DELIM):b.EMPTY_STRING,s=t.base64Decode(a),l=JSON.parse(s);return{userRequestState:i||b.EMPTY_STRING,libraryState:l}}catch{throw I(mt)}}}/*! @azure/msal-common v14.1.0 2023-10-05 */class q{get urlString(){return this._urlString}constructor(t){if(this._urlString=t,!this._urlString)throw ie(Pn);this.getHash()||(this._urlString=q.canonicalizeUri(t))}static canonicalizeUri(t){if(t){let r=t.toLowerCase();return He.endsWith(r,"?")?r=r.slice(0,-1):He.endsWith(r,"?/")&&(r=r.slice(0,-2)),He.endsWith(r,"/")||(r+="/"),r}return t}validateAsUri(){let t;try{t=this.getUrlComponents()}catch{throw ie(oo)}if(!t.HostNameAndPort||!t.PathSegments)throw ie(oo);if(!t.Protocol||t.Protocol.toLowerCase()!=="https:")throw ie(za)}static appendQueryString(t,r){return r?t.indexOf("?")<0?`${t}?${r}`:`${t}&${r}`:t}static removeHashFromUrl(t){return q.canonicalizeUri(t.split("#")[0])}replaceTenantPath(t){const r=this.getUrlComponents(),n=r.PathSegments;return t&&n.length!==0&&(n[0]===io.COMMON||n[0]===io.ORGANIZATIONS)&&(n[0]=t),q.constructAuthorityUriFromObject(r)}getHash(){return q.parseHash(this.urlString)}getUrlComponents(){const t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(t);if(!r)throw ie(oo);const n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]};let a=n.AbsolutePath.split("/");return a=a.filter(i=>i&&i.length>0),n.PathSegments=a,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(t){const r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=t.match(r);if(!n)throw ie(oo);return n[2]}static getAbsoluteUrl(t,r){if(t[0]===b.FORWARD_SLASH){const a=new q(r).getUrlComponents();return a.Protocol+"//"+a.HostNameAndPort+t}return t}static parseHash(t){const r=t.indexOf("#"),n=t.indexOf("#/");return n>-1?t.substring(n+2):r>-1?t.substring(r+1):b.EMPTY_STRING}static parseQueryString(t){const r=t.indexOf("?"),n=t.indexOf("/?");return n>-1?t.substring(n+2):r>-1?t.substring(r+1):b.EMPTY_STRING}static parseQueryServerResponse(t){const r=t.indexOf("?code"),n=t.indexOf("/?code"),a=t.indexOf("#");return n>-1&&a>-1?t.substring(n+2,a):n>-1?t.substring(n+2):r>-1&&a>-1?t.substring(r+1,a):r>-1?t.substring(r+1):b.EMPTY_STRING}static constructAuthorityUriFromObject(t){return new q(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))}static getDeserializedHash(t){if(!t)return{};const r=q.parseHash(t),n=He.queryStringToObject(r||t);if(!n)throw I(bo);return n}static getDeserializedQueryString(t){if(!t)return{};const r=q.parseQueryString(t),n=He.queryStringToObject(r||t);if(!n)throw I(bo);return n}static getDeserializedCodeResponse(t,r){const n=new q(r);let a;return t===ko.QUERY?a=q.getDeserializedQueryString(r):a=q.getDeserializedHash(n.getHash()),a}static hashContainsKnownProperties(t){if(!t||t.indexOf("=")<0)return!1;const r=q.getDeserializedHash(t);return!!(r.code||r.error_description||r.error||r.state)}}/*! @azure/msal-common v14.1.0 2023-10-05 */const ii=(c,t,r,n,a)=>(...i)=>{r.trace(`Executing function ${t}`);const s=n==null?void 0:n.startMeasurement(t,a);try{const l=c(...i);return s==null||s.end({success:!0}),r.trace(`Returning result from ${t}`),l}catch(l){r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(l))}catch{r.trace("Unable to print error message.")}throw s==null||s.end({success:!1}),l}},N=(c,t,r,n,a)=>(...i)=>{r.trace(`Executing function ${t}`);const s=n==null?void 0:n.startMeasurement(t,a);return n==null||n.setPreQueueTime(t,a),c(...i).then(l=>(r.trace(`Returning result from ${t}`),s==null||s.end({success:!0}),l)).catch(l=>{r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(l))}catch{r.trace("Unable to print error message.")}throw s==null||s.end({success:!1}),l})};/*! @azure/msal-common v14.1.0 2023-10-05 */const _c={SW:"sw",UHW:"uhw"};class Yt{constructor(t,r){this.cryptoUtils=t,this.performanceClient=r}async generateCnf(t,r){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(C.PopTokenGenerateCnf,t.correlationId);const n=await N(this.generateKid.bind(this),C.PopTokenGenerateCnf,r,this.performanceClient,t.correlationId)(t),a=this.cryptoUtils.base64Encode(JSON.stringify(n));return{kid:n.kid,reqCnfString:a,reqCnfHash:await this.cryptoUtils.hashString(a)}}async generateKid(t){var n;return(n=this.performanceClient)==null||n.addQueueMeasurement(C.PopTokenGenerateKid,t.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(t),xms_ksl:_c.SW}}async signPopToken(t,r,n){return this.signPayload(t,r,n)}async signPayload(t,r,n,a){const{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:l,shrNonce:u}=n,g=s?new q(s):void 0,v=g==null?void 0:g.getUrlComponents();return await this.cryptoUtils.signJwt({at:t,ts:xe.nowSeconds(),m:i==null?void 0:i.toUpperCase(),u:v==null?void 0:v.HostNameAndPort,nonce:u||this.cryptoUtils.createNewGuid(),p:v==null?void 0:v.AbsolutePath,q:v!=null&&v.QueryString?[[],v.QueryString]:void 0,client_claims:l||void 0,...a},r,n.correlationId)}}/*! @azure/msal-common v14.1.0 2023-10-05 */class Gt{generateAppMetadataKey(){return Gt.generateAppMetadataCacheKey(this.environment,this.clientId)}static generateAppMetadataCacheKey(t,r){return[Zr,t,r].join(ke.CACHE_KEY_SEPARATOR).toLowerCase()}static createAppMetadataEntity(t,r,n){const a=new Gt;return a.clientId=t,a.environment=r,n&&(a.familyId=n),a}static isAppMetadataEntity(t,r){return r?t.indexOf(Zr)===0&&r.hasOwnProperty("clientId")&&r.hasOwnProperty("environment"):!1}}/*! @azure/msal-common v14.1.0 2023-10-05 */class Ac{constructor(t,r){this.cache=t,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.1.0 2023-10-05 */class It{constructor(t,r,n,a,i,s,l){this.clientId=t,this.cacheStorage=r,this.cryptoObj=n,this.logger=a,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=l}validateServerAuthorizationCodeResponse(t,r,n){if(!t.state||!r)throw t.state?I(pt,"Cached State"):I(pt,"Server State");let a,i;try{a=decodeURIComponent(t.state)}catch{throw I(mt,t.state)}try{i=decodeURIComponent(r)}catch{throw I(mt,t.state)}if(a!==i)throw I(jo);if(t.error||t.error_description||t.suberror)throw va(t.error,t.error_description,t.suberror)?new nt(t.error||b.EMPTY_STRING,t.error_description,t.suberror,t.timestamp||b.EMPTY_STRING,t.trace_id||b.EMPTY_STRING,t.correlation_id||b.EMPTY_STRING,t.claims||b.EMPTY_STRING):new ct(t.error||b.EMPTY_STRING,t.error_description,t.suberror);t.client_info&&sr(t.client_info,n)}validateTokenResponse(t,r){if(t.error||t.error_description||t.suberror){const n=`${t.error_codes} - [${t.timestamp}]: ${t.error_description} - Correlation ID: ${t.correlation_id} - Trace ID: ${t.trace_id}`,a=new ct(t.error,n,t.suberror);if(r&&t.status&&t.status>=Lo.SERVER_ERROR_RANGE_START&&t.status<=Lo.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${a}`);return}else if(r&&t.status&&t.status>=Lo.CLIENT_ERROR_RANGE_START&&t.status<=Lo.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${a}`);return}throw va(t.error,t.error_description,t.suberror)?new nt(t.error,t.error_description,t.suberror,t.timestamp||b.EMPTY_STRING,t.trace_id||b.EMPTY_STRING,t.correlation_id||b.EMPTY_STRING,t.claims||b.EMPTY_STRING):a}}async handleServerTokenResponse(t,r,n,a,i,s,l,u,g){var D;(D=this.performanceClient)==null||D.addQueueMeasurement(C.HandleServerTokenResponse,t.correlation_id);let v;if(t.id_token){if(v=ft(t.id_token||b.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&v.nonce!==i.nonce)throw I(Vo);if(a.maxAge||a.maxAge===0){const O=v.auth_time;if(!O)throw I(vo);ri(O,a.maxAge)}}this.homeAccountIdentifier=fe.generateHomeAccountId(t.client_info||b.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,v);let w;!!i&&!!i.state&&(w=We.parseRequestState(this.cryptoObj,i.state)),t.key_id=t.key_id||a.sshKid||void 0;const E=this.generateCacheRecord(t,r,n,a,v,s,i);let R;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),R=new Ac(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(R)),l&&!u&&E.account){const O=E.account.generateAccountKey();if(!this.cacheStorage.getAccount(O))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),It.generateAuthenticationResult(this.cryptoObj,r,E,!1,a,v,w,void 0,g)}await this.cacheStorage.saveCacheRecord(E,a.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&R&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(R))}return It.generateAuthenticationResult(this.cryptoObj,r,E,!1,a,v,w,t,g)}generateCacheRecord(t,r,n,a,i,s,l){const u=r.getPreferredCache();if(!u)throw I(To);let g,v;t.id_token&&!!i&&(g=et.createIdTokenEntity(this.homeAccountIdentifier,u,t.id_token,this.clientId,i.tid||""),v=fe.createAccount({homeAccountId:this.homeAccountIdentifier,idTokenClaims:i,clientInfo:t.client_info,cloudGraphHostName:l==null?void 0:l.cloud_graph_host_name,msGraphHost:l==null?void 0:l.msgraph_host},r));let w=null;if(t.access_token){const D=t.scope?ge.fromString(t.scope):new ge(a.scopes||[]),O=(typeof t.expires_in=="string"?parseInt(t.expires_in,10):t.expires_in)||0,x=(typeof t.ext_expires_in=="string"?parseInt(t.ext_expires_in,10):t.ext_expires_in)||0,Z=(typeof t.refresh_in=="string"?parseInt(t.refresh_in,10):t.refresh_in)||void 0,le=n+O,te=le+x,K=Z&&Z>0?n+Z:void 0;w=tt.createAccessTokenEntity(this.homeAccountIdentifier,u,t.access_token||b.EMPTY_STRING,this.clientId,(i==null?void 0:i.tid)||r.tenant,D.printScopes(),le,te,this.cryptoObj,K,t.token_type,s,t.key_id,a.claims,a.requestedClaimsHash)}let E=null;t.refresh_token&&(E=ht.createRefreshTokenEntity(this.homeAccountIdentifier,u,t.refresh_token||b.EMPTY_STRING,this.clientId,t.foci,s));let R=null;return t.foci&&(R=Gt.createAppMetadataEntity(this.clientId,u,t.foci)),new Ft(v,g,w,E,R)}static async generateAuthenticationResult(t,r,n,a,i,s,l,u,g){var le,te,K,oe;let v=b.EMPTY_STRING,w=[],E=null,R,D,O=b.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===ae.POP){const j=new Yt(t),{secret:de,keyId:ee}=n.accessToken;if(!ee)throw I(Ao);v=await j.signPopToken(de,ee,i)}else v=n.accessToken.secret;w=ge.fromString(n.accessToken.target).asArray(),E=new Date(Number(n.accessToken.expiresOn)*1e3),R=new Date(Number(n.accessToken.extendedExpiresOn)*1e3),n.accessToken.refreshOn&&(D=new Date(Number(n.accessToken.refreshOn)*1e3))}n.appMetadata&&(O=n.appMetadata.familyId===so?so:"");const x=(s==null?void 0:s.oid)||(s==null?void 0:s.sub)||"",Z=(s==null?void 0:s.tid)||"";return(u==null?void 0:u.spa_accountid)&&!!n.account&&(n.account.nativeAccountId=u==null?void 0:u.spa_accountid),{authority:r.canonicalAuthority,uniqueId:x,tenantId:Z,scopes:w,account:n.account?n.account.getAccountInfo():null,idToken:((le=n==null?void 0:n.idToken)==null?void 0:le.secret)||"",idTokenClaims:s||{},accessToken:v,fromCache:a,expiresOn:E,extExpiresOn:R,refreshOn:D,correlationId:i.correlationId,requestId:g||b.EMPTY_STRING,familyId:O,tokenType:((te=n.accessToken)==null?void 0:te.tokenType)||b.EMPTY_STRING,state:l?l.userRequestState:b.EMPTY_STRING,cloudGraphHostName:((K=n.account)==null?void 0:K.cloudGraphHostName)||b.EMPTY_STRING,msGraphHost:((oe=n.account)==null?void 0:oe.msGraphHost)||b.EMPTY_STRING,code:u==null?void 0:u.spa_code,fromNativeBroker:!1}}}/*! @azure/msal-common v14.1.0 2023-10-05 */class si extends Ln{constructor(t,r){var n;super(t,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=(n=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:n.defaultScopes}async getAuthCodeUrl(t){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(C.GetAuthCodeUrl,t.correlationId);const r=await N(this.createAuthCodeUrlQueryString.bind(this),C.AuthClientCreateQueryString,this.logger,this.performanceClient,t.correlationId)(t);return q.appendQueryString(this.authority.authorizationEndpoint,r)}async acquireToken(t,r){var l,u;if((l=this.performanceClient)==null||l.addQueueMeasurement(C.AuthClientAcquireToken,t.correlationId),!t.code)throw I(Xo);const n=xe.nowSeconds(),a=await N(this.executeTokenRequest.bind(this),C.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,t.correlationId)(this.authority,t),i=(u=a.headers)==null?void 0:u[ot.X_MS_REQUEST_ID],s=new It(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(a.body),N(s.handleServerTokenResponse.bind(s),C.HandleServerTokenResponse,this.logger,this.performanceClient,t.correlationId)(a.body,this.authority,n,t,r,void 0,void 0,void 0,i)}handleFragmentResponse(t,r){var i;const n=new It(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null),a=q.getDeserializedCodeResponse((i=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:i.serverResponseType,t);if(n.validateServerAuthorizationCodeResponse(a,r,this.cryptoUtils),!a.code)throw I(rr);return{...a,code:a.code}}getLogoutUri(t){if(!t)throw ie(Va);const r=this.createLogoutUrlQueryString(t);return q.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(t,r){var g,v;(g=this.performanceClient)==null||g.addQueueMeasurement(C.AuthClientExecuteTokenRequest,r.correlationId);const n=this.createTokenQueryParameters(r),a=q.appendQueryString(t.tokenEndpoint,n),i=await N(this.createTokenRequestBody.bind(this),C.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r);let s;if(r.clientInfo)try{const w=sr(r.clientInfo,this.cryptoUtils);s={credential:`${w.uid}${ke.CLIENT_INFO_SEPARATOR}${w.utid}`,type:Qe.HOME_ACCOUNT_ID}}catch(w){this.logger.verbose("Could not parse client info for CCS Header: "+w)}const l=this.createTokenRequestHeaders(s||r.ccsCredential),u={clientId:((v=r.tokenBodyParameters)==null?void 0:v.clientId)||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return N(this.executePostToTokenEndpoint.bind(this),C.BaseClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(a,i,l,u,r.correlationId)}async createTokenRequestBody(t){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(C.AuthClientCreateTokenRequestBody,t.correlationId);const r=new uo;if(r.addClientId(((s=t.tokenBodyParameters)==null?void 0:s[B.CLIENT_ID])||this.config.authOptions.clientId),this.includeRedirectUri?r.addRedirectUri(t.redirectUri):Ct.validateRedirectUri(t.redirectUri),r.addScopes(t.scopes,!0,this.oidcDefaultScopes),r.addAuthorizationCode(t.code),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!hn(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),t.codeVerifier&&r.addCodeVerifier(t.codeVerifier),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const l=this.config.clientCredentials.clientAssertion;r.addClientAssertion(l.assertion),r.addClientAssertionType(l.assertionType)}if(r.addGrantType(Ka.AUTHORIZATION_CODE_GRANT),r.addClientInfo(),t.authenticationScheme===ae.POP){const l=new Yt(this.cryptoUtils,this.performanceClient),u=await N(l.generateCnf.bind(l),C.PopTokenGenerateCnf,this.logger,this.performanceClient,t.correlationId)(t,this.logger);r.addPopToken(u.reqCnfString)}else if(t.authenticationScheme===ae.SSH)if(t.sshJwk)r.addSshJwk(t.sshJwk);else throw ie(wr);const n=t.correlationId||this.config.cryptoInterface.createNewGuid();r.addCorrelationId(n),(!He.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(t.claims,this.config.authOptions.clientCapabilities);let a;if(t.clientInfo)try{const l=sr(t.clientInfo,this.cryptoUtils);a={credential:`${l.uid}${ke.CLIENT_INFO_SEPARATOR}${l.utid}`,type:Qe.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}else a=t.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&a)switch(a.type){case Qe.HOME_ACCOUNT_ID:try{const l=Ut(a.credential);r.addCcsOid(l)}catch(l){this.logger.verbose("Could not parse home account ID for CCS Header: "+l)}break;case Qe.UPN:r.addCcsUpn(a.credential);break}return t.tokenBodyParameters&&r.addExtraQueryParameters(t.tokenBodyParameters),t.enableSpaAuthorizationCode&&(!t.tokenBodyParameters||!t.tokenBodyParameters[B.RETURN_SPA_CODE])&&r.addExtraQueryParameters({[B.RETURN_SPA_CODE]:"1"}),r.createQueryString()}async createAuthCodeUrlQueryString(t){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(C.AuthClientCreateQueryString,t.correlationId);const r=new uo;r.addClientId(((s=t.extraQueryParameters)==null?void 0:s[B.CLIENT_ID])||this.config.authOptions.clientId);const n=[...t.scopes||[],...t.extraScopesToConsent||[]];r.addScopes(n,!0,this.oidcDefaultScopes),r.addRedirectUri(t.redirectUri);const a=t.correlationId||this.config.cryptoInterface.createNewGuid();if(r.addCorrelationId(a),r.addResponseMode(t.responseMode),r.addResponseTypeCode(),r.addLibraryInfo(this.config.libraryInfo),hn(this.config)||r.addApplicationTelemetry(this.config.telemetry.application),r.addClientInfo(),t.codeChallenge&&t.codeChallengeMethod&&r.addCodeChallengeParams(t.codeChallenge,t.codeChallengeMethod),t.prompt&&r.addPrompt(t.prompt),t.domainHint&&r.addDomainHint(t.domainHint),t.prompt!==Pe.SELECT_ACCOUNT)if(t.sid&&t.prompt===Pe.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),r.addSid(t.sid);else if(t.account){const l=this.extractAccountSid(t.account),u=this.extractLoginHint(t.account);if(u){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),r.addLoginHint(u);try{const g=Ut(t.account.homeAccountId);r.addCcsOid(g)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(l&&t.prompt===Pe.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),r.addSid(l);try{const g=Ut(t.account.homeAccountId);r.addCcsOid(g)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),r.addLoginHint(t.loginHint),r.addCcsUpn(t.loginHint);else if(t.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),r.addLoginHint(t.account.username);try{const g=Ut(t.account.homeAccountId);r.addCcsOid(g)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),r.addLoginHint(t.loginHint),r.addCcsUpn(t.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(t.nonce&&r.addNonce(t.nonce),t.state&&r.addState(t.state),(t.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(t.claims,this.config.authOptions.clientCapabilities),t.extraQueryParameters&&r.addExtraQueryParameters(t.extraQueryParameters),t.nativeBroker&&(r.addNativeBroker(),t.authenticationScheme===ae.POP)){const l=new Yt(this.cryptoUtils),u=await N(l.generateCnf.bind(l),C.PopTokenGenerateCnf,this.logger,this.performanceClient,t.correlationId)(t,this.logger);r.addPopToken(u.reqCnfHash)}return r.createQueryString()}createLogoutUrlQueryString(t){const r=new uo;return t.postLogoutRedirectUri&&r.addPostLogoutRedirectUri(t.postLogoutRedirectUri),t.correlationId&&r.addCorrelationId(t.correlationId),t.idTokenHint&&r.addIdTokenHint(t.idTokenHint),t.state&&r.addState(t.state),t.logoutHint&&r.addLogoutHint(t.logoutHint),t.extraQueryParameters&&r.addExtraQueryParameters(t.extraQueryParameters),r.createQueryString()}extractAccountSid(t){var r;return((r=t.idTokenClaims)==null?void 0:r.sid)||null}extractLoginHint(t){var r;return((r=t.idTokenClaims)==null?void 0:r.login_hint)||null}}/*! @azure/msal-common v14.1.0 2023-10-05 */class pn extends Ln{constructor(t,r){super(t,r)}async acquireToken(t){var s,l;(s=this.performanceClient)==null||s.addQueueMeasurement(C.RefreshTokenClientAcquireToken,t.correlationId);const r=xe.nowSeconds(),n=await N(this.executeTokenRequest.bind(this),C.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,t.correlationId)(t,this.authority),a=(l=n.headers)==null?void 0:l[ot.X_MS_REQUEST_ID],i=new It(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),N(i.handleServerTokenResponse.bind(i),C.HandleServerTokenResponse,this.logger,this.performanceClient,t.correlationId)(n.body,this.authority,r,t,void 0,void 0,!0,t.forceCache,a)}async acquireTokenByRefreshToken(t){var n;if(!t)throw ie(On);if((n=this.performanceClient)==null||n.addQueueMeasurement(C.RefreshTokenClientAcquireTokenByRefreshToken,t.correlationId),!t.account)throw I(Co);if(this.cacheManager.isAppMetadataFOCI(t.account.environment))try{return N(this.acquireTokenWithCachedRefreshToken.bind(this),C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!0)}catch(a){const i=a instanceof nt&&a.errorCode===Io,s=a instanceof ct&&a.errorCode===ga.INVALID_GRANT_ERROR&&a.subError===ga.CLIENT_MISMATCH_ERROR;if(i||s)return N(this.acquireTokenWithCachedRefreshToken.bind(this),C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!1);throw a}return N(this.acquireTokenWithCachedRefreshToken.bind(this),C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,t.correlationId)(t,!1)}async acquireTokenWithCachedRefreshToken(t,r){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(C.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.correlationId);const n=this.cacheManager.getRefreshToken(t.account,r);if(!n)throw ai(Io);const a={...t,refreshToken:n.secret,authenticationScheme:t.authenticationScheme||ae.BEARER,ccsCredential:{credential:t.account.homeAccountId,type:Qe.HOME_ACCOUNT_ID}};return N(this.acquireToken.bind(this),C.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(a)}async executeTokenRequest(t,r){var u,g;(u=this.performanceClient)==null||u.addQueueMeasurement(C.RefreshTokenClientExecuteTokenRequest,t.correlationId);const n=this.createTokenQueryParameters(t),a=q.appendQueryString(r.tokenEndpoint,n),i=await N(this.createTokenRequestBody.bind(this),C.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s=this.createTokenRequestHeaders(t.ccsCredential),l={clientId:((g=t.tokenBodyParameters)==null?void 0:g.clientId)||this.config.authOptions.clientId,authority:r.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return N(this.executePostToTokenEndpoint.bind(this),C.BaseClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(a,i,s,l,t.correlationId)}async createTokenRequestBody(t){var a,i,s;(a=this.performanceClient)==null||a.addQueueMeasurement(C.RefreshTokenClientCreateTokenRequestBody,t.correlationId);const r=t.correlationId,n=new uo;if(n.addClientId(((i=t.tokenBodyParameters)==null?void 0:i[B.CLIENT_ID])||this.config.authOptions.clientId),t.redirectUri&&n.addRedirectUri(t.redirectUri),n.addScopes(t.scopes,!0,(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes),n.addGrantType(Ka.REFRESH_TOKEN_GRANT),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!hn(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),n.addCorrelationId(r),n.addRefreshToken(t.refreshToken),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const l=this.config.clientCredentials.clientAssertion;n.addClientAssertion(l.assertion),n.addClientAssertionType(l.assertionType)}if(t.authenticationScheme===ae.POP){const l=new Yt(this.cryptoUtils,this.performanceClient),u=await N(l.generateCnf.bind(l),C.PopTokenGenerateCnf,this.logger,this.performanceClient,t.correlationId)(t,this.logger);n.addPopToken(u.reqCnfString)}else if(t.authenticationScheme===ae.SSH)if(t.sshJwk)n.addSshJwk(t.sshJwk);else throw ie(wr);if((!He.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&t.ccsCredential)switch(t.ccsCredential.type){case Qe.HOME_ACCOUNT_ID:try{const l=Ut(t.ccsCredential.credential);n.addCcsOid(l)}catch(l){this.logger.verbose("Could not parse home account ID for CCS Header: "+l)}break;case Qe.UPN:n.addCcsUpn(t.ccsCredential.credential);break}return t.tokenBodyParameters&&n.addExtraQueryParameters(t.tokenBodyParameters),n.createQueryString()}}/*! @azure/msal-common v14.1.0 2023-10-05 */class Ic extends Ln{constructor(t,r){super(t,r)}async acquireToken(t){try{const[r,n]=await this.acquireCachedToken(t);return n===qe.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new pn(this.config,this.performanceClient).acquireTokenByRefreshToken(t).catch(()=>{})),r}catch(r){if(r instanceof Tr&&r.errorCode===Xe)return new pn(this.config,this.performanceClient).acquireTokenByRefreshToken(t);throw r}}async acquireCachedToken(t){var i,s,l,u;let r=qe.NOT_APPLICABLE;if(!t)throw ie(On);if(t.forceRefresh)throw r=qe.FORCE_REFRESH_OR_CLAIMS,(i=this.serverTelemetryManager)==null||i.setCacheOutcome(qe.FORCE_REFRESH_OR_CLAIMS),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because forceRefresh is true."),I(Xe);if(!this.config.cacheOptions.claimsBasedCachingEnabled&&!He.isEmptyObj(t.claims))throw r=qe.FORCE_REFRESH_OR_CLAIMS,this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because claims-based caching is disabled and claims were requested."),I(Xe);if(!t.account)throw I(Co);const n=t.authority||this.authority.getPreferredCache(),a=this.cacheManager.readCacheRecord(t.account,t,n);if(a.accessToken){if(xe.wasClockTurnedBack(a.accessToken.cachedAt)||xe.isTokenExpired(a.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw r=qe.CACHED_ACCESS_TOKEN_EXPIRED,(l=this.serverTelemetryManager)==null||l.setCacheOutcome(qe.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`SilentFlowClient:acquireCachedToken - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),I(Xe);a.accessToken.refreshOn&&xe.isTokenExpired(a.accessToken.refreshOn,0)&&(r=qe.PROACTIVELY_REFRESHED,(u=this.serverTelemetryManager)==null||u.setCacheOutcome(qe.PROACTIVELY_REFRESHED),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'."))}else throw r=qe.NO_CACHED_ACCESS_TOKEN,(s=this.serverTelemetryManager)==null||s.setCacheOutcome(qe.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),I(Xe);return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await this.generateResultFromCacheRecord(a,t),r]}async generateResultFromCacheRecord(t,r){let n;if(t.idToken&&(n=ft(t.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){const a=n==null?void 0:n.auth_time;if(!a)throw I(vo);ri(a,r.maxAge)}return await It.generateAuthenticationResult(this.cryptoUtils,this.authority,t,!0,r,n)}}/*! @azure/msal-common v14.1.0 2023-10-05 */function Ec(c){return c.hasOwnProperty("authorization_endpoint")&&c.hasOwnProperty("token_endpoint")&&c.hasOwnProperty("issuer")&&c.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.1.0 2023-10-05 */const ci={endpointMetadata:{"https://login.microsoftonline.com/common/":{token_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/common/":{token_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/common/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/common/":{token_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/consumers/":{token_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/consumers/":{token_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/consumers/":{token_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/organizations/":{token_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/organizations/":{token_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/organizations/":{token_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"}},instanceDiscoveryMetadata:{"https://login.microsoftonline.com/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/common/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/consumers/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/organizations/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}}},ya=ci.endpointMetadata,lr=ci.instanceDiscoveryMetadata,li=new Set;for(const c in lr)for(const t of lr[c].metadata)for(const r of t.aliases)li.add(r);/*! @azure/msal-common v14.1.0 2023-10-05 */class gn{constructor(){this.expiresAt=xe.nowSeconds()+co.REFRESH_TIME_SECONDS}updateCloudDiscoveryMetadata(t,r){this.aliases=t.aliases,this.preferred_cache=t.preferred_cache,this.preferred_network=t.preferred_network,this.aliasesFromNetwork=r}updateEndpointMetadata(t,r){this.authorization_endpoint=t.authorization_endpoint,this.token_endpoint=t.token_endpoint,this.end_session_endpoint=t.end_session_endpoint,this.issuer=t.issuer,this.endpointsFromNetwork=r,this.jwks_uri=t.jwks_uri}updateCanonicalAuthority(t){this.canonical_authority=t}resetExpiresAt(){this.expiresAt=xe.nowSeconds()+co.REFRESH_TIME_SECONDS}isExpired(){return this.expiresAt<=xe.nowSeconds()}static isAuthorityMetadataEntity(t,r){return r?t.indexOf(co.CACHE_KEY)===0&&r.hasOwnProperty("aliases")&&r.hasOwnProperty("preferred_cache")&&r.hasOwnProperty("preferred_network")&&r.hasOwnProperty("canonical_authority")&&r.hasOwnProperty("authorization_endpoint")&&r.hasOwnProperty("token_endpoint")&&r.hasOwnProperty("issuer")&&r.hasOwnProperty("aliasesFromNetwork")&&r.hasOwnProperty("endpointsFromNetwork")&&r.hasOwnProperty("expiresAt")&&r.hasOwnProperty("jwks_uri"):!1}}/*! @azure/msal-common v14.1.0 2023-10-05 */function Sc(c){return c.hasOwnProperty("tenant_discovery_endpoint")&&c.hasOwnProperty("metadata")}/*! @azure/msal-common v14.1.0 2023-10-05 */function kc(c){return c.hasOwnProperty("error")&&c.hasOwnProperty("error_description")}/*! @azure/msal-common v14.1.0 2023-10-05 */class _r{constructor(t,r,n,a){this.networkInterface=t,this.logger=r,this.performanceClient=n,this.correlationId=a}async detectRegion(t,r){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(C.RegionDiscoveryDetectRegion,this.correlationId);let n=t;if(n)r.region_source=Ot.ENVIRONMENT_VARIABLE;else{const i=_r.IMDS_OPTIONS;try{const s=await N(this.getRegionFromIMDS.bind(this),C.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(b.IMDS_VERSION,i);if(s.status===Fo.httpSuccess&&(n=s.body,r.region_source=Ot.IMDS),s.status===Fo.httpBadRequest){const l=await N(this.getCurrentVersion.bind(this),C.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!l)return r.region_source=Ot.FAILED_AUTO_DETECTION,null;const u=await N(this.getRegionFromIMDS.bind(this),C.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(l,i);u.status===Fo.httpSuccess&&(n=u.body,r.region_source=Ot.IMDS)}}catch{return r.region_source=Ot.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=Ot.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(t,r){var n;return(n=this.performanceClient)==null||n.addQueueMeasurement(C.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${b.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,b.IMDS_TIMEOUT)}async getCurrentVersion(t){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(C.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const n=await this.networkInterface.sendGetRequestAsync(`${b.IMDS_ENDPOINT}?format=json`,t);return n.status===Fo.httpBadRequest&&n.body&&n.body["newest-versions"]&&n.body["newest-versions"].length>0?n.body["newest-versions"][0]:null}catch{return null}}}_r.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.1.0 2023-10-05 */class be{constructor(t,r,n,a,i,s,l){this.canonicalAuthority=t,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=a,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=s,this.correlationId=l,this.regionDiscovery=new _r(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(t){if(t.HostNameAndPort.endsWith(b.CIAM_AUTH_URL))return je.Ciam;const r=t.PathSegments;if(r.length)switch(r[0].toLowerCase()){case b.ADFS:return je.Adfs;case b.DSTS:return je.Dsts}return je.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(t){this._canonicalAuthority=new q(t),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw I(Ke)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw I(Ke)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw I(Ke)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw I(ar);return this.replacePath(this.metadata.end_session_endpoint)}else throw I(Ke)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw I(Ke)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw I(Ke)}canReplaceTenant(t){return t.PathSegments.length===1&&!be.reservedTenantDomains.has(t.PathSegments[0])&&this.getAuthorityType(t)===je.Default&&this.protocolMode===st.AAD}replaceTenant(t){return t.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(t){let r=t;const a=new q(this.metadata.canonical_authority).getUrlComponents(),i=a.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((l,u)=>{let g=i[u];if(u===0&&this.canReplaceTenant(a)){const v=new q(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];g!==v&&(this.logger.verbose(`Replacing tenant domain name ${g} with id ${v}`),g=v)}l!==g&&(r=r.replace(`/${g}/`,`/${l}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){const t=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===je.Adfs||this.protocolMode!==st.AAD&&!this.isAliasOfKnownMicrosoftAuthority(t)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(C.AuthorityResolveEndpointsAsync,this.correlationId);let t=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);t||(t=new gn,t.updateCanonicalAuthority(this.canonicalAuthority));const r=await N(this.updateCloudDiscoveryMetadata.bind(this),C.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(t);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,t.preferred_network);const n=await N(this.updateEndpointMetadata.bind(this),C.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(t);r!==Je.CACHE&&n!==Je.CACHE&&(t.resetExpiresAt(),t.updateCanonicalAuthority(this.canonicalAuthority));const a=this.cacheManager.generateAuthorityMetadataCacheKey(t.preferred_cache);this.cacheManager.setAuthorityMetadata(a,t),this.metadata=t}async updateEndpointMetadata(t){var a,i,s;(a=this.performanceClient)==null||a.addQueueMeasurement(C.AuthorityUpdateEndpointMetadata,this.correlationId),this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),t.updateEndpointMetadata(r,!1),Je.CONFIG;if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let l=this.getEndpointMetadataFromHardcodedValues();if(l)return this.logger.verbose("Found endpoint metadata from hardcoded values."),(i=this.authorityOptions.azureRegionConfiguration)!=null&&i.azureRegion&&(l=await N(this.updateMetadataWithRegionalInformation.bind(this),C.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(l)),t.updateEndpointMetadata(l,!1),Je.HARDCODED_VALUES;this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=t.isExpired();if(this.isAuthoritySameType(t)&&t.endpointsFromNetwork&&!n)return this.logger.verbose("Found endpoint metadata in the cache."),Je.CACHE;if(n&&this.logger.verbose("The metadata entity is expired."),r=await N(this.getEndpointMetadataFromNetwork.bind(this),C.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)(),r)return(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&(r=await N(this.updateMetadataWithRegionalInformation.bind(this),C.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),t.updateEndpointMetadata(r,!0),Je.NETWORK;throw I($o,this.defaultOpenIdConfigurationEndpoint)}isAuthoritySameType(t){return new q(t.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ie(Ja)}return null}async getEndpointMetadataFromNetwork(){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(C.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const t={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{const a=await this.networkInterface.sendGetRequestAsync(r,t);return Ec(a.body)?a.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(a){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${a}`),null}}getEndpointMetadataFromHardcodedValues(){return this.canonicalAuthority in ya?ya[this.canonicalAuthority]:null}async updateMetadataWithRegionalInformation(t){var n,a,i;(n=this.performanceClient)==null||n.addQueueMeasurement(C.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const r=(a=this.authorityOptions.azureRegionConfiguration)==null?void 0:a.azureRegion;if(r){if(r!==b.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Qr.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,be.replaceWithRegionalInformation(t,r);const s=await N(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),C.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.environmentRegion,this.regionDiscoveryMetadata);if(s)return this.regionDiscoveryMetadata.region_outcome=Qr.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=s,be.replaceWithRegionalInformation(t,s);this.regionDiscoveryMetadata.region_outcome=Qr.AUTO_DETECTION_REQUESTED_FAILED}return t}async updateCloudDiscoveryMetadata(t){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(C.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId),this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||b.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||b.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${t.canonical_authority||b.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),t.updateCloudDiscoveryMetadata(r,!1),Je.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const i=this.getCloudDiscoveryMetadataFromHardcodedValues();if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),t.updateCloudDiscoveryMetadata(i,!1),Je.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const n=t.isExpired();if(this.isAuthoritySameType(t)&&t.aliasesFromNetwork&&!n)return this.logger.verbose("Found cloud discovery metadata in the cache."),Je.CACHE;if(n&&this.logger.verbose("The metadata entity is expired."),r=await N(this.getCloudDiscoveryMetadataFromNetwork.bind(this),C.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)(),r)return t.updateCloudDiscoveryMetadata(r,!0),Je.NETWORK;throw ie(Xa)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===je.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),be.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=be.getCloudDiscoveryMetadataFromNetworkResponse(t.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ie(Wa)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),be.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(C.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const t=`${b.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={};let n=null;try{const i=await this.networkInterface.sendGetRequestAsync(t,r);let s,l;if(Sc(i.body))s=i.body,l=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(kc(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===b.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),l=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=be.getCloudDiscoveryMetadataFromNetworkResponse(l,this.hostnameAndPort)}catch(i){if(i instanceof he)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{const s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=be.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}getCloudDiscoveryMetadataFromHardcodedValues(){if(this.canonicalAuthority in lr){const t=lr[this.canonicalAuthority];return be.getCloudDiscoveryMetadataFromNetworkResponse(t.metadata,this.hostnameAndPort)}return null}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>q.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(t,r){let n;if(r&&r.azureCloudInstance!==Mn.None){const a=r.tenant?r.tenant:b.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${a}/`}return n||t}static createCloudDiscoveryMetadataFromHost(t){return{preferred_network:t,preferred_cache:t,aliases:[t]}}static getCloudDiscoveryMetadataFromNetworkResponse(t,r){for(let n=0;n<t.length;n++){const a=t[n];if(a.aliases.indexOf(r)>-1)return a}return null}getPreferredCache(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw I(Ke)}isAlias(t){return this.metadata.aliases.indexOf(t)>-1}isAliasOfKnownMicrosoftAuthority(t){return li.has(t)}static isPublicCloudAuthority(t){return b.KNOWN_PUBLIC_CLOUDS.indexOf(t)>=0}static buildRegionalAuthorityString(t,r,n){const a=new q(t);a.validateAsUri();const i=a.getUrlComponents();let s=`${r}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${r}.${b.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const l=q.constructAuthorityUriFromObject({...a.getUrlComponents(),HostNameAndPort:s}).urlString;return n?`${l}?${n}`:l}static replaceWithRegionalInformation(t,r){const n={...t};return n.authorization_endpoint=be.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=be.buildRegionalAuthorityString(n.token_endpoint,r,b.REGIONAL_AUTH_NON_MSI_QUERY_STRING),n.end_session_endpoint&&(n.end_session_endpoint=be.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(t){let r=t.endsWith(b.FORWARD_SLASH)?t:`${t}${b.FORWARD_SLASH}`;const a=new q(t).getUrlComponents();if(a.PathSegments.length===0&&a.HostNameAndPort.endsWith(b.CIAM_AUTH_URL)){const i=a.HostNameAndPort.split(".")[0];r=`${r}${i}${b.AAD_TENANT_DOMAIN_SUFFIX}`}return r}}be.reservedTenantDomains=new Set(["{tenant}","{tenantid}",io.COMMON,io.CONSUMERS,io.ORGANIZATIONS]);/*! @azure/msal-common v14.1.0 2023-10-05 */class Et{static async createDiscoveredInstance(t,r,n,a,i,s,l){s==null||s.addQueueMeasurement(C.AuthorityFactoryCreateDiscoveredInstance,l);const u=be.transformCIAMAuthority(t),g=Et.createInstance(u,r,n,a,i,s,l);try{return await N(g.resolveEndpointsAsync.bind(g),C.AuthorityResolveEndpointsAsync,i,s,l)(),g}catch{throw I(Ke)}}static createInstance(t,r,n,a,i,s,l){if(!t)throw ie(Pn);return new be(t,r,n,a,i,s,l)}}/*! @azure/msal-common v14.1.0 2023-10-05 */class dr{constructor(){this.failedRequests=[],this.errors=[],this.cacheHits=0}static isServerTelemetryEntity(t,r){const n=t.indexOf(Ie.CACHE_KEY)===0;let a=!0;return r&&(a=r.hasOwnProperty("failedRequests")&&r.hasOwnProperty("errors")&&r.hasOwnProperty("cacheHits")),n&&a}}/*! @azure/msal-common v14.1.0 2023-10-05 */class Ca{static isThrottlingEntity(t,r){let n=!1;t&&(n=t.indexOf(lo.THROTTLING_PREFIX)===0);let a=!0;return r&&(a=r.hasOwnProperty("throttleTime")),n&&a}}/*! @azure/msal-common v14.1.0 2023-10-05 */const Rc={sendGetRequestAsync:()=>Promise.reject(I(W)),sendPostRequestAsync:()=>Promise.reject(I(W))};/*! @azure/msal-common v14.1.0 2023-10-05 */const di="missing_kid_error",ui="missing_alg_error";/*! @azure/msal-common v14.1.0 2023-10-05 */const Mc={[di]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[ui]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Hn extends he{constructor(t,r){super(t,r),this.name="JoseHeaderError",Object.setPrototypeOf(this,Hn.prototype)}}function Ta(c){return new Hn(c,Mc[c])}/*! @azure/msal-common v14.1.0 2023-10-05 */class Un{constructor(t){this.typ=t.typ,this.alg=t.alg,this.kid=t.kid}static getShrHeaderString(t){if(!t.kid)throw Ta(di);if(!t.alg)throw Ta(ui);const r=new Un({typ:t.typ||ec.Pop,kid:t.kid,alg:t.alg});return JSON.stringify(r)}}/*! @azure/msal-common v14.1.0 2023-10-05 */class ur{constructor(t,r){this.cacheOutcome=qe.NOT_APPLICABLE,this.cacheManager=r,this.apiId=t.apiId,this.correlationId=t.correlationId,this.wrapperSKU=t.wrapperSKU||b.EMPTY_STRING,this.wrapperVer=t.wrapperVer||b.EMPTY_STRING,this.telemetryCacheKey=Ie.CACHE_KEY+ke.CACHE_KEY_SEPARATOR+t.clientId}generateCurrentRequestHeaderValue(){const t=`${this.apiId}${Ie.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer].join(Ie.VALUE_SEPARATOR),n=this.getRegionDiscoveryFields(),a=[t,n].join(Ie.VALUE_SEPARATOR);return[Ie.SCHEMA_VERSION,a,r].join(Ie.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const t=this.getLastRequests(),r=ur.maxErrorsToSend(t),n=t.failedRequests.slice(0,2*r).join(Ie.VALUE_SEPARATOR),a=t.errors.slice(0,r).join(Ie.VALUE_SEPARATOR),i=t.errors.length,s=r<i?Ie.OVERFLOW_TRUE:Ie.OVERFLOW_FALSE,l=[i,s].join(Ie.VALUE_SEPARATOR);return[Ie.SCHEMA_VERSION,t.cacheHits,n,a,l].join(Ie.CATEGORY_SEPARATOR)}cacheFailedRequest(t){const r=this.getLastRequests();r.errors.length>=Ie.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),t instanceof Error&&!!t&&t.toString()?t instanceof he?t.subError?r.errors.push(t.subError):t.errorCode?r.errors.push(t.errorCode):r.errors.push(t.toString()):r.errors.push(t.toString()):r.errors.push(Ie.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r)}incrementCacheHits(){const t=this.getLastRequests();return t.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t),t.cacheHits}getLastRequests(){const t=new dr;return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||t}clearTelemetryCache(){const t=this.getLastRequests(),r=ur.maxErrorsToSend(t),n=t.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey);else{const a=new dr;a.failedRequests=t.failedRequests.slice(r*2),a.errors=t.errors.slice(r),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a)}}static maxErrorsToSend(t){let r,n=0,a=0;const i=t.errors.length;for(r=0;r<i;r++){const s=t.failedRequests[2*r]||b.EMPTY_STRING,l=t.failedRequests[2*r+1]||b.EMPTY_STRING,u=t.errors[r]||b.EMPTY_STRING;if(a+=s.toString().length+l.toString().length+u.length+3,a<Ie.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){const t=[];return t.push(this.regionUsed||b.EMPTY_STRING),t.push(this.regionSource||b.EMPTY_STRING),t.push(this.regionOutcome||b.EMPTY_STRING),t.join(",")}updateRegionDiscoveryMetadata(t){this.regionUsed=t.region_used,this.regionSource=t.region_source,this.regionOutcome=t.region_outcome}setCacheOutcome(t){this.cacheOutcome=t}}/*! @azure/msal-common v14.1.0 2023-10-05 */class wa{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Pc{generateId(){return"callback-id"}startMeasurement(t,r){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:vc.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:t,startTimeMs:Date.now(),correlationId:r||""},measurement:new wa}}startPerformanceMeasurement(){return new wa}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-browser v3.2.0 2023-10-05 */const Ve={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},ro={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},At={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Ce={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},_a={GET:"GET",POST:"POST"},re={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},lt={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},qo={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},se={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var M;(function(c){c.Redirect="redirect",c.Popup="popup",c.Silent="silent",c.None="none"})(M||(M={}));const Aa={scopes:So},hi="jwk",fn="msal.db",Nc=1,Oc=`${fn}.keys`,Fe={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5};/*! @azure/msal-browser v3.2.0 2023-10-05 */class hr{navigateInternal(t,r){return hr.defaultNavigateWindow(t,r)}navigateExternal(t,r){return hr.defaultNavigateWindow(t,r)}static defaultNavigateWindow(t,r){return r.noHistory?window.location.replace(t):window.location.assign(t),new Promise(n=>{setTimeout(()=>{n(!0)},r.timeout)})}}/*! @azure/msal-browser v3.2.0 2023-10-05 */const Fn="pkce_not_created",mi="crypto_nonexistent",Ar="empty_navigate_uri",Ir="hash_empty_error",pi="no_state_in_hash",qn="hash_does_not_contain_known_properties",gi="unable_to_parse_state",fi="state_interaction_type_mismatch",bi="interaction_in_progress",vi="popup_window_error",yi="empty_window_error",St="user_cancelled",Ci="monitor_popup_timeout",Ti="monitor_window_timeout",wi="redirect_in_iframe",_i="block_iframe_reload",Ai="block_nested_popups",xc="iframe_closed_prematurely",Er="silent_logout_unsupported",Ii="no_account_error",Ei="silent_prompt_value_error",Si="no_token_request_cache_error",ki="unable_to_parse_token_request_cache_error",Kn="no_cached_authority_error",Dc="auth_request_not_set_error",Lc="invalid_cache_type",Ri="non_browser_environment",Dt="database_not_open",mr="no_network_connectivity",Mi="post_request_failed",Pi="get_request_failed",bn="failed_to_parse_response",Ge="unable_to_load_token",Bn="crypto_key_not_found",Ni="auth_code_required",Oi="auth_code_or_nativeAccountId_required",xi="spa_code_and_nativeAccountId_present",Yn="database_unavailable",Di="unable_to_acquire_token_from_native_platform",Li="native_handshake_timeout",Hi="native_extension_not_installed",Ro="native_connection_not_established",Ui="uninitialized_public_client_application",Fi="native_prompt_not_supported",qi="invalid_base64_string";/*! @azure/msal-browser v3.2.0 2023-10-05 */const at="For more visit: aka.ms/msaljs/browser-errors",Hc={[Fn]:"The PKCE code challenge and verifier could not be generated.",[mi]:"The crypto object or function is not available.",[Ar]:"Navigation URI is empty. Please check stack trace for more info.",[Ir]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${at}`,[pi]:"Hash does not contain state. Please verify that the request originated from msal.",[qn]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${at}`,[gi]:"Unable to parse state. Please verify that the request originated from msal.",[fi]:"Hash contains state but the interaction type does not match the caller.",[bi]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${at}`,[vi]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[yi]:"window.open returned null or undefined window object.",[St]:"User cancelled the flow.",[Ci]:`Token acquisition in popup failed due to timeout.  ${at}`,[Ti]:`Token acquisition in iframe failed due to timeout.  ${at}`,[wi]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[_i]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${at}`,[Ai]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[xc]:"The iframe being monitored was closed prematurely.",[Er]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Ii]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Ei]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Si]:"No token request found in cache.",[ki]:"The cached token request could not be parsed.",[Kn]:"No cached authority found.",[Dc]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Lc]:"Invalid cache type",[Ri]:"Login and token requests are not supported in non-browser environments.",[Dt]:"Database is not open!",[mr]:"No network connectivity. Check your internet connection.",[Mi]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Pi]:"Network request failed. Please check the network trace to determine root cause.",[bn]:"Failed to parse network response. Check network trace.",[Ge]:"Error loading token to cache.",[Bn]:"Cryptographic Key or Keypair not found in browser storage.",[Ni]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Oi]:"An authorization code or nativeAccountId must be provided to this flow.",[xi]:"Request cannot contain both spa code and native account id.",[Yn]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Di]:`Unable to acquire token from native platform.  ${at}`,[Li]:"Timed out while attempting to establish connection to browser extension",[Hi]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Ro]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${at}`,[Ui]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${at}`,[Fi]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[qi]:"Invalid base64 encoded string."};class Mo extends he{constructor(t){super(t,Hc[t]),Object.setPrototypeOf(this,Mo.prototype),this.name="BrowserAuthError"}}function k(c){return new Mo(c)}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Uc{async sendGetRequestAsync(t,r){let n;try{n=await fetch(t,{method:_a.GET,headers:this.getFetchHeaders(r)})}catch{throw window.navigator.onLine?k(Pi):k(mr)}try{return{headers:this.getHeaderDict(n.headers),body:await n.json(),status:n.status}}catch{throw k(bn)}}async sendPostRequestAsync(t,r){const n=r&&r.body||b.EMPTY_STRING;let a;try{a=await fetch(t,{method:_a.POST,headers:this.getFetchHeaders(r),body:n})}catch{throw window.navigator.onLine?k(Mi):k(mr)}try{return{headers:this.getHeaderDict(a.headers),body:await a.json(),status:a.status}}catch{throw k(bn)}}getFetchHeaders(t){const r=new Headers;if(!(t&&t.headers))return r;const n=t.headers;return Object.keys(n).forEach(a=>{r.append(a,n[a])}),r}getHeaderDict(t){const r={};return t.forEach((n,a)=>{r[a]=n}),r}}/*! @azure/msal-browser v3.2.0 2023-10-05 */const Fc=6e4,vn=6e3,qc=3e4,Kc=2e3;function Bc({auth:c,cache:t,system:r,telemetry:n},a){const i={clientId:b.EMPTY_STRING,authority:`${b.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:b.EMPTY_STRING,authorityMetadata:b.EMPTY_STRING,redirectUri:b.EMPTY_STRING,postLogoutRedirectUri:b.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:st.AAD,OIDCOptions:{serverResponseType:ko.FRAGMENT,defaultScopes:[b.OPENID_SCOPE,b.PROFILE_SCOPE,b.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Mn.None,tenant:b.EMPTY_STRING},skipAuthorityMetadataCache:!1},s={cacheLocation:Ce.SessionStorage,temporaryCacheLocation:Ce.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(t&&t.cacheLocation===Ce.LocalStorage),claimsBasedCachingEnabled:!1},l={loggerCallback:()=>{},logLevel:ye.Info,piiLoggingEnabled:!1},g={...{...ni,loggerOptions:l,networkClient:a?new Uc:Rc,navigationClient:new hr,loadFrameTimeout:0,windowHashTimeout:(r==null?void 0:r.loadFrameTimeout)||Fc,iframeHashTimeout:(r==null?void 0:r.loadFrameTimeout)||vn,navigateFrameWait:0,redirectNavigationTimeout:qc,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(r==null?void 0:r.nativeBrokerHandshakeTimeout)||Kc,pollIntervalMilliseconds:Ve.DEFAULT_POLL_INTERVAL_MS},...r,loggerOptions:(r==null?void 0:r.loggerOptions)||l},v={application:{appName:b.EMPTY_STRING,appVersion:b.EMPTY_STRING},client:new Pc};if((c==null?void 0:c.protocolMode)!==st.OIDC&&(c==null?void 0:c.OIDCOptions)&&new gt(g.loggerOptions).warning(JSON.stringify(ie(ei))),(c==null?void 0:c.protocolMode)&&c.protocolMode!==st.AAD&&(g==null?void 0:g.allowNativeBroker))throw ie(ti);return{auth:{...i,...c,OIDCOptions:{...i.OIDCOptions,...c==null?void 0:c.OIDCOptions}},cache:{...s,...t},system:g,telemetry:{...v,...n}}}/*! @azure/msal-browser v3.2.0 2023-10-05 */const Ki="@azure/msal-browser",Sr="3.2.0";/*! @azure/msal-browser v3.2.0 2023-10-05 */class Bi{constructor(t){this.browserEnvironment=typeof window!="undefined",this.config=Bc(t,this.browserEnvironment),this.logger=new gt(this.config.system.loggerOptions,Ki,Sr),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class zt extends Bi{getModuleName(){return zt.MODULE_NAME}getId(){return zt.ID}async initialize(){return!1}}zt.MODULE_NAME="";zt.ID="TeamsAppOperatingContext";/*! @azure/msal-browser v3.2.0 2023-10-05 */class kt extends Bi{getModuleName(){return kt.MODULE_NAME}getId(){return kt.ID}async initialize(){return this.available=typeof window!="undefined",this.available}}kt.MODULE_NAME="";kt.ID="StandardOperatingContext";class Yc{constructor(t){this.config=t;const r={loggerCallback:void 0,piiLoggingEnabled:!1,logLevel:void 0,correlationId:void 0};this.logger=new gt(r,Ki,Sr)}async createController(){const t=new kt(this.config),r=new zt(this.config),n=[t.initialize(),r.initialize()];return Promise.all(n).then(async()=>{if(r.isAvailable())return await(await ha(()=>Promise.resolve().then(function(){return Ra}),void 0)).StandardController.createController(t);if(t.isAvailable())return await(await ha(()=>Promise.resolve().then(function(){return Ra}),void 0)).StandardController.createController(t);throw new Error("No controller found.")})}}/*! @azure/msal-browser v3.2.0 2023-10-05 */function Wr(c){return encodeURIComponent(Gn(c).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function pr(c){return Yi(c).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gn(c){return Yi(new TextEncoder().encode(c))}function Yi(c){const t=Array.from(c,r=>String.fromCodePoint(r)).join("");return btoa(t)}/*! @azure/msal-browser v3.2.0 2023-10-05 */function Eo(c){return new TextDecoder().decode(Gc(c))}function Gc(c){let t=c.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw k(qi)}const r=atob(t);return Uint8Array.from(r,n=>n.codePointAt(0)||0)}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Ko{static stringToUtf8Arr(t){let r,n=0;const a=t.length;for(let s=0;s<a;s++)r=t.charCodeAt(s),n+=r<128?1:r<2048?2:r<65536?3:r<2097152?4:r<67108864?5:6;const i=new Uint8Array(n);for(let s=0,l=0;s<n;l++)r=t.charCodeAt(l),r<128?i[s++]=r:r<2048?(i[s++]=192+(r>>>6),i[s++]=128+(r&63)):r<65536?(i[s++]=224+(r>>>12),i[s++]=128+(r>>>6&63),i[s++]=128+(r&63)):r<2097152?(i[s++]=240+(r>>>18),i[s++]=128+(r>>>12&63),i[s++]=128+(r>>>6&63),i[s++]=128+(r&63)):r<67108864?(i[s++]=248+(r>>>24),i[s++]=128+(r>>>18&63),i[s++]=128+(r>>>12&63),i[s++]=128+(r>>>6&63),i[s++]=128+(r&63)):(i[s++]=252+(r>>>30),i[s++]=128+(r>>>24&63),i[s++]=128+(r>>>18&63),i[s++]=128+(r>>>12&63),i[s++]=128+(r>>>6&63),i[s++]=128+(r&63));return i}static utf8ArrToString(t){let r=b.EMPTY_STRING;for(let n,a=t.length,i=0;i<a;i++)n=t[i],r+=String.fromCharCode(n>251&&n<254&&i+5<a?(n-252)*1073741824+(t[++i]-128<<24)+(t[++i]-128<<18)+(t[++i]-128<<12)+(t[++i]-128<<6)+t[++i]-128:n>247&&n<252&&i+4<a?(n-248<<24)+(t[++i]-128<<18)+(t[++i]-128<<12)+(t[++i]-128<<6)+t[++i]-128:n>239&&n<248&&i+3<a?(n-240<<18)+(t[++i]-128<<12)+(t[++i]-128<<6)+t[++i]-128:n>223&&n<240&&i+2<a?(n-224<<12)+(t[++i]-128<<6)+t[++i]-128:n>191&&n<224&&i+1<a?(n-192<<6)+t[++i]-128:n);return r}static getSortedObjectString(t){return JSON.stringify(t,Object.keys(t).sort())}}/*! @azure/msal-browser v3.2.0 2023-10-05 */const zc="RSASSA-PKCS1-v1_5",Gi="SHA-256",$c=2048,jc=new Uint8Array([1,0,1]),zn={name:zc,hash:Gi,modulusLength:$c,publicExponent:jc};function Vc(c){if("crypto"in window)c.verbose("BrowserCrypto: modern crypto interface available");else throw c.error("BrowserCrypto: crypto interface is unavailable"),k(mi)}async function zi(c,t,r){t==null||t.addQueueMeasurement(C.Sha256Digest,r);const n=Ko.stringToUtf8Arr(c);return window.crypto.subtle.digest(Gi,n)}function Qc(c){return window.crypto.getRandomValues(c)}function bt(){return window.crypto.randomUUID()}async function Wc(c,t){return window.crypto.subtle.generateKey(zn,c,t)}async function Jr(c){return window.crypto.subtle.exportKey(hi,c)}async function Jc(c,t,r){return window.crypto.subtle.importKey(hi,c,zn,t,r)}async function Xc(c,t){return window.crypto.subtle.sign(zn,c,t)}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Zc{constructor(){this.dbName=fn,this.version=Nc,this.tableName=Oc,this.dbOpen=!1}async open(){return new Promise((t,r)=>{const n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",a=>{a.target.result.createObjectStore(this.tableName)}),n.addEventListener("success",a=>{const i=a;this.db=i.target.result,this.dbOpen=!0,t()}),n.addEventListener("error",()=>r(k(Yn)))})}closeConnection(){const t=this.db;t&&this.dbOpen&&(t.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return await this.open()}async getItem(t){return await this.validateDbIsOpen(),new Promise((r,n)=>{if(!this.db)return n(k(Dt));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(t);s.addEventListener("success",l=>{const u=l;this.closeConnection(),r(u.target.result)}),s.addEventListener("error",l=>{this.closeConnection(),n(l)})})}async setItem(t,r){return await this.validateDbIsOpen(),new Promise((n,a)=>{if(!this.db)return a(k(Dt));const l=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(r,t);l.addEventListener("success",()=>{this.closeConnection(),n()}),l.addEventListener("error",u=>{this.closeConnection(),a(u)})})}async removeItem(t){return await this.validateDbIsOpen(),new Promise((r,n)=>{if(!this.db)return n(k(Dt));const s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(t);s.addEventListener("success",()=>{this.closeConnection(),r()}),s.addEventListener("error",l=>{this.closeConnection(),n(l)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(k(Dt));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{const l=s;this.closeConnection(),t(l.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),r(s)})})}async containsKey(t){return await this.validateDbIsOpen(),new Promise((r,n)=>{if(!this.db)return n(k(Dt));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(t);s.addEventListener("success",l=>{const u=l;this.closeConnection(),r(u.target.result===1)}),s.addEventListener("error",l=>{this.closeConnection(),n(l)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((t,r)=>{const n=window.indexedDB.deleteDatabase(fn);n.addEventListener("success",()=>t(!0)),n.addEventListener("blocked",()=>t(!0)),n.addEventListener("error",()=>r(!1))})}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class yn{constructor(){this.cache=new Map}getItem(t){return this.cache.get(t)||null}setItem(t,r){this.cache.set(t,r)}removeItem(t){this.cache.delete(t)}getKeys(){const t=[];return this.cache.forEach((r,n)=>{t.push(n)}),t}containsKey(t){return this.cache.has(t)}clear(){this.cache.clear()}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Ia{constructor(t,r){this.inMemoryCache=new yn,this.indexedDBCache=new Zc,this.logger=t,this.storeName=r}handleDatabaseAccessError(t){if(t instanceof Mo&&t.errorCode===Yn)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw t}async getItem(t){const r=this.inMemoryCache.getItem(t);if(!r)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(t)}catch(n){this.handleDatabaseAccessError(n)}return r}async setItem(t,r){this.inMemoryCache.setItem(t,r);try{await this.indexedDBCache.setItem(t,r)}catch(n){this.handleDatabaseAccessError(n)}}async removeItem(t){this.inMemoryCache.removeItem(t);try{await this.indexedDBCache.removeItem(t)}catch(r){this.handleDatabaseAccessError(r)}}async getKeys(){const t=this.inMemoryCache.getKeys();if(t.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(r){this.handleDatabaseAccessError(r)}return t}async containsKey(t){const r=this.inMemoryCache.containsKey(t);if(!r)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(t)}catch(n){this.handleDatabaseAccessError(n)}return r}clearInMemory(){this.logger.verbose(`Deleting in-memory keystore ${this.storeName}`),this.inMemoryCache.clear(),this.logger.verbose(`In-memory keystore ${this.storeName} deleted`)}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const t=await this.indexedDBCache.deleteDatabase();return t&&this.logger.verbose("Persistent keystore deleted"),t}catch(t){return this.handleDatabaseAccessError(t),!1}}}/*! @azure/msal-browser v3.2.0 2023-10-05 */const Ea={asymmetricKeys:"asymmetricKeys",symmetricKeys:"symmetricKeys"};class el{constructor(t){this.logger=t,this.asymmetricKeys=new Ia(this.logger,Ea.asymmetricKeys),this.symmetricKeys=new Ia(this.logger,Ea.symmetricKeys)}async clear(){this.asymmetricKeys.clearInMemory(),this.symmetricKeys.clearInMemory();try{return await this.asymmetricKeys.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class $t{constructor(t,r){this.logger=t,Vc(t),this.cache=new el(this.logger),this.performanceClient=r}createNewGuid(){return bt()}base64Encode(t){return Gn(t)}base64Decode(t){return Eo(t)}async getPublicKeyThumbprint(t){var v;const r=(v=this.performanceClient)==null?void 0:v.startMeasurement(C.CryptoOptsGetPublicKeyThumbprint,t.correlationId),n=await Wc($t.EXTRACTABLE,$t.POP_KEY_USAGES),a=await Jr(n.publicKey),i={e:a.e,kty:a.kty,n:a.n},s=Ko.getSortedObjectString(i),l=await this.hashString(s),u=await Jr(n.privateKey),g=await Jc(u,!1,["sign"]);return await this.cache.asymmetricKeys.setItem(l,{privateKey:g,publicKey:n.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),r&&r.end({success:!0}),l}async removeTokenBindingKey(t){return await this.cache.asymmetricKeys.removeItem(t),!await this.cache.asymmetricKeys.containsKey(t)}async clearKeystore(){return await this.cache.clear()}async signJwt(t,r,n){var Z;const a=(Z=this.performanceClient)==null?void 0:Z.startMeasurement(C.CryptoOptsSignJwt,n),i=await this.cache.asymmetricKeys.getItem(r);if(!i)throw k(Bn);const s=await Jr(i.publicKey),l=Ko.getSortedObjectString(s),u=Wr(JSON.stringify({kid:r})),g=Un.getShrHeaderString({kid:u,alg:s.alg}),v=Wr(g);t.cnf={jwk:JSON.parse(l)};const w=Wr(JSON.stringify(t)),E=`${v}.${w}`,R=Ko.stringToUtf8Arr(E),D=await Xc(i.privateKey,R),O=pr(new Uint8Array(D)),x=`${E}.${O}`;return a&&a.end({success:!0}),x}async hashString(t){const r=await zi(t),n=new Uint8Array(r);return pr(n)}}$t.POP_KEY_USAGES=["sign","verify"];$t.EXTRACTABLE=!0;/*! @azure/msal-browser v3.2.0 2023-10-05 */const $i="storage_not_supported",tl="stubbed_public_client_application_called",ji="in_mem_redirect_unavailable";/*! @azure/msal-browser v3.2.0 2023-10-05 */const ol={[$i]:"Given storage configuration option was not supported.",[tl]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[ji]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class $n extends he{constructor(t,r){super(t,r),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,$n.prototype)}}function Vi(c){return new $n(c,ol[c])}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Sa{constructor(t){this.validateWindowStorage(t),this.windowStorage=window[t]}validateWindowStorage(t){if(t!==Ce.LocalStorage&&t!==Ce.SessionStorage||!window[t])throw Vi($i)}getItem(t){return this.windowStorage.getItem(t)}setItem(t,r){this.windowStorage.setItem(t,r)}removeItem(t){this.windowStorage.removeItem(t)}getKeys(){return Object.keys(this.windowStorage)}containsKey(t){return this.windowStorage.hasOwnProperty(t)}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Qi{static extractBrowserRequestState(t,r){if(!r)return null;try{return We.parseRequestState(t,r).libraryState.meta}catch{throw I(mt)}}static parseServerResponseFromHash(t){if(!t)return{};const r=new q(t);return q.getDeserializedHash(r.getHash())}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Cn extends De{constructor(t,r,n,a){super(t,n,a),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=r,this.logger=a,this.internalStorage=new yn,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),r.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps())}setupBrowserStorage(t){switch(t){case Ce.LocalStorage:case Ce.SessionStorage:try{return new Sa(t)}catch(r){this.logger.verbose(r);break}}return this.cacheConfig.cacheLocation=Ce.MemoryStorage,new yn}setupTemporaryCacheStorage(t,r){switch(r){case Ce.LocalStorage:case Ce.SessionStorage:try{return new Sa(t||Ce.SessionStorage)}catch(n){return this.logger.verbose(n),this.internalStorage}case Ce.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){const t=`${b.CACHE_PREFIX}.${Ae.ID_TOKEN}`,r=`${b.CACHE_PREFIX}.${Ae.CLIENT_INFO}`,n=`${b.CACHE_PREFIX}.${Ae.ERROR}`,a=`${b.CACHE_PREFIX}.${Ae.ERROR_DESC}`,i=this.browserStorage.getItem(t),s=this.browserStorage.getItem(r),l=this.browserStorage.getItem(n),u=this.browserStorage.getItem(a),g=[i,s,l,u];[Ae.ID_TOKEN,Ae.CLIENT_INFO,Ae.ERROR,Ae.ERROR_DESC].forEach((w,E)=>this.migrateCacheEntry(w,g[E]))}migrateCacheEntry(t,r){r&&this.setTemporaryCache(t,r,!0)}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const t=this.getItem(lt.ACCOUNT_KEYS),r=this.getItem(`${lt.TOKEN_KEYS}.${this.clientId}`);if(t&&r){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(a=>{if(this.isCredentialKey(a)){const i=this.getItem(a);if(i){const s=this.validateAndParseJson(i);if(s&&s.hasOwnProperty("credentialType"))switch(s.credentialType){case F.ID_TOKEN:if(et.isIdTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${a} found, saving key to token key map`);const l=De.toObject(new et,s),u=this.updateCredentialCacheKey(a,l);this.addTokenKey(u,F.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${a}`);break;case F.ACCESS_TOKEN:case F.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(tt.isAccessTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${a} found, saving key to token key map`);const l=De.toObject(new tt,s),u=this.updateCredentialCacheKey(a,l);this.addTokenKey(u,F.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${a}`);break;case F.REFRESH_TOKEN:if(ht.isRefreshTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${a} found, saving key to token key map`);const l=De.toObject(new ht,s),u=this.updateCredentialCacheKey(a,l);this.addTokenKey(u,F.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${a}`);break}}}if(this.isAccountKey(a)){const i=this.getItem(a);if(i){const s=this.validateAndParseJson(i);s&&fe.isAccountEntity(s)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${a} found, saving key to account key map`),this.addAccountKeyToMap(a))}}})}validateAndParseJson(t){try{const r=JSON.parse(t);return r&&typeof r=="object"?r:null}catch{return null}}getItem(t){return this.browserStorage.getItem(t)}setItem(t,r){this.browserStorage.setItem(t,r)}getAccount(t){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.getItem(t);if(!r)return this.removeAccountKeyFromMap(t),null;const n=this.validateAndParseJson(r);return!n||!fe.isAccountEntity(n)?(this.removeAccountKeyFromMap(t),null):De.toObject(new fe,n)}setAccount(t){this.logger.trace("BrowserCacheManager.setAccount called");const r=t.generateAccountKey();this.setItem(r,JSON.stringify(t)),this.addAccountKeyToMap(r)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const t=this.getItem(lt.ACCOUNT_KEYS);return t?JSON.parse(t):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${t}`);const r=this.getAccountKeys();r.indexOf(t)===-1?(r.push(t),this.setItem(lt.ACCOUNT_KEYS,JSON.stringify(r)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${t}`);const r=this.getAccountKeys(),n=r.indexOf(t);n>-1?(r.splice(n,1),this.setItem(lt.ACCOUNT_KEYS,JSON.stringify(r)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(t){super.removeAccount(t),this.removeAccountKeyFromMap(t)}removeIdToken(t){super.removeIdToken(t),this.removeTokenKey(t,F.ID_TOKEN)}async removeAccessToken(t){super.removeAccessToken(t),this.removeTokenKey(t,F.ACCESS_TOKEN)}removeRefreshToken(t){super.removeRefreshToken(t),this.removeTokenKey(t,F.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const t=this.getItem(`${lt.TOKEN_KEYS}.${this.clientId}`);if(t){const r=this.validateAndParseJson(t);if(r&&r.hasOwnProperty("idToken")&&r.hasOwnProperty("accessToken")&&r.hasOwnProperty("refreshToken"))return r;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(t,r){this.logger.trace("BrowserCacheManager addTokenKey called");const n=this.getTokenKeys();switch(r){case F.ID_TOKEN:n.idToken.indexOf(t)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(t));break;case F.ACCESS_TOKEN:n.accessToken.indexOf(t)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),n.accessToken.push(t));break;case F.REFRESH_TOKEN:n.refreshToken.indexOf(t)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(t));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${r}`),I(Bt)}this.setItem(`${lt.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(n))}removeTokenKey(t,r){this.logger.trace("BrowserCacheManager removeTokenKey called");const n=this.getTokenKeys();switch(r){case F.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${t} from map`);const a=n.idToken.indexOf(t);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),n.idToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case F.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${t} from map`);const i=n.accessToken.indexOf(t);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),n.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case F.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${t} from map`);const s=n.refreshToken.indexOf(t);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),n.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${r}`),I(Bt)}this.setItem(`${lt.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(n))}getIdTokenCredential(t){const r=this.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(t,F.ID_TOKEN),null;const n=this.validateAndParseJson(r);return!n||!et.isIdTokenEntity(n)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(t,F.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),De.toObject(new et,n))}setIdTokenCredential(t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=t.generateCredentialKey();this.setItem(r,JSON.stringify(t)),this.addTokenKey(r,F.ID_TOKEN)}getAccessTokenCredential(t){const r=this.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(t,F.ACCESS_TOKEN),null;const n=this.validateAndParseJson(r);return!n||!tt.isAccessTokenEntity(n)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(t,F.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),De.toObject(new tt,n))}setAccessTokenCredential(t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=t.generateCredentialKey();this.setItem(r,JSON.stringify(t)),this.addTokenKey(r,F.ACCESS_TOKEN)}getRefreshTokenCredential(t){const r=this.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(t,F.REFRESH_TOKEN),null;const n=this.validateAndParseJson(r);return!n||!ht.isRefreshTokenEntity(n)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(t,F.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),De.toObject(new ht,n))}setRefreshTokenCredential(t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=t.generateCredentialKey();this.setItem(r,JSON.stringify(t)),this.addTokenKey(r,F.REFRESH_TOKEN)}getAppMetadata(t){const r=this.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(r);return!n||!Gt.isAppMetadataEntity(t,n)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),De.toObject(new Gt,n))}setAppMetadata(t){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=t.generateAppMetadataKey();this.setItem(r,JSON.stringify(t))}getServerTelemetry(t){const r=this.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const n=this.validateAndParseJson(r);return!n||!dr.isServerTelemetryEntity(t,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),De.toObject(new dr,n))}setServerTelemetry(t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(t,JSON.stringify(r))}getAuthorityMetadata(t){const r=this.internalStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(r);return n&&gn.isAuthorityMetadataEntity(t,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),De.toObject(new gn,n)):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(r=>this.isAuthorityMetadata(r))}setWrapperMetadata(t,r){this.internalStorage.setItem(qo.WRAPPER_SKU,t),this.internalStorage.setItem(qo.WRAPPER_VER,r)}getWrapperMetadata(){const t=this.internalStorage.getItem(qo.WRAPPER_SKU)||b.EMPTY_STRING,r=this.internalStorage.getItem(qo.WRAPPER_VER)||b.EMPTY_STRING;return[t,r]}setAuthorityMetadata(t,r){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(t,JSON.stringify(r))}getActiveAccount(){const t=this.generateCacheKey(Ae.ACTIVE_ACCOUNT_FILTERS),r=this.getItem(t);if(!r){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const a=this.generateCacheKey(Ae.ACTIVE_ACCOUNT),i=this.getItem(a);if(!i)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const s=this.getAccountInfoByFilter({localAccountId:i})[0]||null;return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(s),s):null}const n=this.validateAndParseJson(r);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoByFilter({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId})[0]||null):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(t){const r=this.generateCacheKey(Ae.ACTIVE_ACCOUNT_FILTERS),n=this.generateCacheKey(Ae.ACTIVE_ACCOUNT);if(t){this.logger.verbose("setActiveAccount: Active account set");const a={homeAccountId:t.homeAccountId,localAccountId:t.localAccountId};this.browserStorage.setItem(r,JSON.stringify(a)),this.browserStorage.setItem(n,t.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r),this.browserStorage.removeItem(n)}getAccountInfoByFilter(t){const r=this.getAllAccounts();return this.logger.trace(`BrowserCacheManager.getAccountInfoByFilter: total ${r.length} accounts found`),r.filter(n=>!(t.username&&t.username.toLowerCase()!==n.username.toLowerCase()||t.homeAccountId&&t.homeAccountId!==n.homeAccountId||t.localAccountId&&t.localAccountId!==n.localAccountId||t.tenantId&&t.tenantId!==n.tenantId||t.environment&&t.environment!==n.environment))}getAccountInfoByHints(t,r){const n=this.getAllAccounts().filter(a=>{if(r){const i=a.idTokenClaims&&a.idTokenClaims.sid;return r===i}return t?t===a.username:!1});if(n.length===1)return n[0];if(n.length>1)throw I(Wo);return null}getThrottlingCache(t){const r=this.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const n=this.validateAndParseJson(r);return!n||!Ca.isThrottlingEntity(t,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),De.toObject(new Ca,n))}setThrottlingCache(t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(t,JSON.stringify(r))}getTemporaryCache(t,r){const n=r?this.generateCacheKey(t):t;if(this.cacheConfig.storeAuthStateInCookie){const i=this.getItemCookie(n);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const a=this.temporaryCacheStorage.getItem(n);if(!a){if(this.cacheConfig.cacheLocation===Ce.LocalStorage){const i=this.browserStorage.getItem(n);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),a}setTemporaryCache(t,r,n){const a=n?this.generateCacheKey(t):t;this.temporaryCacheStorage.setItem(a,r),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(a,r))}removeItem(t){this.browserStorage.removeItem(t),this.temporaryCacheStorage.removeItem(t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(t))}containsKey(t){return this.browserStorage.containsKey(t)||this.temporaryCacheStorage.containsKey(t)}getKeys(){return[...this.browserStorage.getKeys(),...this.temporaryCacheStorage.getKeys()]}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.getKeys().forEach(t=>{(this.browserStorage.containsKey(t)||this.temporaryCacheStorage.containsKey(t))&&(t.indexOf(b.CACHE_PREFIX)!==-1||t.indexOf(this.clientId)!==-1)&&this.removeItem(t)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(t){t.addQueueMeasurement(C.ClearTokensAndKeysWithClaims);const r=this.getTokenKeys(),n=[];r.accessToken.forEach(a=>{const i=this.getAccessTokenCredential(a);(i==null?void 0:i.requestedClaimsHash)&&a.includes(i.requestedClaimsHash.toLowerCase())&&n.push(this.removeAccessToken(a))}),await Promise.all(n),n.length>0&&this.logger.warning(`${n.length} access tokens with claims in the cache keys have been removed from the cache.`)}setItemCookie(t,r,n){let a=`${encodeURIComponent(t)}=${encodeURIComponent(r)};path=/;SameSite=Lax;`;n&&(a+=`expires=${this.getCookieExpirationTime(n)};`),this.cacheConfig.secureCookies&&(a+="Secure;"),document.cookie=a}getItemCookie(t){const r=`${encodeURIComponent(t)}=`,n=document.cookie.split(";");for(let a=0;a<n.length;a++){let i=n[a];for(;i.charAt(0)===" ";)i=i.substring(1);if(i.indexOf(r)===0)return decodeURIComponent(i.substring(r.length,i.length))}return b.EMPTY_STRING}clearMsalCookies(){const t=`${b.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(n=>{for(;n.charAt(0)===" ";)n=n.substring(1);if(n.indexOf(t)===0){const a=n.split("=")[0];this.clearItemCookie(a)}})}clearItemCookie(t){this.setItemCookie(t,b.EMPTY_STRING,-1)}getCookieExpirationTime(t){const r=new Date;return new Date(r.getTime()+t*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}getCache(){return this.browserStorage}setCache(){}generateCacheKey(t){return this.validateAndParseJson(t)?JSON.stringify(t):He.startsWith(t,b.CACHE_PREFIX)||He.startsWith(t,Ae.ADAL_ID_TOKEN)?t:`${b.CACHE_PREFIX}.${this.clientId}.${t}`}generateAuthorityKey(t){const{libraryState:{id:r}}=We.parseRequestState(this.cryptoImpl,t);return this.generateCacheKey(`${re.AUTHORITY}.${r}`)}generateNonceKey(t){const{libraryState:{id:r}}=We.parseRequestState(this.cryptoImpl,t);return this.generateCacheKey(`${re.NONCE_IDTOKEN}.${r}`)}generateStateKey(t){const{libraryState:{id:r}}=We.parseRequestState(this.cryptoImpl,t);return this.generateCacheKey(`${re.REQUEST_STATE}.${r}`)}getCachedAuthority(t){const r=this.generateStateKey(t),n=this.getTemporaryCache(r);if(!n)return null;const a=this.generateAuthorityKey(n);return this.getTemporaryCache(a)}updateCacheEntries(t,r,n,a,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(t);this.setTemporaryCache(s,t,!1);const l=this.generateNonceKey(t);this.setTemporaryCache(l,r,!1);const u=this.generateAuthorityKey(t);if(this.setTemporaryCache(u,n,!1),i){const g={credential:i.homeAccountId,type:Qe.HOME_ACCOUNT_ID};this.setTemporaryCache(re.CCS_CREDENTIAL,JSON.stringify(g),!0)}else if(a){const g={credential:a,type:Qe.UPN};this.setTemporaryCache(re.CCS_CREDENTIAL,JSON.stringify(g),!0)}}resetRequestCache(t){this.logger.trace("BrowserCacheManager.resetRequestCache called"),t&&(this.getKeys().forEach(r=>{r.indexOf(t)!==-1&&this.removeItem(r)}),this.removeItem(this.generateStateKey(t)),this.removeItem(this.generateNonceKey(t)),this.removeItem(this.generateAuthorityKey(t))),this.removeItem(this.generateCacheKey(re.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(re.ORIGIN_URI)),this.removeItem(this.generateCacheKey(re.URL_HASH)),this.removeItem(this.generateCacheKey(re.CORRELATION_ID)),this.removeItem(this.generateCacheKey(re.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(re.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(t){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),t){const r=this.generateStateKey(t),n=this.temporaryCacheStorage.getItem(r);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${n}`),this.resetRequestCache(n||b.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(t){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach(r=>{if(r.indexOf(re.REQUEST_STATE)===-1)return;const n=this.temporaryCacheStorage.getItem(r);if(!n)return;const a=Qi.extractBrowserRequestState(this.cryptoImpl,n);a&&a.interactionType===t&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${n}`),this.resetRequestCache(n))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(t){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const r=Gn(JSON.stringify(t));this.setTemporaryCache(re.REQUEST_PARAMS,r,!0)}getCachedRequest(t){this.logger.trace("BrowserCacheManager.getCachedRequest called");const r=this.getTemporaryCache(re.REQUEST_PARAMS,!0);if(!r)throw k(Si);let n;try{n=JSON.parse(Eo(r))}catch(a){throw this.logger.errorPii(`Attempted to parse: ${r}`),this.logger.error(`Parsing cached token request threw with error: ${a}`),k(ki)}if(this.removeItem(this.generateCacheKey(re.REQUEST_PARAMS)),!n.authority){const a=this.generateAuthorityKey(t),i=this.getTemporaryCache(a);if(!i)throw k(Kn);n.authority=i}return n}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const t=this.getTemporaryCache(re.NATIVE_REQUEST,!0);if(!t)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const r=this.validateAndParseJson(t);return r||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(t){const r=this.getInteractionInProgress();return t?r===this.clientId:!!r}getInteractionInProgress(){const t=`${b.CACHE_PREFIX}.${re.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(t,!1)}setInteractionInProgress(t){const r=`${b.CACHE_PREFIX}.${re.INTERACTION_STATUS_KEY}`;if(t){if(this.getInteractionInProgress())throw k(bi);this.setTemporaryCache(r,this.clientId,!1)}else!t&&this.getInteractionInProgress()===this.clientId&&this.removeItem(r)}getLegacyLoginHint(){const t=this.getTemporaryCache(Ae.ADAL_ID_TOKEN);t&&(this.browserStorage.removeItem(Ae.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const r=this.getTemporaryCache(Ae.ID_TOKEN,!0);r&&(this.removeItem(this.generateCacheKey(Ae.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const n=r||t;if(n){const a=ft(n,Eo);if(a.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),a.preferred_username;if(a.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),a.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(t,r){const n=r.generateCredentialKey();if(t!==n){const a=this.getItem(t);if(a)return this.removeItem(t),this.setItem(n,a),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return t}getRedirectRequestContext(){return this.getTemporaryCache(re.REDIRECT_CONTEXT,!0)}setRedirectRequestContext(t){this.setTemporaryCache(re.REDIRECT_CONTEXT,t,!0)}async hydrateCache(t,r){var l,u,g,v,w;const n=et.createIdTokenEntity((l=t.account)==null?void 0:l.homeAccountId,(u=t.account)==null?void 0:u.environment,t.idToken,this.clientId,t.tenantId);let a;r.claims&&(a=await this.cryptoImpl.hashString(r.claims));const i=tt.createAccessTokenEntity((g=t.account)==null?void 0:g.homeAccountId,t.account.environment,t.accessToken,this.clientId,t.tenantId,t.scopes.join(" "),((v=t.expiresOn)==null?void 0:v.getTime())||0,((w=t.extExpiresOn)==null?void 0:w.getTime())||0,this.cryptoImpl,void 0,t.tokenType,void 0,r.sshKid,r.claims,a),s=new Ft(void 0,n,i);return this.saveCacheRecord(s)}}const rl=(c,t)=>{const r={cacheLocation:Ce.MemoryStorage,temporaryCacheLocation:Ce.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Cn(c,r,ir,t)};/*! @azure/msal-browser v3.2.0 2023-10-05 */class ce{static clearHash(t){t.location.hash=b.EMPTY_STRING,typeof t.history.replaceState=="function"&&t.history.replaceState(null,b.EMPTY_STRING,`${t.location.origin}${t.location.pathname}${t.location.search}`)}static replaceHash(t){const r=t.split("#");r.shift(),window.location.hash=r.length>0?r.join("#"):b.EMPTY_STRING}static isInIframe(){return window.parent!==window}static isInPopup(){return typeof window!="undefined"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Ve.POPUP_NAME_PREFIX}.`)===0}static getCurrentUri(){return window.location.href.split("?")[0].split("#")[0]}static getHomepage(){const r=new q(window.location.href).getUrlComponents();return`${r.Protocol}//${r.HostNameAndPort}/`}static blockReloadInHiddenIframes(){if(q.hashContainsKnownProperties(window.location.hash)&&ce.isInIframe())throw k(_i)}static blockRedirectInIframe(t,r){const n=ce.isInIframe();if(t===M.Redirect&&n&&!r)throw k(wi)}static blockAcquireTokenInPopups(){if(ce.isInPopup())throw k(Ai)}static blockNonBrowserEnvironment(t){if(!t)throw k(Ri)}static blockAPICallsBeforeInitialize(t){if(!t)throw k(Ui)}}/*! @azure/msal-browser v3.2.0 2023-10-05 */const Y={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v3.2.0 2023-10-05 */class nl{constructor(t,r){this.eventCallbacks=new Map,this.logger=t,this.browserCrypto=r,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}addEventCallback(t){if(typeof window!="undefined"){const r=bt();return this.eventCallbacks.set(r,t),this.logger.verbose(`Event callback registered with id: ${r}`),r}return null}removeEventCallback(t){this.eventCallbacks.delete(t),this.logger.verbose(`Event callback ${t} removed.`)}enableAccountStorageEvents(){typeof window!="undefined"&&(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window!="undefined"&&(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}emitEvent(t,r,n,a){if(typeof window!="undefined"){const i={eventType:t,interactionType:r||null,payload:n||null,error:a||null,timestamp:Date.now()};this.logger.info(`Emitting event: ${t}`),this.eventCallbacks.forEach((s,l)=>{this.logger.verbose(`Emitting event to callback ${l}: ${t}`),s.apply(null,[i])})}}handleAccountCacheChange(t){try{const r=t.newValue||t.oldValue;if(!r)return;const n=JSON.parse(r);if(typeof n!="object"||!fe.isAccountEntity(n))return;const i=De.toObject(new fe,n).getAccountInfo();!t.oldValue&&t.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(Y.ACCOUNT_ADDED,void 0,i)):!t.newValue&&t.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(Y.ACCOUNT_REMOVED,void 0,i))}catch{return}}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Wi{constructor(t,r,n,a,i,s,l,u,g){this.config=t,this.browserStorage=r,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=u,this.correlationId=g||bt(),this.logger=a.clone(Ve.MSAL_SKU,Sr,this.correlationId),this.performanceClient=l}async clearCacheOnLogout(t){if(t){fe.accountInfoIsEqual(t,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(fe.generateAccountCacheKey(t)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}async initializeBaseRequest(t,r){this.performanceClient.addQueueMeasurement(C.InitializeBaseRequest,t.correlationId);const n=t.authority||this.config.auth.authority;r&&await this.validateRequestAuthority(n,r);const a=[...t&&t.scopes||[]],i={...t,correlationId:this.correlationId,authority:n,scopes:a};if(!i.authenticationScheme)i.authenticationScheme=ae.BEARER,this.logger.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(i.authenticationScheme===ae.SSH){if(!t.sshJwk)throw ie(wr);if(!t.sshKid)throw ie(Za)}this.logger.verbose(`Authentication Scheme set to "${i.authenticationScheme}" as configured in Auth request`)}return this.config.cache.claimsBasedCachingEnabled&&t.claims&&!He.isEmptyObj(t.claims)&&(i.requestedClaimsHash=await this.browserCrypto.hashString(t.claims)),i}getRedirectUri(t){this.logger.verbose("getRedirectUri called");const r=t||this.config.auth.redirectUri||ce.getCurrentUri();return q.getAbsoluteUrl(r,ce.getCurrentUri())}async validateRequestAuthority(t,r){if(!(await this.getDiscoveredAuthority(t)).isAlias(r.environment))throw ie(oi)}initializeServerTelemetryManager(t,r){this.logger.verbose("initializeServerTelemetryManager called");const n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:t,forceRefresh:r||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new ur(n,this.browserStorage)}async getDiscoveredAuthority(t){this.logger.verbose("getDiscoveredAuthority called");const r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata};return t?(this.logger.verbose("Creating discovered authority with request authority"),await Et.createDiscoveredInstance(t,this.config.system.networkClient,this.browserStorage,r,this.logger)):(this.logger.verbose("Creating discovered authority with configured authority"),await Et.createDiscoveredInstance(this.config.auth.authority,this.config.system.networkClient,this.browserStorage,r,this.logger))}}/*! @azure/msal-browser v3.2.0 2023-10-05 */const al=32;async function il(c,t,r){c.addQueueMeasurement(C.GeneratePkceCodes,r);const n=ii(sl,C.GenerateCodeVerifier,t,c,r)(c,t,r),a=await N(cl,C.GenerateCodeChallengeFromVerifier,t,c,r)(n,c,t,r);return{verifier:n,challenge:a}}function sl(c,t,r){try{const n=new Uint8Array(al);return ii(Qc,C.GetRandomValues,t,c,r)(n),pr(n)}catch{throw k(Fn)}}async function cl(c,t,r,n){t.addQueueMeasurement(C.GenerateCodeChallengeFromVerifier,n);try{const a=await N(zi,C.Sha256Digest,r,t,n)(c,t,n);return pr(new Uint8Array(a))}catch{throw k(Fn)}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class jt extends Wi{async initializeAuthorizationCodeRequest(t){this.performanceClient.addQueueMeasurement(C.StandardInteractionClientInitializeAuthorizationCodeRequest,t.correlationId);const r=await N(il,C.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),n={...t,redirectUri:t.redirectUri,code:b.EMPTY_STRING,codeVerifier:r.verifier};return t.codeChallenge=r.challenge,t.codeChallengeMethod=b.S256_CODE_CHALLENGE_METHOD,n}initializeLogoutRequest(t){this.logger.verbose("initializeLogoutRequest called",t==null?void 0:t.correlationId);const r={correlationId:this.correlationId||bt(),...t};if(t)if(t.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(t.account){const n=this.getLogoutHintFromIdTokenClaims(t.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),r.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!t||t.postLogoutRedirectUri!==null?t&&t.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",r.correlationId),r.postLogoutRedirectUri=q.getAbsoluteUrl(t.postLogoutRedirectUri,ce.getCurrentUri())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",r.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",r.correlationId),r.postLogoutRedirectUri=q.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ce.getCurrentUri())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",r.correlationId),r.postLogoutRedirectUri=q.getAbsoluteUrl(ce.getCurrentUri(),ce.getCurrentUri())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",r.correlationId),r}getLogoutHintFromIdTokenClaims(t){const r=t.idTokenClaims;if(r){if(r.login_hint)return r.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(t,r,n){this.performanceClient.addQueueMeasurement(C.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const a=await N(this.getClientConfiguration.bind(this),C.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(t,r,n);return new si(a,this.performanceClient)}async getClientConfiguration(t,r,n){this.performanceClient.addQueueMeasurement(C.StandardInteractionClientGetClientConfiguration,this.correlationId);const a=await N(this.getDiscoveredAuthority.bind(this),C.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)(r,n),i=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:i.loggerCallback,piiLoggingEnabled:i.piiLoggingEnabled,logLevel:i.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:Ve.MSAL_SKU,version:Sr,cpu:b.EMPTY_STRING,os:b.EMPTY_STRING},telemetry:this.config.telemetry}}validateAndExtractStateFromHash(t,r,n){if(this.logger.verbose("validateAndExtractStateFromHash called",n),!t.state)throw k(pi);const a=Qi.extractBrowserRequestState(this.browserCrypto,t.state);if(!a)throw k(gi);if(a.interactionType!==r)throw k(fi);return this.logger.verbose("Returning state from hash",n),t.state}async getDiscoveredAuthority(t,r){this.performanceClient.addQueueMeasurement(C.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const n={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=t||this.config.auth.authority,i=be.generateAuthority(a,r||this.config.auth.azureCloudOptions);return await N(Et.createDiscoveredInstance.bind(Et),C.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(i,this.config.system.networkClient,this.browserStorage,n,this.logger,this.performanceClient,this.correlationId)}async initializeAuthorizationRequest(t,r){this.performanceClient.addQueueMeasurement(C.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const n=this.getRedirectUri(t.redirectUri),a={interactionType:r},i=We.setRequestState(this.browserCrypto,t&&t.state||b.EMPTY_STRING,a),l={...await N(this.initializeBaseRequest.bind(this),C.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(t),redirectUri:n,state:i,nonce:t.nonce||bt(),responseMode:this.config.auth.OIDCOptions.serverResponseType},u=t.account||this.browserStorage.getActiveAccount();if(u&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${u.homeAccountId}`,this.correlationId),l.account=u),!l.loginHint&&!u){const g=this.browserStorage.getLegacyLoginHint();g&&(l.loginHint=g)}return l}}/*! @azure/msal-browser v3.2.0 2023-10-05 */const ll="ContentError",Ji="user_switch";/*! @azure/msal-browser v3.2.0 2023-10-05 */const dl="USER_INTERACTION_REQUIRED",ul="USER_CANCEL",hl="NO_NETWORK",ml="PERSISTENT_ERROR",pl="DISABLED",gl="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v3.2.0 2023-10-05 */const fl=-2147186943,bl={[Ji]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class it extends he{constructor(t,r,n){super(t,r),Object.setPrototypeOf(this,it.prototype),this.name="NativeAuthError",this.ext=n}}function Lt(c){if(c.ext&&c.ext.status&&(c.ext.status===ml||c.ext.status===pl)||c.ext&&c.ext.error&&c.ext.error===fl)return!0;switch(c.errorCode){case ll:return!0;default:return!1}}function Tn(c,t,r){if(r&&r.status)switch(r.status){case gl:return ai(cr);case dl:return new nt(c,t);case ul:return k(St);case hl:return k(mr)}return new it(c,bl[c]||t,r)}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Xi extends jt{async acquireToken(t){const r=this.initializeServerTelemetryManager(se.acquireTokenSilent_silentFlow),n=await this.createSilentFlowClient(r,t.authority,t.azureCloudOptions);this.logger.verbose("Silent auth client created");try{const i=(await n.acquireCachedToken(t))[0];return this.performanceClient.addFields({fromCache:!0},t.correlationId),i}catch(a){throw a instanceof Mo&&a.errorCode===Bn&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),a}}logout(t){this.logger.verbose("logoutRedirect called");const r=this.initializeLogoutRequest(t);return this.clearCacheOnLogout(r==null?void 0:r.account)}async createSilentFlowClient(t,r,n){const a=await N(this.getClientConfiguration.bind(this),C.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(t,r,n);return new Ic(a,this.performanceClient)}async initializeSilentRequest(t,r){this.performanceClient.addQueueMeasurement(C.InitializeSilentRequest,this.correlationId);const n=await N(this.initializeBaseRequest.bind(this),C.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(t,r);return{...t,...n,account:r,forceRefresh:t.forceRefresh||!1}}}/*! @azure/msal-browser v3.2.0 2023-10-05 */const Xr={BROKER_CLIENT_ID:"brk_client_id",BROKER_REDIRECT_URI:"brk_redirect_uri"};class qt extends Wi{constructor(t,r,n,a,i,s,l,u,g,v,w,E){super(t,r,n,a,i,s,u,g,E),this.apiId=l,this.accountId=v,this.nativeMessageHandler=g,this.nativeStorageManager=w,this.silentCacheClient=new Xi(t,this.nativeStorageManager,n,a,i,s,u,g,E)}async acquireToken(t){this.performanceClient.addQueueMeasurement(C.NativeInteractionClientAcquireToken,t.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(C.NativeInteractionClientAcquireToken,t.correlationId),n=xe.nowSeconds(),a=await this.initializeNativeRequest(t);try{const u=await this.acquireTokensFromCache(this.accountId,a);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),u}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const i={method:At.GetToken,request:a},s=await this.nativeMessageHandler.sendMessage(i),l=this.validateNativeResponse(s);return this.handleNativeResponse(l,a,n).then(u=>(r.end({success:!0,isNativeBroker:!0,requestId:u.requestId}),u)).catch(u=>{throw r.end({success:!1,errorCode:u.errorCode,subErrorCode:u.subError,isNativeBroker:!0}),u})}createSilentCacheRequest(t,r){return{authority:t.authority,correlationId:this.correlationId,scopes:ge.fromString(t.scope).asArray(),account:r,forceRefresh:!1}}async acquireTokensFromCache(t,r){if(!t)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),I(wo);const n=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t});if(!n)throw I(wo);try{const a=this.createSilentCacheRequest(r,n);return{...await this.silentCacheClient.acquireToken(a),account:n}}catch(a){throw a}}async acquireTokenRedirect(t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const r=await this.initializeNativeRequest(t),n={method:At.GetToken,request:r};try{const s=await this.nativeMessageHandler.sendMessage(n);this.validateNativeResponse(s)}catch(s){if(s instanceof it&&Lt(s))throw s}this.browserStorage.setTemporaryCache(re.NATIVE_REQUEST,JSON.stringify(r),!0);const a={apiId:se.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(t.redirectUri);await this.navigationClient.navigateExternal(i,a)}async handleRedirectPromise(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const t=this.browserStorage.getCachedNativeRequest();if(!t)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),null;const{prompt:r,...n}=t;r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(re.NATIVE_REQUEST));const a={method:At.GetToken,request:n},i=xe.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const s=await this.nativeMessageHandler.sendMessage(a);this.validateNativeResponse(s);const l=this.handleNativeResponse(s,n,i);return this.browserStorage.setInteractionInProgress(!1),l}catch(s){throw this.browserStorage.setInteractionInProgress(!1),s}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(t,r,n){if(this.logger.trace("NativeInteractionClient - handleNativeResponse called."),t.account.id!==r.accountId)throw Tn(Ji);const a=await this.getDiscoveredAuthority(r.authority),i=ft(t.id_token,Eo),s=this.createHomeAccountIdentifier(t,i),l=fe.createAccount({homeAccountId:s,idTokenClaims:i,clientInfo:t.client_info,nativeAccountId:t.account.id},a),u=await this.generateAuthenticationResult(t,r,i,l,a.canonicalAuthority,n);return this.cacheAccount(l),this.cacheNativeTokens(t,r,s,i,u.accessToken,u.tenantId,n),u}createHomeAccountIdentifier(t,r){return fe.generateHomeAccountId(t.client_info||b.EMPTY_STRING,je.Default,this.logger,this.browserCrypto,r)}generateScopes(t,r){return t.scope?ge.fromString(t.scope):ge.fromString(r.scope)}async generatePopAccessToken(t,r){if(r.tokenType===ae.POP){if(t.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),t.shr;const n=new Yt(this.browserCrypto),a={resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,shrNonce:r.shrNonce};if(!r.keyId)throw I(Ao);return await n.signPopToken(t.access_token,r.keyId,a)}else return t.access_token}async generateAuthenticationResult(t,r,n,a,i,s){const l=this.addTelemetryFromNativeResponse(t),u=t.scope?ge.fromString(t.scope):ge.fromString(r.scope),g=t.account.properties||{},v=g.UID||n.oid||n.sub||b.EMPTY_STRING,w=g.TenantId||n.tid||b.EMPTY_STRING,E=await this.generatePopAccessToken(t,r),R=r.tokenType===ae.POP?ae.POP:ae.BEARER;return{authority:i,uniqueId:v,tenantId:w,scopes:u.asArray(),account:a.getAccountInfo(),idToken:t.id_token,idTokenClaims:n,accessToken:E,fromCache:l?this.isResponseFromCache(l):!1,expiresOn:new Date(Number(s+t.expires_in)*1e3),tokenType:R,correlationId:this.correlationId,state:t.state,fromNativeBroker:!0}}cacheAccount(t){this.browserStorage.setAccount(t),this.browserStorage.removeAccountContext(t).catch(r=>{this.logger.error(`Error occurred while removing account context from browser storage. ${r}`)})}cacheNativeTokens(t,r,n,a,i,s,l){const u=et.createIdTokenEntity(n,r.authority,t.id_token||"",r.clientId,a.tid||""),g=r.tokenType===ae.POP?b.SHR_NONCE_VALIDITY:(typeof t.expires_in=="string"?parseInt(t.expires_in,10):t.expires_in)||0,v=l+g,w=this.generateScopes(t,r),E=tt.createAccessTokenEntity(n,r.authority,i,r.clientId,a.tid||s,w.printScopes(),v,0,this.browserCrypto),R=new Ft(void 0,u,E);this.nativeStorageManager.saveCacheRecord(R,r.storeInCache)}addTelemetryFromNativeResponse(t){const r=this.getMATSFromResponse(t);return r?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:r.broker_version,matsAccountJoinOnStart:r.account_join_on_start,matsAccountJoinOnEnd:r.account_join_on_end,matsDeviceJoin:r.device_join,matsPromptBehavior:r.prompt_behavior,matsApiErrorCode:r.api_error_code,matsUiVisible:r.ui_visible,matsSilentCode:r.silent_code,matsSilentBiSubCode:r.silent_bi_sub_code,matsSilentMessage:r.silent_message,matsSilentStatus:r.silent_status,matsHttpStatus:r.http_status,matsHttpEventCount:r.http_event_count},this.correlationId),r):null}validateNativeResponse(t){if(t.hasOwnProperty("access_token")&&t.hasOwnProperty("id_token")&&t.hasOwnProperty("client_info")&&t.hasOwnProperty("account")&&t.hasOwnProperty("scope")&&t.hasOwnProperty("expires_in"))return t;throw Ba(po,"Response missing expected properties.")}getMATSFromResponse(t){if(t.properties.MATS)try{return JSON.parse(t.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(t){return typeof t.is_cached=="undefined"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!t.is_cached}async initializeNativeRequest(t){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const r=t.authority||this.config.auth.authority;t.account&&await this.validateRequestAuthority(r,t.account);const n=new q(r);n.validateAsUri();const{scopes:a,...i}=t,s=new ge(a||[]);s.appendScopes(So);const l=()=>{switch(this.apiId){case se.ssoSilent:case se.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Pe.NONE}if(!t.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(t.prompt){case Pe.NONE:case Pe.CONSENT:case Pe.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),t.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${t.prompt} is not compatible with native flow`),k(Fi)}},u={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(t.redirectUri),prompt:l(),correlationId:this.correlationId,tokenType:t.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...t.extraQueryParameters,...t.tokenQueryParameters},extendedExpiryToken:!1};if(this.handleExtraBrokerParams(u),u.extraParameters=u.extraParameters||{},u.extraParameters.telemetry=ro.MATS_TELEMETRY,t.authenticationScheme===ae.POP){const g={resourceRequestUri:t.resourceRequestUri,resourceRequestMethod:t.resourceRequestMethod,shrClaims:t.shrClaims,shrNonce:t.shrNonce},v=new Yt(this.browserCrypto),w=await N(v.generateCnf.bind(v),C.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(g,this.logger);u.reqCnf=w.reqCnfHash,u.keyId=w.kid}return u}handleExtraBrokerParams(t){if(!!t.extraParameters&&t.extraParameters.hasOwnProperty(Xr.BROKER_CLIENT_ID)&&t.extraParameters.hasOwnProperty(Xr.BROKER_REDIRECT_URI)&&t.extraParameters.hasOwnProperty(B.CLIENT_ID)){const r=t.extraParameters[B.CLIENT_ID],n=t.redirectUri,a=t.extraParameters[Xr.BROKER_REDIRECT_URI];t.extraParameters={child_client_id:r,child_redirect_uri:n},t.redirectUri=a}}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class rt{constructor(t,r,n,a){this.logger=t,this.handshakeTimeoutMs=r,this.extensionId=a,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(C.NativeMessageHandlerHandshake)}async sendMessage(t){this.logger.trace("NativeMessageHandler - sendMessage called.");const r={channel:ro.CHANNEL_ID,extensionId:this.extensionId,responseId:bt(),body:t};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r),new Promise((n,a)=>{this.resolvers.set(r.responseId,{resolve:n,reject:a})})}static async createProvider(t,r,n){t.trace("NativeMessageHandler - createProvider called.");try{const a=new rt(t,r,n,ro.PREFERRED_EXTENSION_ID);return await a.sendHandshakeRequest(),a}catch{const i=new rt(t,r,n);return await i.sendHandshakeRequest(),i}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const t={channel:ro.CHANNEL_ID,extensionId:this.extensionId,responseId:bt(),body:{method:At.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=r=>{this.onChannelMessage(r)},window.postMessage(t,window.origin,[this.messageChannel.port2]),new Promise((r,n)=>{this.handshakeResolvers.set(t.responseId,{resolve:r,reject:n}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(k(Li)),this.handshakeResolvers.delete(t.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(t){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),t.source!==window)return;const r=t.data;if(!(!r.channel||r.channel!==ro.CHANNEL_ID)&&!(r.extensionId&&r.extensionId!==this.extensionId)&&r.body.method===At.HandshakeRequest){const n=this.handshakeResolvers.get(r.responseId);if(!n){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${r.responseId}`);return}this.logger.verbose(r.extensionId?`Extension with id: ${r.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),n.reject(k(Hi))}}onChannelMessage(t){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const r=t.data,n=this.resolvers.get(r.responseId),a=this.handshakeResolvers.get(r.responseId);try{const i=r.body.method;if(i===At.Response){if(!n)return;const s=r.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")n.reject(Tn(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?n.reject(Tn(s.result.code,s.result.description,s.result.ext)):n.resolve(s.result);else throw Ba(po,"Event does not contain result.");this.resolvers.delete(r.responseId)}else if(i===At.HandshakeResponse){if(!a){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${r.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=r.extensionId,this.extensionVersion=r.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),a.resolve(),this.handshakeResolvers.delete(r.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${t}`),n?n.reject(i):a&&a.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(t,r,n,a){if(r.trace("isNativeAvailable called"),!t.system.allowNativeBroker)return r.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!n)return r.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(a)switch(a){case ae.BEARER:case ae.POP:return r.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return r.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class jn{constructor(t,r,n,a,i){this.authModule=t,this.browserStorage=r,this.authCodeRequest=n,this.logger=a,this.performanceClient=i}async handleCodeResponseFromHash(t,r,n,a){if(this.performanceClient.addQueueMeasurement(C.HandleCodeResponseFromHash,this.authCodeRequest.correlationId),!t)throw k(Ir);const i=this.browserStorage.generateStateKey(r),s=this.browserStorage.getTemporaryCache(i);if(!s)throw I(pt,"Cached State");let l;try{l=this.authModule.handleFragmentResponse(t,s)}catch(u){throw u instanceof ct&&u.subError===St?k(St):u}return N(this.handleCodeResponseFromServer.bind(this),C.HandleCodeResponseFromServer,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(l,r,n,a)}async handleCodeResponseFromServer(t,r,n,a,i=!0){this.performanceClient.addQueueMeasurement(C.HandleCodeResponseFromServer,this.authCodeRequest.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called");const s=this.browserStorage.generateStateKey(r),l=this.browserStorage.getTemporaryCache(s);if(!l)throw I(pt,"Cached State");const u=this.browserStorage.generateNonceKey(l),g=this.browserStorage.getTemporaryCache(u);if(this.authCodeRequest.code=t.code,t.cloud_instance_host_name&&await N(this.updateTokenEndpointAuthority.bind(this),C.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(t.cloud_instance_host_name,n,a),i&&(t.nonce=g||void 0),t.state=l,t.client_info)this.authCodeRequest.clientInfo=t.client_info;else{const w=this.checkCcsCredentials();w&&(this.authCodeRequest.ccsCredential=w)}const v=await N(this.authModule.acquireToken.bind(this.authModule),C.AuthClientAcquireToken,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(this.authCodeRequest,t);return this.browserStorage.cleanRequestByState(r),v}async updateTokenEndpointAuthority(t,r,n){this.performanceClient.addQueueMeasurement(C.UpdateTokenEndpointAuthority,this.authCodeRequest.correlationId);const a=`https://${t}/${r.tenant}/`,i=await Et.createDiscoveredInstance(a,n,this.browserStorage,r.options,this.logger,this.performanceClient,this.authCodeRequest.correlationId);this.authModule.updateAuthority(i)}checkCcsCredentials(){const t=this.browserStorage.getTemporaryCache(re.CCS_CREDENTIAL,!0);if(t)try{return JSON.parse(t)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${t}`)}return null}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class vl extends jt{constructor(t,r,n,a,i,s,l,u,g,v){super(t,r,n,a,i,s,l,g,v),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=u}acquireToken(t){try{const r=this.generatePopupName(t.scopes||So,t.authority||this.config.auth.authority),n=t.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(t,r,n);{this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");const a=this.openSizedPopup("about:blank",r,n);return this.acquireTokenPopupAsync(t,r,n,a)}}catch(r){return Promise.reject(r)}}logout(t){try{this.logger.verbose("logoutPopup called");const r=this.initializeLogoutRequest(t),n=this.generateLogoutPopupName(r),a=t&&t.authority,i=t&&t.mainWindowRedirectUri,s=(t==null?void 0:t.popupWindowAttributes)||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(r,n,s,a,void 0,i);{this.logger.verbose("asyncPopup set to false, opening popup");const l=this.openSizedPopup("about:blank",n,s);return this.logoutPopupAsync(r,n,s,a,l,i)}}catch(r){return Promise.reject(r)}}async acquireTokenPopupAsync(t,r,n,a){this.logger.verbose("acquireTokenPopupAsync called");const i=this.initializeServerTelemetryManager(se.acquireTokenPopup);this.performanceClient.setPreQueueTime(C.StandardInteractionClientInitializeAuthorizationRequest,t.correlationId);const s=await this.initializeAuthorizationRequest(t,M.Popup);this.browserStorage.updateCacheEntries(s.state,s.nonce,s.authority,s.loginHint||b.EMPTY_STRING,s.account||null);try{this.performanceClient.setPreQueueTime(C.StandardInteractionClientInitializeAuthorizationCodeRequest,t.correlationId);const l=await this.initializeAuthorizationCodeRequest(s);this.performanceClient.setPreQueueTime(C.StandardInteractionClientCreateAuthCodeClient,t.correlationId);const u=await this.createAuthCodeClient(i,s.authority,s.azureCloudOptions);this.logger.verbose("Auth code client created");const g=rt.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme);let v;g&&(v=this.performanceClient.startMeasurement(C.FetchAccountIdWithNativeBroker,t.correlationId));const w=await u.getAuthCodeUrl({...s,nativeBroker:g}),E=new jn(u,this.browserStorage,l,this.logger,this.performanceClient),R={popup:a,popupName:r,popupWindowAttributes:n},D=this.initiateAuthRequest(w,R);this.eventHandler.emitEvent(Y.POPUP_OPENED,M.Popup,{popupWindow:D},null);const O=await this.monitorPopupForHash(D),x=q.getDeserializedHash(O),Z=this.validateAndExtractStateFromHash(x,M.Popup,s.correlationId);if(Ze.removeThrottle(this.browserStorage,this.config.auth.clientId,l),x.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),v&&v.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw k(Ro);const te=new qt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,se.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,x.accountId,this.nativeStorage,s.correlationId),{userRequestState:K}=We.parseRequestState(this.browserCrypto,Z);return te.acquireToken({...s,state:K,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(Z)})}return await E.handleCodeResponseFromHash(O,Z,u.authority,this.networkClient)}catch(l){throw a&&a.close(),l instanceof he&&(l.setCorrelationId(this.correlationId),i.cacheFailedRequest(l)),this.browserStorage.cleanRequestByState(s.state),l}}async logoutPopupAsync(t,r,n,a,i,s){var u,g;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Y.LOGOUT_START,M.Popup,t);const l=this.initializeServerTelemetryManager(se.logoutPopup);try{await this.clearCacheOnLogout(t.account),this.performanceClient.setPreQueueTime(C.StandardInteractionClientCreateAuthCodeClient,t.correlationId);const v=await this.createAuthCodeClient(l,a);this.logger.verbose("Auth code client created");try{v.authority.endSessionEndpoint}catch{if(((u=t.account)==null?void 0:u.homeAccountId)&&t.postLogoutRedirectUri&&v.authority.protocolMode===st.OIDC){if(this.browserStorage.removeAccount((g=t.account)==null?void 0:g.homeAccountId),this.eventHandler.emitEvent(Y.LOGOUT_SUCCESS,M.Popup,t),s){const R={apiId:se.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},D=q.getAbsoluteUrl(s,ce.getCurrentUri());await this.navigationClient.navigateInternal(D,R)}i&&i.close();return}}const w=v.getLogoutUri(t);this.eventHandler.emitEvent(Y.LOGOUT_SUCCESS,M.Popup,t);const E=this.openPopup(w,{popupName:r,popupWindowAttributes:n,popup:i});if(this.eventHandler.emitEvent(Y.POPUP_OPENED,M.Popup,{popupWindow:E},null),await this.waitForLogoutPopup(E),s){const R={apiId:se.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},D=q.getAbsoluteUrl(s,ce.getCurrentUri());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${D}`),await this.navigationClient.navigateInternal(D,R)}else this.logger.verbose("No main window navigation requested")}catch(v){throw i&&i.close(),v instanceof he&&(v.setCorrelationId(this.correlationId),l.cacheFailedRequest(v)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(Y.LOGOUT_FAILURE,M.Popup,null,v),this.eventHandler.emitEvent(Y.LOGOUT_END,M.Popup),v}this.eventHandler.emitEvent(Y.LOGOUT_END,M.Popup)}initiateAuthRequest(t,r){if(t)return this.logger.infoPii(`Navigate to: ${t}`),this.openPopup(t,r);throw this.logger.error("Navigate url is empty"),k(Ar)}monitorPopupForHash(t){return new Promise((r,n)=>{const a=this.config.system.windowHashTimeout/this.config.system.pollIntervalMilliseconds;let i=0;this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const s=setInterval(()=>{if(t.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),this.cleanPopup(),clearInterval(s),n(k(St));return}let l=b.EMPTY_STRING,u=b.EMPTY_STRING;try{l=t.location.href,u=this.extractServerResponseStringFromPopup(t,l)}catch{}!l||l==="about:blank"||(this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),i++,u?(this.logger.verbose("PopupHandler.monitorPopupForHash - found hash in url"),clearInterval(s),this.cleanPopup(t),q.hashContainsKnownProperties(u)?(this.logger.verbose("PopupHandler.monitorPopupForHash - hash contains known properties, returning."),r(u)):(this.logger.error("PopupHandler.monitorPopupForHash - found hash in url but it does not contain known properties. Check that your router is not changing the hash prematurely."),this.logger.errorPii(`PopupHandler.monitorPopupForHash - hash found: ${u}`),n(k(qn)))):i>a&&(this.logger.error("PopupHandler.monitorPopupForHash - unable to find hash in url, timing out"),clearInterval(s),n(k(Ci))))},this.config.system.pollIntervalMilliseconds)})}waitForLogoutPopup(t){return new Promise(r=>{this.logger.verbose("PopupHandler.waitForLogoutPopup - polling started");const n=setInterval(()=>{t.closed&&(this.logger.error("PopupHandler.waitForLogoutPopup - window closed"),this.cleanPopup(),clearInterval(n),r());let a=b.EMPTY_STRING;try{a=t.location.href}catch{}!a||a==="about:blank"||(this.logger.verbose("PopupHandler.waitForLogoutPopup - popup window is on same origin as caller, closing."),clearInterval(n),this.cleanPopup(t),r())},this.config.system.pollIntervalMilliseconds)})}openPopup(t,r){try{let n;if(r.popup?(n=r.popup,this.logger.verbosePii(`Navigating popup window to: ${t}`),n.location.assign(t)):typeof r.popup=="undefined"&&(this.logger.verbosePii(`Opening popup window to: ${t}`),n=this.openSizedPopup(t,r.popupName,r.popupWindowAttributes)),!n)throw k(yi);return n.focus&&n.focus(),this.currentWindow=n,window.addEventListener("beforeunload",this.unloadWindow),n}catch(n){throw this.logger.error("error opening popup "+n.message),this.browserStorage.setInteractionInProgress(!1),k(vi)}}openSizedPopup(t,r,n){var E,R,D,O;const a=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let u=(E=n.popupSize)==null?void 0:E.width,g=(R=n.popupSize)==null?void 0:R.height,v=(D=n.popupPosition)==null?void 0:D.top,w=(O=n.popupPosition)==null?void 0:O.left;return(!u||u<0||u>s)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),u=Ve.POPUP_WIDTH),(!g||g<0||g>l)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),g=Ve.POPUP_HEIGHT),(!v||v<0||v>l)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),v=Math.max(0,l/2-Ve.POPUP_HEIGHT/2+i)),(!w||w<0||w>s)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),w=Math.max(0,s/2-Ve.POPUP_WIDTH/2+a)),window.open(t,r,`width=${u}, height=${g}, top=${v}, left=${w}, scrollbars=yes`)}unloadWindow(t){this.browserStorage.cleanRequestByInteractionType(M.Popup),this.currentWindow&&this.currentWindow.close(),t.preventDefault()}cleanPopup(t){t&&t.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(t,r){return`${Ve.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t.join("-")}.${r}.${this.correlationId}`}generateLogoutPopupName(t){const r=t.account&&t.account.homeAccountId;return`${Ve.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${r}.${this.correlationId}`}extractServerResponseStringFromPopup(t,r){var a;let n;return((a=this.config.auth.OIDCOptions)==null?void 0:a.serverResponseType)===ko.QUERY?n=q.parseQueryServerResponse(r):n=t.location.hash,n}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class ka extends jn{constructor(t,r,n,a,i,s){super(t,r,n,a,s),this.browserCrypto=i}async initiateAuthRequest(t,r){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),t){r.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(re.ORIGIN_URI,r.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(re.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${t}`);const n={apiId:se.acquireTokenRedirect,timeout:r.redirectTimeout,noHistory:!1};if(typeof r.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),r.onRedirectNavigate(t)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await r.navigationClient.navigateExternal(t,n);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await r.navigationClient.navigateExternal(t,n);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),k(Ar)}async handleCodeResponseFromHash(t,r,n,a){if(this.logger.verbose("RedirectHandler.handleCodeResponse called"),!t)throw k(Ir);this.browserStorage.setInteractionInProgress(!1);const i=this.browserStorage.generateStateKey(r),s=this.browserStorage.getTemporaryCache(i);if(!s)throw I(pt,"Cached State");let l;try{l=this.authModule.handleFragmentResponse(t,s)}catch(w){throw w instanceof ct&&w.subError===St?k(St):w}const u=this.browserStorage.generateNonceKey(s),g=this.browserStorage.getTemporaryCache(u);if(this.authCodeRequest.code=l.code,l.cloud_instance_host_name&&await this.updateTokenEndpointAuthority(l.cloud_instance_host_name,n,a),l.nonce=g||void 0,l.state=s,l.client_info)this.authCodeRequest.clientInfo=l.client_info;else{const w=this.checkCcsCredentials();w&&(this.authCodeRequest.ccsCredential=w)}const v=await this.authModule.acquireToken(this.authCodeRequest,l);return this.browserStorage.cleanRequestByState(r),v}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class yl extends jt{constructor(t,r,n,a,i,s,l,u,g,v){super(t,r,n,a,i,s,l,g,v),this.nativeStorage=u}async acquireToken(t){this.performanceClient.setPreQueueTime(C.StandardInteractionClientInitializeAuthorizationRequest,t.correlationId);const r=await this.initializeAuthorizationRequest(t,M.Redirect);this.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||b.EMPTY_STRING,r.account||null);const n=this.initializeServerTelemetryManager(se.acquireTokenRedirect),a=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(r.state),this.eventHandler.emitEvent(Y.RESTORE_FROM_BFCACHE,M.Redirect))};try{this.performanceClient.setPreQueueTime(C.StandardInteractionClientInitializeAuthorizationCodeRequest,t.correlationId);const i=await this.initializeAuthorizationCodeRequest(r);this.performanceClient.setPreQueueTime(C.StandardInteractionClientCreateAuthCodeClient,t.correlationId);const s=await this.createAuthCodeClient(n,r.authority,r.azureCloudOptions);this.logger.verbose("Auth code client created");const l=new ka(s,this.browserStorage,i,this.logger,this.browserCrypto,this.performanceClient),u=await s.getAuthCodeUrl({...r,nativeBroker:rt.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)}),g=this.getRedirectStartPage(t.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${g}`),window.addEventListener("pageshow",a),await l.initiateAuthRequest(u,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:g,onRedirectNavigate:t.onRedirectNavigate})}catch(i){throw i instanceof he&&(i.setCorrelationId(this.correlationId),n.cacheFailedRequest(i)),window.removeEventListener("pageshow",a),this.browserStorage.cleanRequestByState(r.state),i}}async handleRedirectPromise(t){const r=this.initializeServerTelemetryManager(se.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const n=this.getRedirectResponseHash(t||window.location.hash);if(!n)return this.logger.info("handleRedirectPromise did not detect a response hash as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(M.Redirect),null;let a;try{const u=q.getDeserializedHash(n);a=this.validateAndExtractStateFromHash(u,M.Redirect),this.logger.verbose("State extracted from hash")}catch(u){return this.logger.info(`handleRedirectPromise was unable to extract state due to: ${u}`),this.browserStorage.cleanRequestByInteractionType(M.Redirect),null}const i=this.browserStorage.getTemporaryCache(re.ORIGIN_URI,!0)||b.EMPTY_STRING,s=q.removeHashFromUrl(i),l=q.removeHashFromUrl(window.location.href);if(s===l&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling hash");const u=await this.handleHash(n,a,r);return i.indexOf("#")>-1&&ce.replaceHash(i),u}else if(this.config.auth.navigateToLoginRequestUrl){if(!ce.isInIframe()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(re.URL_HASH,n,!0);const u={apiId:se.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let g=!0;if(!i||i==="null"){const v=ce.getHomepage();this.browserStorage.setTemporaryCache(re.ORIGIN_URI,v,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),g=await this.navigationClient.navigateInternal(v,u)}else this.logger.verbose(`Navigating to loginRequestUrl: ${i}`),g=await this.navigationClient.navigateInternal(i,u);if(!g)return this.handleHash(n,a,r)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling hash"),this.handleHash(n,a,r);return null}catch(n){throw n instanceof he&&(n.setCorrelationId(this.correlationId),r.cacheFailedRequest(n)),this.browserStorage.cleanRequestByInteractionType(M.Redirect),n}}getRedirectResponseHash(t){if(this.logger.verbose("getRedirectResponseHash called"),q.hashContainsKnownProperties(t))return ce.clearHash(window),this.logger.verbose("Hash contains known properties, returning response hash"),t;const n=this.browserStorage.getTemporaryCache(re.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(re.URL_HASH)),this.logger.verbose("Hash does not contain known properties, returning cached hash"),n}async handleHash(t,r,n){const a=this.browserStorage.getCachedRequest(r);this.logger.verbose("handleHash called, retrieved cached request");const i=q.getDeserializedHash(t);if(i.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw k(Ro);const g=new qt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,se.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,i.accountId,this.nativeStorage,a.correlationId),{userRequestState:v}=We.parseRequestState(this.browserCrypto,r);return g.acquireToken({...a,state:v,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(r)})}const s=this.browserStorage.getCachedAuthority(r);if(!s)throw k(Kn);this.performanceClient.setPreQueueTime(C.StandardInteractionClientCreateAuthCodeClient,a.correlationId);const l=await this.createAuthCodeClient(n,s);return this.logger.verbose("Auth code client created"),Ze.removeThrottle(this.browserStorage,this.config.auth.clientId,a),await new ka(l,this.browserStorage,a,this.logger,this.browserCrypto,this.performanceClient).handleCodeResponseFromHash(t,r,l.authority,this.networkClient)}async logout(t){var a,i;this.logger.verbose("logoutRedirect called");const r=this.initializeLogoutRequest(t),n=this.initializeServerTelemetryManager(se.logout);try{this.eventHandler.emitEvent(Y.LOGOUT_START,M.Redirect,t),await this.clearCacheOnLogout(r.account);const s={apiId:se.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1};this.performanceClient.setPreQueueTime(C.StandardInteractionClientCreateAuthCodeClient,r.correlationId);const l=await this.createAuthCodeClient(n,t&&t.authority);if(this.logger.verbose("Auth code client created"),l.authority.protocolMode===st.OIDC)try{l.authority.endSessionEndpoint}catch{if((a=r.account)!=null&&a.homeAccountId){this.browserStorage.removeAccount((i=r.account)==null?void 0:i.homeAccountId),this.eventHandler.emitEvent(Y.LOGOUT_SUCCESS,M.Redirect,r);return}}const u=l.getLogoutUri(r);if(this.eventHandler.emitEvent(Y.LOGOUT_SUCCESS,M.Redirect,r),t&&typeof t.onRedirectNavigate=="function")if(t.onRedirectNavigate(u)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(u,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(u,s);return}}catch(s){throw s instanceof he&&(s.setCorrelationId(this.correlationId),n.cacheFailedRequest(s)),this.eventHandler.emitEvent(Y.LOGOUT_FAILURE,M.Redirect,null,s),this.eventHandler.emitEvent(Y.LOGOUT_END,M.Redirect),s}this.eventHandler.emitEvent(Y.LOGOUT_END,M.Redirect)}getRedirectStartPage(t){const r=t||window.location.href;return q.getAbsoluteUrl(r,ce.getCurrentUri())}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Zi extends jn{constructor(t,r,n,a,i,s){super(t,r,n,a,s),this.navigateFrameWait=i.navigateFrameWait,this.pollIntervalMilliseconds=i.pollIntervalMilliseconds}async initiateAuthRequest(t){if(this.performanceClient.addQueueMeasurement(C.SilentHandlerInitiateAuthRequest,this.authCodeRequest.correlationId),!t)throw this.logger.info("Navigate url is empty"),k(Ar);return this.navigateFrameWait?await N(this.loadFrame.bind(this),C.SilentHandlerLoadFrame,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(t):this.loadFrameSync(t)}monitorIframeForHash(t,r){return this.performanceClient.addQueueMeasurement(C.SilentHandlerMonitorIframeForHash,this.authCodeRequest.correlationId),new Promise((n,a)=>{r<vn&&this.logger.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${r}ms) than the default (${vn}ms). This may result in timeouts.`);const s=window.performance.now()+r,l=setInterval(()=>{if(window.performance.now()>s){this.removeHiddenIframe(t),clearInterval(l),a(k(Ti));return}let u=b.EMPTY_STRING;const g=t.contentWindow;try{u=g?g.location.href:b.EMPTY_STRING}catch{}if(!u||u==="about:blank")return;const v=g?g.location.hash:b.EMPTY_STRING;if(v)if(q.hashContainsKnownProperties(v)){this.removeHiddenIframe(t),clearInterval(l),n(v);return}else{this.logger.error("SilentHandler:monitorIFrameForHash - a hash is present in the iframe but it does not contain known properties. It's likely that the hash has been replaced by code running on the redirectUri page."),this.logger.errorPii(`SilentHandler:monitorIFrameForHash - the url detected in the iframe is: ${u}`),this.removeHiddenIframe(t),clearInterval(l),a(k(qn));return}else{this.logger.error("SilentHandler:monitorIFrameForHash - the request has returned to the redirectUri but a hash is not present in the iframe. It's likely that the hash has been removed or the page has been redirected by code running on the redirectUri page."),this.logger.errorPii(`SilentHandler:monitorIFrameForHash - the url detected in the iframe is: ${u}`),this.removeHiddenIframe(t),clearInterval(l),a(k(Ir));return}},this.pollIntervalMilliseconds)})}loadFrame(t){return this.performanceClient.addQueueMeasurement(C.SilentHandlerLoadFrame,this.authCodeRequest.correlationId),new Promise((r,n)=>{const a=this.createHiddenIframe();setTimeout(()=>{if(!a){n("Unable to load iframe");return}a.src=t,r(a)},this.navigateFrameWait)})}loadFrameSync(t){const r=this.createHiddenIframe();return r.src=t,r}createHiddenIframe(){const t=document.createElement("iframe");return t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.getElementsByTagName("body")[0].appendChild(t),t}removeHiddenIframe(t){document.body===t.parentNode&&document.body.removeChild(t)}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Cl extends jt{constructor(t,r,n,a,i,s,l,u,g,v,w){super(t,r,n,a,i,s,u,v,w),this.apiId=l,this.nativeStorage=g}async acquireToken(t){if(this.performanceClient.addQueueMeasurement(C.SilentIframeClientAcquireToken,t.correlationId),!t.loginHint&&!t.sid&&(!t.account||!t.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request."),t.prompt&&t.prompt!==Pe.NONE&&t.prompt!==Pe.NO_SESSION)throw k(Ei);const r=await N(this.initializeAuthorizationRequest.bind(this),C.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,t.correlationId)({...t,prompt:t.prompt||Pe.NONE},M.Silent);this.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||b.EMPTY_STRING,r.account||null);const n=this.initializeServerTelemetryManager(this.apiId);try{const a=await N(this.createAuthCodeClient.bind(this),C.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,t.correlationId)(n,r.authority,r.azureCloudOptions);return await N(this.silentTokenHelper.bind(this),C.SilentIframeClientTokenHelper,this.logger,this.performanceClient,t.correlationId)(a,r)}catch(a){throw a instanceof he&&(a.setCorrelationId(this.correlationId),n.cacheFailedRequest(a)),this.browserStorage.cleanRequestByState(r.state),a}}logout(){return Promise.reject(k(Er))}async silentTokenHelper(t,r){this.performanceClient.addQueueMeasurement(C.SilentIframeClientTokenHelper,r.correlationId);const n=await N(this.initializeAuthorizationCodeRequest.bind(this),C.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,r.correlationId)(r),a=await N(t.getAuthCodeUrl.bind(t),C.GetAuthCodeUrl,this.logger,this.performanceClient,r.correlationId)({...r,nativeBroker:rt.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,r.authenticationScheme)}),i=new Zi(t,this.browserStorage,n,this.logger,this.config.system,this.performanceClient),s=await N(i.initiateAuthRequest.bind(i),C.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r.correlationId)(a),l=await N(i.monitorIframeForHash.bind(i),C.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r.correlationId)(s,this.config.system.iframeHashTimeout),u=q.getDeserializedHash(l),g=this.validateAndExtractStateFromHash(u,M.Silent,n.correlationId);if(u.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw k(Ro);const v=new qt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,u.accountId,this.browserStorage,this.correlationId),{userRequestState:w}=We.parseRequestState(this.browserCrypto,g);return N(v.acquireToken.bind(v),C.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,r.correlationId)({...r,state:w,prompt:r.prompt||Pe.NONE}).finally(()=>{this.browserStorage.cleanRequestByState(g)})}return N(i.handleCodeResponseFromHash.bind(i),C.HandleCodeResponseFromHash,this.logger,this.performanceClient,r.correlationId)(l,g,t.authority,this.networkClient)}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Tl extends jt{async acquireToken(t){this.performanceClient.addQueueMeasurement(C.SilentRefreshClientAcquireToken,t.correlationId);const r=await N(this.initializeBaseRequest.bind(this),C.InitializeBaseRequest,this.logger,this.performanceClient,t.correlationId)(t,t.account),n={...t,...r},a=this.initializeServerTelemetryManager(se.acquireTokenSilent_silentFlow),i=await this.createRefreshTokenClient(a,n.authority,n.azureCloudOptions);return this.logger.verbose("Refresh token client created"),N(i.acquireTokenByRefreshToken.bind(i),C.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,t.correlationId)(n).then(s=>s).then(s=>(this.performanceClient.addFields({fromCache:s.fromCache,requestId:s.requestId},t.correlationId),s)).catch(s=>{throw s.setCorrelationId(this.correlationId),a.cacheFailedRequest(s),s})}logout(){return Promise.reject(k(Er))}async createRefreshTokenClient(t,r,n){const a=await N(this.getClientConfiguration.bind(this),C.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(t,r,n);return new pn(a,this.performanceClient)}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class wl{constructor(t,r,n,a){this.isBrowserEnvironment=typeof window!="undefined",this.config=t,this.storage=r,this.logger=n,this.cryptoObj=a}loadExternalTokens(t,r,n){if(this.logger.info("TokenCache - loadExternalTokens called"),!r.id_token)throw k(Ge);const a=ft(r.id_token,Eo);let i,s,l;if(t.account)l=fe.createFromAccountInfo(t.account),i=new Ft(l,this.loadIdToken(r.id_token,l.homeAccountId,t.account.environment,t.account.tenantId),this.loadAccessToken(t,r,l.homeAccountId,t.account.environment,t.account.tenantId,n),this.loadRefreshToken(t,r,l.homeAccountId,t.account.environment));else if(t.authority){const u=be.generateAuthority(t.authority,t.azureCloudOptions),g={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};if(s=new be(u,this.config.system.networkClient,this.storage,g,this.logger),n.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),l=this.loadAccount(a,s,n.clientInfo),i=new Ft(l,this.loadIdToken(r.id_token,l.homeAccountId,s.hostnameAndPort,s.tenant),this.loadAccessToken(t,r,l.homeAccountId,s.hostnameAndPort,s.tenant,n),this.loadRefreshToken(t,r,l.homeAccountId,s.hostnameAndPort));else if(r.client_info)this.logger.trace("TokenCache - homeAccountId from response"),l=this.loadAccount(a,s,r.client_info),i=new Ft(l,this.loadIdToken(r.id_token,l.homeAccountId,s.hostnameAndPort,s.tenant),this.loadAccessToken(t,r,l.homeAccountId,s.hostnameAndPort,s.tenant,n),this.loadRefreshToken(t,r,l.homeAccountId,s.hostnameAndPort));else throw k(Ge)}else throw k(Ge);return this.generateAuthenticationResult(t,a,i,l,s)}loadAccount(t,r,n,a){let i;if(a?i=a:r.authorityType!==void 0&&n&&(i=fe.generateHomeAccountId(n,r.authorityType,this.logger,this.cryptoObj,t)),!i)throw k(Ge);const s=fe.createAccount({homeAccountId:i,idTokenClaims:t,clientInfo:n,environment:r.hostnameAndPort},r);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading account"),this.storage.setAccount(s),s;throw k(Ge)}loadIdToken(t,r,n,a){const i=et.createIdTokenEntity(r,n,t,this.config.auth.clientId,a);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(i),i;throw k(Ge)}loadAccessToken(t,r,n,a,i,s){if(!r.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!r.expires_in||!s.extendedExpiresOn)throw k(Ge);const l=new ge(t.scopes).printScopes(),u=s.expiresOn||r.expires_in+new Date().getTime()/1e3,g=s.extendedExpiresOn,v=tt.createAccessTokenEntity(n,a,r.access_token,this.config.auth.clientId,i,l,u,g,this.cryptoObj);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(v),v;throw k(Ge)}loadRefreshToken(t,r,n,a){if(!r.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;const i=ht.createRefreshTokenEntity(n,a,r.refresh_token,this.config.auth.clientId);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(i),i;throw k(Ge)}generateAuthenticationResult(t,r,n,a,i){var E,R;let s=b.EMPTY_STRING,l=[],u=null,g;n!=null&&n.accessToken&&(s=n.accessToken.secret,l=ge.fromString(n.accessToken.target).asArray(),u=new Date(Number(n.accessToken.expiresOn)*1e3),g=new Date(Number(n.accessToken.extendedExpiresOn)*1e3));const v=r.oid||r.sub||b.EMPTY_STRING,w=r.tid||b.EMPTY_STRING;return{authority:i?i.canonicalAuthority:b.EMPTY_STRING,uniqueId:v,tenantId:w,scopes:l,account:a.getAccountInfo(),idToken:((E=n.idToken)==null?void 0:E.secret)||"",idTokenClaims:r||{},accessToken:s,fromCache:!0,expiresOn:u,correlationId:t.correlationId||b.EMPTY_STRING,requestId:b.EMPTY_STRING,extExpiresOn:g,familyId:b.EMPTY_STRING,tokenType:((R=n==null?void 0:n.accessToken)==null?void 0:R.tokenType)||b.EMPTY_STRING,state:b.EMPTY_STRING,cloudGraphHostName:a.cloudGraphHostName||b.EMPTY_STRING,msGraphHost:a.msGraphHost||b.EMPTY_STRING,code:void 0,fromNativeBroker:!1}}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class _l extends si{constructor(t){super(t),this.includeRedirectUri=!1}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class Al extends jt{constructor(t,r,n,a,i,s,l,u,g,v){super(t,r,n,a,i,s,u,g,v),this.apiId=l}async acquireToken(t){if(!t.code)throw k(Ni);const r=await N(this.initializeAuthorizationRequest.bind(this),C.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,t.correlationId)(t,M.Silent);this.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||b.EMPTY_STRING,r.account||null);const n=this.initializeServerTelemetryManager(this.apiId);try{const a={...r,code:t.code},i=await N(this.getClientConfiguration.bind(this),C.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,t.correlationId)(n,r.authority),s=new _l(i);this.logger.verbose("Auth code client created");const l=new Zi(s,this.browserStorage,a,this.logger,this.config.system,this.performanceClient);return N(l.handleCodeResponseFromServer.bind(l),C.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)({code:t.code,msgraph_host:t.msGraphHost,cloud_graph_host_name:t.cloudGraphHostName,cloud_instance_host_name:t.cloudInstanceHostName},r.state,s.authority,this.networkClient,!1)}catch(a){throw a instanceof he&&(a.setCorrelationId(this.correlationId),n.cacheFailedRequest(a)),this.browserStorage.cleanRequestByState(r.state),a}}logout(){return Promise.reject(k(Er))}}/*! @azure/msal-browser v3.2.0 2023-10-05 */class kr{constructor(t){this.atsAsyncMeasurement=void 0,this.operatingContext=t,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=t.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new $t(this.logger,this.performanceClient):ir,this.eventHandler=new nl(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new Cn(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger):rl(this.config.auth.clientId,this.logger);const r={cacheLocation:Ce.MemoryStorage,temporaryCacheLocation:Ce.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Cn(this.config.auth.clientId,r,this.browserCrypto,this.logger),this.tokenCache=new wl(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(t){const r=new kr(t);return await r.initialize(),r}trackPageVisibility(){!this.atsAsyncMeasurement||(this.logger.info("Perf: Visibility change detected"),this.atsAsyncMeasurement.increment({visibilityChangeCount:1}))}async initialize(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}const t=this.config.system.allowNativeBroker,r=this.performanceClient.startMeasurement(C.InitializeClientApplication);if(this.eventHandler.emitEvent(Y.INITIALIZE_START),t)try{this.nativeExtensionProvider=await rt.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(n){this.logger.verbose(n)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await N(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),C.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient)(this.performanceClient)),this.initialized=!0,this.eventHandler.emitEvent(Y.INITIALIZE_END),r.end({allowNativeBroker:t,success:!0})}async handleRedirectPromise(t){var a;this.logger.verbose("handleRedirectPromise called"),ce.blockAPICallsBeforeInitialize(this.initialized);let r=t;if(((a=this.config.auth.OIDCOptions)==null?void 0:a.serverResponseType)===ko.QUERY){const i=window.location.href;r=q.parseQueryServerResponse(i)}const n=this.getAllAccounts();if(this.isBrowserEnvironment){const i=r||b.EMPTY_STRING;let s=this.redirectResponse.get(i);if(typeof s=="undefined"){this.eventHandler.emitEvent(Y.HANDLE_REDIRECT_START,M.Redirect),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise");const l=this.browserStorage.getCachedNativeRequest();let u;if(l&&rt.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!r)this.logger.trace("handleRedirectPromise - acquiring token from native platform"),u=new qt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,se.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,l.accountId,this.nativeInternalStorage,l.correlationId).handleRedirectPromise();else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const g=this.browserStorage.getTemporaryCache(re.CORRELATION_ID,!0)||b.EMPTY_STRING;u=this.createRedirectClient(g).handleRedirectPromise(r)}s=u.then(g=>(g&&(n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Y.LOGIN_SUCCESS,M.Redirect,g),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_SUCCESS,M.Redirect,g),this.logger.verbose("handleRedirectResponse returned result, acquire token success"))),this.eventHandler.emitEvent(Y.HANDLE_REDIRECT_END,M.Redirect),g)).catch(g=>{throw n.length>0?this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_FAILURE,M.Redirect,null,g):this.eventHandler.emitEvent(Y.LOGIN_FAILURE,M.Redirect,null,g),this.eventHandler.emitEvent(Y.HANDLE_REDIRECT_END,M.Redirect),g}),this.redirectResponse.set(i,s)}else this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call");return s}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async acquireTokenRedirect(t){const r=this.getRequestCorrelationId(t);this.logger.verbose("acquireTokenRedirect called",r),this.preflightBrowserEnvironmentCheck(M.Redirect);const n=this.getAllAccounts().length>0;n?this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_START,M.Redirect,t):this.eventHandler.emitEvent(Y.LOGIN_START,M.Redirect,t);let a;return this.nativeExtensionProvider&&this.canUseNative(t)?a=new qt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,se.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(t),this.nativeInternalStorage,t.correlationId).acquireTokenRedirect(t).catch(s=>{if(s instanceof it&&Lt(s))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t.correlationId).acquireToken(t);if(s instanceof nt)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t.correlationId).acquireToken(t);throw this.getBrowserStorage().setInteractionInProgress(!1),s}):a=this.createRedirectClient(t.correlationId).acquireToken(t),a.catch(i=>{throw n?this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_FAILURE,M.Redirect,null,i):this.eventHandler.emitEvent(Y.LOGIN_FAILURE,M.Redirect,null,i),i})}acquireTokenPopup(t){const r=this.getRequestCorrelationId(t),n=this.performanceClient.startMeasurement(C.AcquireTokenPopup,r);try{this.logger.verbose("acquireTokenPopup called",r),this.preflightBrowserEnvironmentCheck(M.Popup)}catch(s){return Promise.reject(s)}const a=this.getAllAccounts();a.length>0?this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_START,M.Popup,t):this.eventHandler.emitEvent(Y.LOGIN_START,M.Popup,t);let i;return this.canUseNative(t)?i=this.acquireTokenNative(t,se.acquireTokenPopup).then(s=>(this.getBrowserStorage().setInteractionInProgress(!1),n.end({success:!0,isNativeBroker:!0,requestId:s.requestId}),s)).catch(s=>{if(s instanceof it&&Lt(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(t.correlationId).acquireToken(t);if(s instanceof nt)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t.correlationId).acquireToken(t);throw this.getBrowserStorage().setInteractionInProgress(!1),s}):i=this.createPopupClient(t.correlationId).acquireToken(t),i.then(s=>(a.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Y.LOGIN_SUCCESS,M.Popup,s):this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_SUCCESS,M.Popup,s),n.add({accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length}),n.end({success:!0,requestId:s.requestId}),s)).catch(s=>(a.length>0?this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_FAILURE,M.Popup,null,s):this.eventHandler.emitEvent(Y.LOGIN_FAILURE,M.Popup,null,s),n.end({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){const t=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;!t||(this.logger.info("Perf: Visibility change detected in ",t.event.name),t.increment({visibilityChangeCount:1}))}async ssoSilent(t){var i;const r=this.getRequestCorrelationId(t),n={...t,prompt:t.prompt,correlationId:r};this.preflightBrowserEnvironmentCheck(M.Silent),this.ssoSilentMeasurement=this.performanceClient.startMeasurement(C.SsoSilent,r),(i=this.ssoSilentMeasurement)==null||i.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",r),this.eventHandler.emitEvent(Y.SSO_SILENT_START,M.Silent,n);let a;return this.canUseNative(n)?a=this.acquireTokenNative(n,se.ssoSilent).catch(s=>{if(s instanceof it&&Lt(s))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(n.correlationId).acquireToken(n);throw s}):a=this.createSilentIframeClient(n.correlationId).acquireToken(n),a.then(s=>{var l,u;return this.eventHandler.emitEvent(Y.SSO_SILENT_SUCCESS,M.Silent,s),(l=this.ssoSilentMeasurement)==null||l.add({accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length}),(u=this.ssoSilentMeasurement)==null||u.end({success:!0,isNativeBroker:s.fromNativeBroker,requestId:s.requestId}),s}).catch(s=>{var l;throw this.eventHandler.emitEvent(Y.SSO_SILENT_FAILURE,M.Silent,null,s),(l=this.ssoSilentMeasurement)==null||l.end({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(t){const r=this.getRequestCorrelationId(t);this.preflightBrowserEnvironmentCheck(M.Silent),this.logger.trace("acquireTokenByCode called",r),this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_BY_CODE_START,M.Silent,t);const n=this.performanceClient.startMeasurement(C.AcquireTokenByCode,t.correlationId);try{if(t.code&&t.nativeAccountId)throw k(xi);if(t.code){const a=t.code;let i=this.hybridAuthCodeResponses.get(a);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t.correlationId),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",r),i=this.acquireTokenByCodeAsync({...t,correlationId:r}).then(s=>(this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_BY_CODE_SUCCESS,M.Silent,s),this.hybridAuthCodeResponses.delete(a),n.add({accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length}),n.end({success:!0,isNativeBroker:s.fromNativeBroker,requestId:s.requestId}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(a),this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_BY_CODE_FAILURE,M.Silent,null,s),n.end({errorCode:s.errorCode,subErrorCode:s.subError,success:!1}),s}),this.hybridAuthCodeResponses.set(a,i)),i}else if(t.nativeAccountId){if(this.canUseNative(t,t.nativeAccountId))return this.acquireTokenNative(t,se.acquireTokenByCode,t.nativeAccountId).catch(a=>{throw a instanceof it&&Lt(a)&&(this.nativeExtensionProvider=void 0),a});throw k(Di)}else throw k(Oi)}catch(a){throw this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_BY_CODE_FAILURE,M.Silent,null,a),n.end({errorCode:a instanceof he&&a.errorCode||void 0,subErrorCode:a instanceof he&&a.subError||void 0,success:!1}),a}}async acquireTokenByCodeAsync(t){var a;return this.logger.trace("acquireTokenByCodeAsync called",t.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(C.AcquireTokenByCodeAsync,t.correlationId),(a=this.acquireTokenByCodeAsyncMeasurement)==null||a.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(t.correlationId).acquireToken(t).then(i=>{var s;return(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,requestId:i.requestId}),i}).catch(i=>{var s;throw(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({errorCode:i.errorCode,subErrorCode:i.subError,success:!1}),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(t,r,n){switch(this.performanceClient.addQueueMeasurement(C.AcquireTokenFromCache,r.correlationId),n.cacheLookupPolicy){case Fe.Default:case Fe.AccessToken:case Fe.AccessTokenAndRefreshToken:return N(t.acquireToken.bind(t),C.SilentCacheClientAcquireToken,this.logger,this.performanceClient,r.correlationId)(r);default:throw I(Xe)}}async acquireTokenByRefreshToken(t,r){switch(this.performanceClient.addQueueMeasurement(C.AcquireTokenByRefreshToken,t.correlationId),r.cacheLookupPolicy){case Fe.Default:case Fe.AccessTokenAndRefreshToken:case Fe.RefreshToken:case Fe.RefreshTokenAndNetwork:const n=this.createSilentRefreshClient(t.correlationId);return N(n.acquireToken.bind(n),C.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(t);default:throw I(Xe)}}async acquireTokenBySilentIframe(t){this.performanceClient.addQueueMeasurement(C.AcquireTokenBySilentIframe,t.correlationId);const r=this.createSilentIframeClient(t.correlationId);return N(r.acquireToken.bind(r),C.SilentIframeClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(t)}async logout(t){const r=this.getRequestCorrelationId(t);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",r),this.logoutRedirect({correlationId:r,...t})}async logoutRedirect(t){const r=this.getRequestCorrelationId(t);return this.preflightBrowserEnvironmentCheck(M.Redirect),this.createRedirectClient(r).logout(t)}logoutPopup(t){try{const r=this.getRequestCorrelationId(t);return this.preflightBrowserEnvironmentCheck(M.Popup),this.createPopupClient(r).logout(t)}catch(r){return Promise.reject(r)}}async clearCache(t){const r=this.getRequestCorrelationId(t);return this.createSilentCacheClient(r).logout(t)}getAllAccounts(t){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts(t):[]}getAccount(t){if(this.logger.trace("getAccount called"),Object.keys(t).length===0)return this.logger.warning("getAccount: No accountFilter provided"),null;const r=this.browserStorage.getAccountInfoFilteredBy(t);return r?(this.logger.verbose("getAccount: Account matching provided filter found, returning"),r):(this.logger.verbose("getAccount: No matching account found, returning null"),null)}getAccountByUsername(t){if(this.logger.trace("getAccountByUsername called"),!t)return this.logger.warning("getAccountByUsername: No username provided"),null;const r=this.browserStorage.getAccountInfoFilteredBy({username:t});return r?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),r):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null)}getAccountByHomeId(t){if(this.logger.trace("getAccountByHomeId called"),!t)return this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:t});return r?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),r):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null)}getAccountByLocalId(t){if(this.logger.trace("getAccountByLocalId called"),!t)return this.logger.warning("getAccountByLocalId: No localAccountId provided"),null;const r=this.browserStorage.getAccountInfoFilteredBy({localAccountId:t});return r?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),r):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null)}setActiveAccount(t){this.browserStorage.setActiveAccount(t)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(t,r){this.logger.verbose("hydrateCache called");const n=fe.createFromAccountInfo(t.account,t.cloudGraphHostName,t.msGraphHost);return this.browserStorage.setAccount(n),t.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(t,r)):this.browserStorage.hydrateCache(t,r)}preflightBrowserEnvironmentCheck(t,r=!1){if(this.logger.verbose("preflightBrowserEnvironmentCheck started"),ce.blockNonBrowserEnvironment(this.isBrowserEnvironment),ce.blockRedirectInIframe(t,this.config.system.allowRedirectInIframe),ce.blockReloadInHiddenIframes(),ce.blockAcquireTokenInPopups(),ce.blockAPICallsBeforeInitialize(this.initialized),t===M.Redirect&&this.config.cache.cacheLocation===Ce.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw Vi(ji);(t===M.Redirect||t===M.Popup)&&this.preflightInteractiveRequest(!r)}preflightInteractiveRequest(t){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),ce.blockReloadInHiddenIframes(),t&&this.getBrowserStorage().setInteractionInProgress(!0)}async acquireTokenNative(t,r,n){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw k(Ro);return new qt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,r,this.performanceClient,this.nativeExtensionProvider,n||this.getNativeAccountId(t),this.nativeInternalStorage,t.correlationId).acquireToken(t)}canUseNative(t,r){if(this.logger.trace("canUseNative called"),!rt.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,t.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(t.prompt)switch(t.prompt){case Pe.NONE:case Pe.CONSENT:case Pe.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${t.prompt} is not compatible with native flow, returning false`),!1}return!r&&!this.getNativeAccountId(t)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(t){const r=t.account||this.browserStorage.getAccountInfoByHints(t.loginHint,t.sid)||this.getActiveAccount();return r&&r.nativeAccountId||""}createPopupClient(t){return new vl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)}createRedirectClient(t){return new yl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)}createSilentIframeClient(t){return new Cl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,se.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)}createSilentCacheClient(t){return new Xi(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,t)}createSilentRefreshClient(t){return new Tl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,t)}createSilentAuthCodeClient(t){return new Al(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,se.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,t)}addEventCallback(t){return this.eventHandler.addEventCallback(t)}removeEventCallback(t){this.eventHandler.removeEventCallback(t)}addPerformanceCallback(t){return this.performanceClient.addPerformanceCallback(t)}removePerformanceCallback(t){return this.performanceClient.removePerformanceCallback(t)}enableAccountStorageEvents(){this.eventHandler.enableAccountStorageEvents()}disableAccountStorageEvents(){this.eventHandler.disableAccountStorageEvents()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(t){this.logger=t}initializeWrapperLibrary(t,r){this.browserStorage.setWrapperMetadata(t,r)}setNavigationClient(t){this.navigationClient=t}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}getBrowserStorage(){return this.browserStorage}isBrowserEnv(){return this.isBrowserEnvironment}getEventHandler(){return this.eventHandler}getRequestCorrelationId(t){return t!=null&&t.correlationId?t.correlationId:this.isBrowserEnvironment?bt():b.EMPTY_STRING}async loginRedirect(t){const r=this.getRequestCorrelationId(t);return this.logger.verbose("loginRedirect called",r),this.acquireTokenRedirect({correlationId:r,...t||Aa})}loginPopup(t){const r=this.getRequestCorrelationId(t);return this.logger.verbose("loginPopup called",r),this.acquireTokenPopup({correlationId:r,...t||Aa})}async acquireTokenSilent(t){const r=this.getRequestCorrelationId(t),n=this.performanceClient.startMeasurement(C.AcquireTokenSilent,r);n.add({cacheLookupPolicy:t.cacheLookupPolicy}),this.preflightBrowserEnvironmentCheck(M.Silent),this.logger.verbose("acquireTokenSilent called",r);const a=t.account||this.getActiveAccount();if(!a)throw k(Ii);const i={clientId:this.config.auth.clientId,authority:t.authority||b.EMPTY_STRING,scopes:t.scopes,homeAccountIdentifier:a.homeAccountId,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid},s=JSON.stringify(i),l=this.activeSilentTokenRequests.get(s);if(typeof l=="undefined"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r);const u=N(this.acquireTokenSilentAsync.bind(this),C.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...t,correlationId:r},a).then(g=>(this.activeSilentTokenRequests.delete(s),n.add({accessTokenSize:g.accessToken.length,idTokenSize:g.idToken.length}),n.end({success:!0,fromCache:g.fromCache,isNativeBroker:g.fromNativeBroker,cacheLookupPolicy:t.cacheLookupPolicy,requestId:g.requestId}),g)).catch(g=>{throw this.activeSilentTokenRequests.delete(s),n.end({errorCode:g.errorCode,subErrorCode:g.subError,success:!1}),g});return this.activeSilentTokenRequests.set(s,u),u}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),n.discard(),l}async acquireTokenSilentAsync(t,r){var a;this.performanceClient.addQueueMeasurement(C.AcquireTokenSilentAsync,t.correlationId),this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_START,M.Silent,t),this.atsAsyncMeasurement=this.performanceClient.startMeasurement(C.AcquireTokenSilentAsync,t.correlationId),(a=this.atsAsyncMeasurement)==null||a.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibility);let n;if(rt.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,t.authenticationScheme)&&r.nativeAccountId){this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform");const i={...t,account:r};n=this.acquireTokenNative(i,se.acquireTokenSilent_silentFlow).catch(async s=>{if(s instanceof it&&Lt(s))return this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,this.createSilentIframeClient(t.correlationId).acquireToken(t);throw s})}else{this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow");const i=this.createSilentCacheClient(t.correlationId),s=await N(i.initializeSilentRequest.bind(i),C.InitializeSilentRequest,this.logger,this.performanceClient,t.correlationId)(t,r),l={...t,cacheLookupPolicy:t.cacheLookupPolicy||Fe.Default};n=N(this.acquireTokenFromCache.bind(this),C.AcquireTokenFromCache,this.logger,this.performanceClient,s.correlationId)(i,s,l).catch(u=>{if(l.cacheLookupPolicy===Fe.AccessToken)throw u;return ce.blockReloadInHiddenIframes(),this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_NETWORK_START,M.Silent,s),N(this.acquireTokenByRefreshToken.bind(this),C.AcquireTokenByRefreshToken,this.logger,this.performanceClient,s.correlationId)(s,l).catch(g=>{const v=g instanceof ct,w=g instanceof nt,E=g.errorCode===Ve.INVALID_GRANT_ERROR;if((!v||!E||w||l.cacheLookupPolicy===Fe.AccessTokenAndRefreshToken||l.cacheLookupPolicy===Fe.RefreshToken)&&l.cacheLookupPolicy!==Fe.Skip)throw g;return this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",t.correlationId),N(this.acquireTokenBySilentIframe.bind(this),C.AcquireTokenBySilentIframe,this.logger,this.performanceClient,s.correlationId)(s)})})}return n.then(i=>{var s;return this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_SUCCESS,M.Silent,i),(s=this.atsAsyncMeasurement)==null||s.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,requestId:i.requestId}),i}).catch(i=>{var s;throw this.eventHandler.emitEvent(Y.ACQUIRE_TOKEN_FAILURE,M.Silent,null,i),(s=this.atsAsyncMeasurement)==null||s.end({errorCode:i.errorCode,subErrorCode:i.subError,success:!1}),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibility)})}}var Ra=Object.freeze(Object.defineProperty({__proto__:null,StandardController:kr},Symbol.toStringTag,{value:"Module"}));/*! @azure/msal-browser v3.2.0 2023-10-05 */class Vn{static async createPublicClientApplication(t){const n=await new Yc(t).createController();return new Vn(t,n)}constructor(t,r){if(r)this.controller=r;else{const n=new kt(t);this.controller=new kr(n)}}async initialize(){return this.controller.initialize()}async acquireTokenPopup(t){return this.controller.acquireTokenPopup(t)}acquireTokenRedirect(t){return this.controller.acquireTokenRedirect(t)}acquireTokenSilent(t){return this.controller.acquireTokenSilent(t)}acquireTokenByCode(t){return this.controller.acquireTokenByCode(t)}addEventCallback(t){return this.controller.addEventCallback(t)}removeEventCallback(t){return this.controller.removeEventCallback(t)}addPerformanceCallback(t){return this.controller.addPerformanceCallback(t)}removePerformanceCallback(t){return this.controller.removePerformanceCallback(t)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(t){return this.controller.getAccount(t)}getAccountByHomeId(t){return this.controller.getAccountByHomeId(t)}getAccountByLocalId(t){return this.controller.getAccountByLocalId(t)}getAccountByUsername(t){return this.controller.getAccountByUsername(t)}getAllAccounts(t){return this.controller.getAllAccounts(t)}handleRedirectPromise(t){return this.controller.handleRedirectPromise(t)}loginPopup(t){return this.controller.loginPopup(t)}loginRedirect(t){return this.controller.loginRedirect(t)}logout(t){return this.controller.logout(t)}logoutRedirect(t){return this.controller.logoutRedirect(t)}logoutPopup(t){return this.controller.logoutPopup(t)}ssoSilent(t){return this.controller.ssoSilent(t)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(t){this.controller.setLogger(t)}setActiveAccount(t){this.controller.setActiveAccount(t)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(t,r){return this.controller.initializeWrapperLibrary(t,r)}setNavigationClient(t){this.controller.setNavigationClient(t)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(t,r){return this.controller.hydrateCache(t,r)}clearCache(t){return this.controller.clearCache(t)}}class Ht{constructor(){this.loginRequest={scopes:["User.ReadWrite"]},this.accountId="",this.myMSALObj=null,this.msalConfig={auth:{clientId:"a29bcf0f-e889-4181-b2d5-62d630d502ee",authority:"https://login.microsoftonline.com/266e577b-cdf0-42b2-9523-4dac3f7f4bc7",redirectUri:window.location.origin,postLogoutRedirectUri:window.location.origin+"/sing-out"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{allowNativeBroker:!0}},this.myMSALObj=new Vn(this.msalConfig),this.logoutRequest={account:this.myMSALObj.getAccountByHomeId(this.accountId),mainWindowRedirectUri:window.location.origin+"/sing-out"}}}A(Ht,"loginRequest"),A(Ht,"myMSALObj"),A(Ht,"msalConfig"),A(Ht,"myMSALObj"),A(Ht,"accountId");const V=class{constructor(){V.auth=new Qs,V._msa=new Ht,V.name="MetroPlus",V.version=" v2.0.0",V.auth.isAuthenticated()&&(V.userName=V.auth.user.user)}static hasProfile(t){return V.auth.hasProfile(t)}static isAuthenticated(){return V.auth.isAuthenticated()||V.logout(),V.setTitle(),V.auth.isAuthenticated()}static isPublic(){return V.auth.isAuthenticated()&&V.getInicio(),V.setTitle(),!V.auth.isAuthenticated()}static logout(){return o.route.set("/")}static async _logoutMsi(){await V._msa.myMSALObj.initialize(),await V._msa.myMSALObj.logoutPopup(V._msa.logoutRequest)}static getInicio(){return o.route.set("/inicio")}static login(t){V.auth.login({usrToken:t}).then(r=>{r?(console.log("Login exitoso"),V.getInicio()):(o.redraw(),console.log("Login fallido"))})}static autorizarApp(t,r){let n=localStorage.userToken;localStorage.clear(),localStorage.setItem("userToken",n),localStorage.setItem("authToken"+r,JSON.stringify({usr:t,app:r})),r=="Flebotomista"&&o.route.set("/laboratorio/flebotomista")}static async loginMSA(){await V._msa.myMSALObj.initialize(),V._msa.myMSALObj.loginPopup(V._msa.loginRequest).then(t=>{V._msa.accountId=t.account.homeAccountId,console.log(1,t),V.login(t.idToken)}).catch(function(t){console.log(t)})}static autorizarMSA(t){localStorage.getItem("authToken"+t)==null&&V._msa.myMSALObj.loginPopup(V._msa.loginRequest).then(r=>{V.autorizarApp("mchang@hmetro.med.ec",t)}).catch(function(r){console.log(r)})}static loader(){return[o("div.text-center.mg-t-300",o(".spinner-grow.text-dark[role='status']",o("span.sr-only","Cargando...")))]}oncreate(){document.title=V.title+" | "+V.name+V.version}static setTitle(t){V.title=t,document.title=V.title+" | "+V.name+V.version}view(){}};let y=V;A(y,"title"),A(y,"name"),A(y,"version"),A(y,"offline"),A(y,"public"),A(y,"userName"),A(y,"auth",null),A(y,"usrToken",null),A(y,"_msa",null),A(y,"messageError",null);class Il extends y{constructor(){super(),y.isAuthenticated(),y.title="Admisiones"}page(){return o("h1",y.title+" Hospital Metropolitano")}view(){return[this.page()]}}class Rr{constructor(){A(this,"mas",[])}loop(){try{console.log("hhhhhhh")}catch{}finally{setTimeout(()=>{this.loop()},5e3)}}_offline(){console.log("offline"),console.log("Ud esta desconectado."),document.body.classList.add("control"),this.offline=!0}_online(){console.log("online"),document.body.classList.remove("control"),this.offline=!1}oncreate(t){}view(){return[o("header.navbar.navbar-header.navbar-header-fixed",{onclick:t=>{}},[this.offline?[o("div.wd-100p.alert.alert-solid.alert-warning.pd-15.mg-0.bd-0.rounded-0[id='alertConnect'][role='alert']",[o("div",o(o.route.Link,{href:"/",class:"df-logo"},["Metro",o("span","Plus+")])),,o(".spinner-grow.spinner-grow-sm[role='status']",o("span.sr-only","Procesando...")),o("b","Tu conexi\xF3n a Internet es deficiente. Intentaremos conectarnos en unos minutos.")])]:[o("div.navbar-brand",o(o.route.Link,{href:"/",class:"df-logo "},["Metro",o("span","Plus+")]))]])]}}A(Rr,"offline");class El extends y{constructor(){super(),y.title="Inicia Sesi\xF3n",this.view=this.page}page(){return[o("div.content.content-fixed.content-auth",o("div.container",o("div.media.align-items-stretch.justify-content-center.ht-100p.pos-relative",[o("div.mg-t-55.pd-50.media-body.align-items-center.d-none.d-lg-flex",[o("div.card.card-help.mg-2",[o("div.card-body",[o("div.tx-20.lh-0",{style:{color:"#325a98"}},o("i.fas.fa-first-aid"))])]),o("div.card.card-help.mg-2",[o("div.card-body",[o("div.tx-20.lh-0",{style:{color:"#325a98"}},o("i.fas.fa-user-md"))])]),o("div.card.card-help.mg-2",[o("div.card-body",[o("div.tx-20.lh-0",{style:{color:"#325a98"}},o("i.fas.fa-file-prescription"))])]),o("div.card.card-help.mg-2",[o("div.card-body",[o("div.tx-20.lh-0",{style:{color:"#325a98"}},o("i.fas.fa-microscope"))])]),o("div.card.card-help.mg-2",[o("div.card-body",[o("div.tx-20.lh-0",{style:{color:"#325a98"}},o("i.fas.fa-procedures"))])]),o("div.card.card-help.mg-2",[o("div.card-body",[o("div.tx-20.lh-0",{style:{color:"#325a98"}},o("i.fas.fa-h-square"))])]),o("div.card.card-help.mg-2",[o("div.card-body",[o("div.tx-20.lh-0",{style:{color:"#325a98"}},o("i.fas.fa-heartbeat"))])]),o("div.card.card-help.mg-2",[o("div.card-body",[o("div.tx-20.lh-0",{style:{color:"#325a98"}},o("i.fas.fa-notes-medical"))])]),o("div.card.card-help.mg-2",[o("div.card-body",[o("div.tx-20.lh-0",{style:{color:"#325a98"}},o("i.fas.fa-hospital"))])])]),o("div.sign-wrapper.mg-lg-l-50.mg-xl-l-60.mg-t-10",o("div.wd-100p",[o("br"),o("h3.tx-color-01.mg-t-100",y.name+y.version.substring(0,y.version.length-2)),o("p.tx-color-03.tx-15.mg-t-10.mg-b-10","\xA1Bienvenido! Por favor, inicia sesi\xF3n para continuar."),o(".tx-semibold.alert.alert-solid.alert-danger[role='alert']",{class:y.messageError==null?"d-none":"op-9"},y.messageError),o("button.btn.btn-brand-02.btn-block.tx-semibold",{onclick:()=>{y.loginMSA()}},[o("img.mg-r-2[src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHYAAAB2CAYAAAAdp2cRAAAABHNCSVQICAgIfAhkiAAAAZ5JREFUeJzt17FNHFEYRtE3qxUJkmtw5hBRASKhBMf04cA4cEwLWwfRVgCiA2qw5MCSvc85It0Z6eqc8J/ke7rRLL+/XT+M3e77qDqdflz+fHl4f358+To3WLOa3dYDOA9ho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4QFAIDl6unX/Rjzfush57McXu8+Hd5f/zx/Oa6/ZT37MefnZRk3Ww85lznn8eMvS/bNY/iPzRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2aj9OF4e5/3vcesjZ/Nu/fXTeLfN25SWr+g/+GiEp5JSeMAAAAABJRU5ErkJggg=='][alt='Microsoft'][width='5%'][height='5%']")," Ingreso Seguro"]),o("div.text-center.tx-gray-500.mg-t-20",y.name+y.version),o("div.text-center.tx-gray-500","Created by Hospital Metropolitano"),o("div.ht-80")]))])))]}}class Sl extends y{constructor(){super(),y.isPublic()&&(y.title="Inicia Sesi\xF3n",this.view=this.page)}vForm(){return o(El)}vHeader(){return o(Rr)}page(){return[this.vHeader(),this.vForm()]}}class Qn{view(t){return[o("div.navbar-right",{oncreate:()=>{kl()}},[o("div.dropdown.dropdown-profile",[o("a.dropdown-link[href=''][data-toggle='dropdown'][data-display='static']",o("div.d-inline.tx-color-03.tx-14.tx-semibold.mg-b-0.mg-r-6",t.attrs.userName),o("div.avatar.avatar-sm.tx-color-03",o("i[data-feather='user']"))),o("div.dropdown-menu.dropdown-menu-right.tx-13",[o("div.tx-18.tx-semibold.mg-b-0",t.attrs.userName),o("p.mg-b-25.tx-12.tx-color-03",["Usuario"]),o("div.dropdown-divider"),o("button.btn.btn-xs.btn-block.btn-light.tx-inverse",{onclick:r=>{o.route.set("/salir")}},[o("i[data-feather='log-out']")," Salir "])])]),o("div",[o("a.tx-color-03.tx-semibold[href='/salir'][title='Salir']",o("div.avatar.avatar-sm",o("i[data-feather='log-out']")))])])]}}function kl(){feather.replace(),window.matchMedia("(max-width: 991px)").matches&&new PerfectScrollbar("#navbarMenu",{suppressScrollX:!0});function c(){window.matchMedia("(max-width: 991px)").matches?$("#navbarMenu .active").addClass("show"):$("#navbarMenu .active").removeClass("show")}if(c(),$(window).resize(function(){c()}),$("body").append('<div class="backdrop"></div>'),$(".navbar-menu .with-sub .nav-link").on("click",function(t){t.preventDefault(),$(this).parent().toggleClass("show"),$(this).parent().siblings().removeClass("show"),window.matchMedia("(max-width: 991px)").matches&&psNavbar.update()}),$(document).on("click touchstart",function(t){if(t.stopPropagation(),window.matchMedia("(min-width: 992px)").matches){var r=$(t.target).closest(".navbar-menu .nav-item").length;r||$(".navbar-header .show").removeClass("show")}}),$("#mainMenuClose").on("click",function(t){t.preventDefault(),$("body").removeClass("navbar-nav-show")}),$("#sidebarMenuOpen").on("click",function(t){t.preventDefault(),$("body").addClass("sidebar-show")}),$("#navbarSearch").on("click",function(t){t.preventDefault(),$(".navbar-search").addClass("visible"),$(".backdrop").addClass("show")}),$("#navbarSearchClose").on("click",function(t){t.preventDefault(),$(".navbar-search").removeClass("visible"),$(".backdrop").removeClass("show")}),$("#sidebarMenu").length){const t=new PerfectScrollbar("#sidebarMenu",{suppressScrollX:!0});$(".sidebar-nav .with-sub").on("click",function(r){r.preventDefault(),$(this).parent().toggleClass("show"),t.update()})}$("#mainMenuOpen").on("click touchstart",function(t){t.preventDefault(),$("body").addClass("navbar-nav-show")}),$("#sidebarMenuClose").on("click",function(t){t.preventDefault(),$("body").removeClass("sidebar-show")}),$(document).on("click touchstart",function(t){if(t.stopPropagation(),!$(t.target).closest(".burger-menu").length){var r=$(t.target).closest(".sidebar").length,n=$(t.target).closest(".navbar-menu-wrapper").length;!r&&!n&&($("body").hasClass("navbar-nav-show")?$("body").removeClass("navbar-nav-show"):$("body").removeClass("sidebar-show"))}})}class Rl{constructor(){A(this,"isContent",!1)}view(){return[o("li.bg-primary.wd-100p.nav-item.d-none",o(o.route.Link,{href:"/inicio",class:"nav-link"},[o("i[data-feather='layout']")," Inicio "]))]}}class Ml{view(t){return[t.attrs.profiles.includes("ADMISIONES_METROPLUS")?[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/admisiones']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-folder-open")),o("p.tx-color-03.mg-b-0.tx-semibold","Admisiones")])])]))]:[],t.attrs.profiles.includes("PERFIL_ENDOSCOPIA_METROPLUS")?[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/endoscopia']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-compact-disc")),o("p.tx-color-03.mg-b-0.tx-semibold","Endoscop\xEDa")])])]))]:[],t.attrs.profiles.includes("EMERGENCIA_METROPLUS")?[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/emergencia']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-first-aid")),o("p.tx-color-03.mg-b-0.tx-semibold","Emergencia")])])]))]:[],t.attrs.profiles.includes("FARMACIA_METROPLUS")?[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/farmacia']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-pills")),o("p.tx-color-03.mg-b-0.tx-semibold","Farmacia")])])]))]:[],t.attrs.profiles.includes("PERFIL_IMAGEN_METROPLUS")?[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/imagen']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-file-prescription")),o("p.tx-color-03.mg-b-0.tx-semibold","Imagen")])])]))]:[],t.attrs.profiles.includes("LABORATORIO_METROPLUS")?[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/laboratorio']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-microscope")),o("p.tx-color-03.mg-b-0.tx-semibold","Laboratorio")])])]))]:[],t.attrs.profiles.includes("HOSPITALIZACION_METROPLUS")?[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/hospitalizacion']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-procedures")),o("p.tx-color-03.mg-b-0.tx-semibold","Hospitalizaci\xF3n")])])]))]:[],t.attrs.profiles.includes("BCO_SANGRE_METROPLUS")?[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/bco-sangre']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-burn.tx-55")),o("p.tx-color-03.mg-b-0.tx-semibold","Banco de Sangre")])])]))]:[],t.attrs.profiles.includes("ADM_USUARIOS_METROPLUS")?[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/administracion']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-cog")),o("p.tx-color-03.mg-b-0.tx-semibold","Administraci\xF2n")])])]))]:[],t.attrs.profiles.includes("TR_METROPLUS")?[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/terapia-respiratoria']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-user-md")),o("p.tx-color-03.mg-b-0.tx-semibold","Terapia Respiratoria")])])]))]:[]]}}class Pl extends y{constructor(){super(),y.isAuthenticated()&&(y.setTitle("Inicio"),this.view=this.page)}page(){return[o("header.navbar.navbar-header.navbar-header-fixed",[o("div.navbar-brand",o(o.route.Link,{href:"/",class:"df-logo"},["Metro",o("span","Plus+")])),o(".navbar-menu-wrapper[id='navbarMenu']",[o("div.navbar-menu-header",[o(o.route.Link,{href:"/",class:"df-logo"},["Metro",o("span","Plus+")]),o("a[id='mainMenuClose'][href='']",o("i[data-feather='x']"))]),o("ul.nav.navbar-menu",[o("li.nav-label.pd-l-20.pd-lg-l-25.d-lg-none","Menu"),o(Rl)])]),o(Qn,{userName:y.userName})]),o("div.content.content-components",{},o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-10",y.title+":"),o("div.row.tx-14",[o(Ml,{profiles:y.auth.user.profile})])]))]}}class Nl{view(){return[o("li.nav-item",o(o.route.Link,{href:"/inicio",class:"nav-link"},[o("i[data-feather='layout']")," Inicio "]))]}}class Ue{view(t){return[o("header.navbar.navbar-header.navbar-header-fixed",[o("a.burger-menu[href=''][id='sidebarMenuOpen']",o("i[data-feather='arrow-left']")),o("div.navbar-brand",o(o.route.Link,{href:"/",class:"df-logo"},["Metro",o("span","Plus+")])),o(".navbar-menu-wrapper[id='navbarMenu']",[o("div.navbar-menu-header",[o(o.route.Link,{href:"/",class:"df-logo"},["Metro",o("span","Plus+")]),o("a[id='mainMenuClose'][href='']",o("i[data-feather='x']"))]),o("ul.nav.navbar-menu",[o("li.nav-label.pd-l-20.pd-lg-l-25.d-lg-none","Menu"),o("div.d-lg-none",[o(Nl)])])]),o(Qn,{userName:t.attrs.userName})])]}}class wn{}A(wn,"modulos",[{page:"administracion/metrovirtual",label:"Usuarios MetroVirtual"},{page:"administracion/metroplus",label:"Usuarios MetroPlus"}]);class Ol{view(){if(wn.modulos.length!==0)return[wn.modulos.map(function(t,r,n){return[o(o.route.Link,{href:"/"+t.page,class:Vt.page==t.page?"active":""},[t.label])]})]}}class Vt{oninit(t){Vt.page=t.attrs.page}view(){return[o(".sidebar.sidebar-fixed.sidebar-components[id='sidebarMenu']",[o("div.sidebar-header",[o("a[href=''][id='mainMenuOpen']",o("i[data-feather='menu']")),o("h5","Menu"),o("a[href=''][id='sidebarMenuClose']",o("i[data-feather='x']"))]),o("div.sidebar-body",o("ul.sidebar-nav",[o("li.nav-label.mg-b-15","Administraci\xF3n"),o("li.nav-item.show",[o(o.route.Link,{href:"/administracion",class:"nav-link with-sub"},[o("i[data-feather='layout']")," Administraci\xF3n"]),o("nav.nav",[o(Ol)])])]))])]}}class xl extends y{constructor(){super(),y.isAuthenticated()&&y.hasProfile("ADM_USUARIOS_METROPLUS")&&(y.setTitle("Administraci\xF3n"),this.view=this.page)}vHeader(){return o(Ue,{userName:y.userName})}vMain(){return[o("div.content.content-components",{},o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-10",y.title+":"),o("div.row",[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/administracion/metrovirtual']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-users")),o("p.tx-color-03.mg-b-0.tx-semibold","Usuarios MetroVirtual")])])]))])]))]}vMenu(){return o(Vt)}page(){return[this.vHeader(),this.vMenu(),this.vMain()]}}class Dl extends y{constructor(){super();try{y._logoutMsi()}catch{o.route.set("/")}}view(){}}class we{view(){return[o("div.placeholder-paragraph",[o("div.line"),o("div.line")])]}}class Rt{constructor(t){A(this,"type",0);A(this,"error",null);this.type=t.attrs.type,this.error=t.attrs.error}setFethError(t){return[o("p.tx-danger.pd-0.mg-b-2.mg-t-5",[o("i.fas.fa-exclamation-triangle")," Error:"]),o("p.tx-justify.tx-danger.tx-color-03.mg-b-30","Lo sentimos, no pudimos completar con \xE9xito esta petici\xF3n. Recarga esta p\xE1gina nuevamente. Si el inconveniente persiste comun\xEDcate a nuestra Mesa de Ayuda CONCAS 02 399 8000 Ext: 2020.",o("br"),"HTTP ERROR: "+t.message)]}setLogicError(t){return[o("p.tx-danger.pd-0.mg-b-2",[o("i.fas.fa-exclamation-triangle")," Error:"]),o("p.tx-danger.tx-color-03.mg-b-30","Lo sentimos, no pudimos completar con \xE9xito esta petici\xF3n. Recarga esta p\xE1gina nuevamente. Si el inconveniente persiste comun\xEDcate a nuestra Mesa de Ayuda CONCAS 02 399 8000 Ext: 2020.")]}view(){if(this.type==0)return[this.setLogicError(this.error)];if(this.type==1)return[this.setFethError(this.error)]}}class Qt{constructor(t){A(this,"idTable","");A(this,"dataTable",null);A(this,"arqTable",{});this.idTable=t.attrs.idTable,this.dataTable=t.attrs.dataTable,this.arqTable=t.attrs.arqTable}oncreate(){$.fn.dataTable.ext.errMode="none",this.arqTable.data=this.dataTable;let t=$("#"+this.idTable).DataTable(this.arqTable);return $(".dataTables_length select").select2({minimumResultsForSearch:1/0}),$("#searchField").keyup(function(r){t.search($("#searchField").val()).draw()}),t}view(){if(this.dataTable.length!==null)return[o("div.row",[o("div.col-12",[o("div.table-content.col-12.pd-r-0.pd-l-0.pd-b-20.mg-t-10",[o("div.d-flex.align-items-center.justify-content-between.mg-b-75.mg-t-10",[o("div.d-none")]),o("div.wd-100p.filemgr-content-header",[o("i.fas.fa-search.tx-color-03.mg-r-15"),o("div.search-form",o("input.form-control[type='search'][placeholder=' Buscar'][id='searchField']"))]),o("table.table.table-sm[width='100%']",{id:this.idTable})])])])]}}function Ll(){return{interval:null,seconds:100,isPaused:!1}}const ho={showFilter:!0,showSearch:!0,show:!1,increment(c){c.seconds--,c.seconds==0&&window.location.reload(),o.redraw()},start(c){c.interval=setInterval(ho.increment,1e3,c)},stop(c){c.interval=clearInterval(c.interval)},reset(c){c.seconds=100},toggle(c){c.isPaused?ho.start(c):ho.stop(c),c.isPaused=!c.isPaused}};function Po(){const c=Ll();return ho.start(c),{view(){return[o("div.mg-b-0",[o("div.progress.ht-4.mg-b-0.op-5",o(".progress-bar.bg-primary.[role='progressbar'][aria-valuenow='"+c.seconds+"'][aria-valuemin='0'][aria-valuemax='60']",{oncreate:t=>{t.dom.style.width="100%"},onupdate:t=>{t.dom.style.width=c.seconds+"%"}}))])]},onremove(){ho.stop(c)}}}class Hl extends y{constructor(r){super();A(this,"usuarios",null);A(this,"dataUser",null);A(this,"idUsr",null);A(this,"idFiltro",1);y.isAuthenticated()&&y.hasProfile("ADM_USUARIOS_METROPLUS")&&(y.setTitle("Usuarios MetroVirtual"),this.view=this.page)}oncreate(r){r.attrs.idFiltro!==void 0&&(this.idFiltro=r.attrs.idFiltro),this.fetchData().then(n=>{this.usuarios=n})}onupdate(r){r.attrs.idUsr!==void 0?this.idUsr=r.attrs.idUsr:this.idUsr=null,o.redraw()}vHeader(){return o(Ue,{userName:y.userName})}vMain(){return[o("div.content.content-components",o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/administracion"},["Administraci\xF3n"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-20",y.title+":"),o("div",[this.usuarios!==null&&this.usuarios.status?[o("div.table-content.col-12.pd-r-0.pd-l-0",[o("div.d-flex.align-items-center.justify-content-between.mg-t-10",[o("h5.mg-b-0","Todos los Usuarios:",o("span.badge.bg-litecoin.tx-white.tx-semibold.pd-l-10.pd-r-10.mg-l-5.tx-15",{oncreate:r=>{this.idFiltro==1&&(r.dom.innerHTML="Grp-radius-Medicos"),this.idFiltro==2&&(r.dom.innerHTML="Grp-radius-Residentes")},onupdate:r=>{this.idFiltro==1&&(r.dom.innerHTML="Grp-radius-Medicos"),this.idFiltro==2&&(r.dom.innerHTML="Grp-radius-Residentes")}})),o("div.d-flex.tx-14",[o("div.dropdown.dropleft",[o("div.link-03.lh-0.mg-l-5[id='dropdownMenuButton'][data-toggle='dropdown'][aria-haspopup='true'][aria-expanded='false']",{style:{cursor:"pointer"},title:"Filtrar"},o("i.fas.fa-filter.tx-18.pd-5")),o(".dropdown-menu.tx-13[aria-labelledby='dropdownMenuButton']",[o("h6.dropdown-header.tx-uppercase.tx-12.tx-bold.tx-inverse","FILTROS:"),o(o.route.Link,{class:"dropdown-item",href:"/administracion/metrovirtual/?idFiltro=1",onclick:r=>{this.reloadData(1),this.fetchData().then(n=>{this.usuarios=n})}},["Grp-radius-Medicos"]),o(o.route.Link,{class:"dropdown-item",href:"/administracion/metrovirtual/?idFiltro=2",onclick:r=>{this.reloadData(2),this.fetchData().then(n=>{this.usuarios=n})}},["Grp-radius-Residentes"])])])])])]),this.vTableUsuarios("table-usr",this.usuarios.data,this.arqTable())]:this.usuarios!==null&&(!this.usuarios.status||this.usuarios.status==null)?[o(Rt,{type:this.usuarios.status?0:1,error:this.usuarios})]:[o(we)]])])),o("div.section-nav",{class:this.usuarios!==null?"":"d-none"},[o("label.nav-label",y.title+":"),o("div.mg-t-10.bg-white",{},o("div.mg-t-10.bg-white",o("div.card-header.pd-t-20.pd-b-0.bd-b-0",[o("h6.lh-5.mg-b-5","N\xB0 de Resultados:")]),o("div.card-body.pd-0",[o("div.pd-t-10.pd-b-0.pd-x-20.d-flex.align-items-baseline",[o("h2.tx-normal.tx-rubik.mg-b-0.mg-r-5",this.usuarios!==null?this.usuarios.data.length:0),o("div.tx-14",[o("divv.lh-0.tx-gray-300","Resultado(s)")])])])),o("div.pd-20",[o(Po)]))])]}vMainProfile(){return this.fetchProfile(),[o("div.content.content-components",o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/administracion"},["Administraci\xF3n"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-10",y.title+":"),this.dataUser!==null?[o("div.table-responsive",[o("table.table.table-bordered.table-sm.tx-14",[o("thead",o("tr.bg-litecoin.op-9.tx-white.tx-uppercase",[o("th[scope='col'][colspan='10']","DATOS DEL USUARIO: "+this.dataUser.samaccountname)])),o("tbody",[o("tr",[o("th",{style:{"background-color":"#a8bed6"}},"Nombres Completos:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.sn+" "+this.dataUser.cn),o("th",{style:{"background-color":"#a8bed6"}},"Grupo:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.grupo)]),o("tr",[o("th",{style:{"background-color":"#a8bed6"}},"Correo electr\xF3nico:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.mail),o("th",{style:{"background-color":"#a8bed6"}},"Historial de Actividad:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},o(".tx-12.d-block","Creado: "+this.dataUser.whencreated),o(".tx-12.d-block","Actualizado: "+this.dataUser.whenchanged),o(".tx-12.d-block","\xDAltima Contrase\xF1a: "+this.dataUser.pwdlastset),o(".tx-12.d-block","\xDAltimo Acceso: "+this.dataUser.lastlogontimestamp))])]),o("tbody",[o("tr.d-print-none.bg-litecoin.op-9.tx-white.",[o("th[scope='col'][colspan='10']","OPCIONES DISPONIBLES:")]),o("tr.d-print-none",[o("td[colspan='10']",{style:{"background-color":"#eaeff5"}},o("ul.nav.nav-tabs[id='myTab'][role='tablist']",{},[o("li.nav-item",o("a.nav-link[id='home-tab'][data-toggle='tab'][href='#home'][role='tab'][aria-controls='home'][aria-selected='true']",{style:{color:"#476ba3"}},o("i.fas.fa-file-alt.pd-1.mg-r-2")," HOJA 005")),o("li.nav-item",o("a.nav-link[id='home-muestra'][data-toggle='tab'][href='#muestra'][role='tab'][aria-controls='muestra']",{style:{color:"#476ba3"}},o("i.fas.fa-edit.pd-1.mg-r-2")," TOMA DE MUESTRA ")),o("li.nav-item",o("a.nav-link[id='home-recep'][data-toggle='tab'][href='#recep'][role='tab'][aria-controls='recep']",{style:{color:"#476ba3"}},o("i.fas.fa-inbox.pd-1.mg-r-2")," RECEP. DE MUESTRA ")),o("li.nav-item",o("a.nav-link[id='home-comment'][data-toggle='tab'][href='#comment'][role='tab'][aria-controls='comment']",{style:{color:"#476ba3"}},o("i.fas.fa-inbox.pd-1.mg-r-2")," COMENTARIOS "))]))]),o("tr.d-print-none",[o("td[colspan='10']",o(".tab-content.bd.bd-gray-300.bd-t-0[id='myTab']",[o(".tab-pane.fade[id='home'][role='tabpanel'][aria-labelledby='home-tab']",[]),o(".tab-pane.fade[id='muestra'][role='tabpanel'][aria-labelledby='home-muestra']",[]),o(".tab-pane.fade[id='recep'][role='tabpanel'][aria-labelledby='home-recep']",[]),o(".tab-pane.fade[id='comment'][role='tabpanel'][aria-labelledby='home-comment']",[o("p.mg-5",[o("span.badge.badge-light.wd-100p.tx-14","Observaciones"),o("textarea.form-control.mg-t-5[rows='5'][placeholder='Observaciones']",{}),o("div.mg-0.mg-t-5.text-right",[o("button.btn.btn-xs.btn-primary.mg-l-2.tx-semibold[type='button']",{onclick:function(){}},[o("i.fas.fa-paper-plane.mg-r-5")],"Guardar")]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("p.mg-5",[o("span.badge.badge-light.wd-100p.tx-14","Historial de Observaciones"),o("table.table.table-sm[id='table-observaciones'][width='100%']")])])]))])])])])]:[o(we)]]))]}vMenu(){return o(Vt,{page:"administracion/metrovirtual"})}reloadData(r){this.usuarios=null,this.idFiltro=r}fetchProfile(){let r=this;if(r.usuarios!==null&&r.usuarios.status)return r.usuarios.data.map(function(n,a,i){r.idUsr==n.samaccountname&&(r.dataUser=n)})}fetchData(){let r="?idFiltro="+this.idFiltro;return o.request({method:"GET",url:Be.apiUrl+"/v2/usuarios/metroplus"+r,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:localStorage.getItem("userToken")}}).then(function(n){return n}).catch(function(n){return{status:null,message:n}})}arqTable(){return{data:null,dom:"ltp",language:{searchPlaceholder:"Buscar...",sSearch:"",lengthMenu:"Mostrar _MENU_ registros por p\xE1gina",sProcessing:"Procesando...",sZeroRecords:"Todav\xEDa no tienes resultados disponibles.",sEmptyTable:"Ning\xFAn dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"\xDAltimo",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},cache:!1,destroy:!0,columns:[{title:"N\xB0 : "},{title:"Usuario AD:"},{title:"Nombres:"},{title:"Apellidos:"},{title:"E-mail:"},{title:"Opciones:"}],aoColumnDefs:[{mRender:function(r,n,a,i){return i.row+i.settings._iDisplayStart+1},visible:!0,aTargets:[0],orderable:!1},{mRender:function(r,n,a){return a.samaccountname},visible:!0,aTargets:[1],orderable:!0},{mRender:function(r,n,a){return a.sn},visible:!0,aTargets:[2],orderable:!0},{mRender:function(r,n,a){return a.cn},visible:!0,aTargets:[3],orderable:!0},{mRender:function(r,n,a){return a.mail},visible:!0,aTargets:[4],orderable:!0},{mRender:function(r,n,a){return""},visible:!0,aTargets:[5],orderable:!0}],fnRowCallback:function(r,n,a,i){o.mount(r,{view:()=>[o("td",[i+1]),o("td",[n.samaccountname]),o("td",[n.sn]),o("td",[n.cn]),o("td",[n.mail,o("br"),o("span.tx-12[data-toggle='collapse'][href='#collapseExample_"+n.samaccountname+"'][role='button'][aria-expanded='false'][aria-controls='collapseExample_"+n.samaccountname+"']",{style:"cursor:pointer;"},"Creado: "+n.whencreated),o(".collapse[id='collapseExample_"+n.samaccountname+"']",[o(".tx-12.d-block","Actualizado: "+n.whenchanged),o(".tx-12.d-block","\xDAltima Contrase\xF1a: "+n.pwdlastset),o(".tx-12.d-block","\xDAltimo Acceso: "+n.lastlogontimestamp)])]),o("td",[o("button.btn.btn-sm.btn-block.tx-semibold.tx-white",{style:{"background-color":"#185b98"},onclick:()=>{o.route.set("/administracion/metrovirtual/",{idUsr:n.samaccountname})}},"Ver")])]})}}}vTableUsuarios(r,n,a){return[o(Qt,{idTable:r,dataTable:n,arqTable:a})]}page(){return[this.vHeader(),this.vMenu(),this.idUsr==null?[this.vMain()]:[this.vMainProfile()]]}}class Ul extends y{constructor(r){super();A(this,"usuarios",null);A(this,"dataUser",null);A(this,"idUsr",null);A(this,"idFiltro",1);y.isAuthenticated()&&y.hasProfile("ADM_USUARIOS_METROPLUS")&&(y.setTitle("Usuarios MetroPlus"),this.view=this.page)}oncreate(r){r.attrs.idFiltro!==void 0&&(this.idFiltro=r.attrs.idFiltro),this.fetchData().then(n=>{this.usuarios=n})}onupdate(r){r.attrs.idUsr!==void 0?this.idUsr=r.attrs.idUsr:this.idUsr=null,o.redraw()}vHeader(){return o(Ue,{userName:this.userName})}vMain(){return[o("div.content.content-components",o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/administracion"},["Administraci\xF3n"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-20",y.title+":"),o("div",[this.usuarios!==null&&this.usuarios.status?[o("div.table-content.col-12.pd-r-0.pd-l-0",[o("div.d-flex.align-items-center.justify-content-between.mg-t-10",[o("h5.mg-b-0","Todos los Usuarios:",o("span.badge.bg-litecoin.tx-white.tx-semibold.pd-l-10.pd-r-10.mg-l-5.tx-15",{oncreate:r=>{this.idFiltro==1&&(r.dom.innerHTML="Grp-radius-Medicos"),this.idFiltro==2&&(r.dom.innerHTML="Grp-radius-Residentes")},onupdate:r=>{this.idFiltro==1&&(r.dom.innerHTML="Grp-radius-Medicos"),this.idFiltro==2&&(r.dom.innerHTML="Grp-radius-Residentes")}})),o("div.d-flex.tx-14",[o("div.dropdown.dropleft",[o("div.link-03.lh-0.mg-l-5[id='dropdownMenuButton'][data-toggle='dropdown'][aria-haspopup='true'][aria-expanded='false']",{style:{cursor:"pointer"},title:"Filtrar"},o("i.fas.fa-filter.tx-18.pd-5")),o(".dropdown-menu.tx-13[aria-labelledby='dropdownMenuButton']",[o("h6.dropdown-header.tx-uppercase.tx-12.tx-bold.tx-inverse","FILTROS:"),o(o.route.Link,{class:"dropdown-item",href:"/administracion/metrovirtual/?idFiltro=1",onclick:r=>{this.reloadData(1),this.fetchData().then(n=>{this.usuarios=n})}},["Grp-radius-Medicos"]),o(o.route.Link,{class:"dropdown-item",href:"/administracion/metrovirtual/?idFiltro=2",onclick:r=>{this.reloadData(2),this.fetchData().then(n=>{this.usuarios=n})}},["Grp-radius-Residentes"])])])])])]),this.vTableUsuarios("table-usr",this.usuarios.data,this.arqTable())]:this.usuarios!==null&&(!this.usuarios.status||this.usuarios.status==null)?[o(Rt,{type:this.usuarios.status?0:1,error:this.usuarios})]:[o(we)]])])),o("div.section-nav",{class:this.usuarios!==null?"":"d-none"},[o("label.nav-label",this.title+":"),o("div.mg-t-10.bg-white",{},o("div.mg-t-10.bg-white",o("div.card-header.pd-t-20.pd-b-0.bd-b-0",[o("h6.lh-5.mg-b-5","N\xB0 de Resultados:")]),o("div.card-body.pd-0",[o("div.pd-t-10.pd-b-0.pd-x-20.d-flex.align-items-baseline",[o("h2.tx-normal.tx-rubik.mg-b-0.mg-r-5",this.usuarios!==null?this.usuarios.data.length:0),o("div.tx-14",[o("divv.lh-0.tx-gray-300","Resultado(s)")])])])),o("div.pd-20",[o(Po)]))])]}vMainProfile(){return this.fetchProfile(),[o("div.content.content-components",o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/administracion"},["Administraci\xF3n"])),o("li.breadcrumb-item.active[aria-current='page']",this.title)]),o("h1.df-title.mg-t-20.mg-b-10",this.title+":"),this.dataUser!==null?[o("div.table-responsive",[o("table.table.table-bordered.table-sm.tx-14",[o("thead",o("tr.bg-litecoin.op-9.tx-white.tx-uppercase",[o("th[scope='col'][colspan='10']","DATOS DEL USUARIO: "+this.dataUser.samaccountname)])),o("tbody",[o("tr",[o("th",{style:{"background-color":"#a8bed6"}},"Nombres Completos:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.sn+" "+this.dataUser.cn),o("th",{style:{"background-color":"#a8bed6"}},"Grupo:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.grupo)]),o("tr",[o("th",{style:{"background-color":"#a8bed6"}},"Correo electr\xF3nico:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.mail),o("th",{style:{"background-color":"#a8bed6"}},"Historial de Actividad:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},o(".tx-12.d-block","Creado: "+this.dataUser.whencreated),o(".tx-12.d-block","Actualizado: "+this.dataUser.whenchanged),o(".tx-12.d-block","\xDAltima Contrase\xF1a: "+this.dataUser.pwdlastset),o(".tx-12.d-block","\xDAltimo Acceso: "+this.dataUser.lastlogontimestamp))])]),o("tbody",[o("tr.d-print-none.bg-litecoin.op-9.tx-white.",[o("th[scope='col'][colspan='10']","OPCIONES DISPONIBLES:")]),o("tr.d-print-none",[o("td[colspan='10']",{style:{"background-color":"#eaeff5"}},o("ul.nav.nav-tabs[id='myTab'][role='tablist']",{},[o("li.nav-item",o("a.nav-link[id='home-tab'][data-toggle='tab'][href='#home'][role='tab'][aria-controls='home'][aria-selected='true']",{style:{color:"#476ba3"}},o("i.fas.fa-file-alt.pd-1.mg-r-2")," HOJA 005")),o("li.nav-item",o("a.nav-link[id='home-muestra'][data-toggle='tab'][href='#muestra'][role='tab'][aria-controls='muestra']",{style:{color:"#476ba3"}},o("i.fas.fa-edit.pd-1.mg-r-2")," TOMA DE MUESTRA ")),o("li.nav-item",o("a.nav-link[id='home-recep'][data-toggle='tab'][href='#recep'][role='tab'][aria-controls='recep']",{style:{color:"#476ba3"}},o("i.fas.fa-inbox.pd-1.mg-r-2")," RECEP. DE MUESTRA ")),o("li.nav-item",o("a.nav-link[id='home-comment'][data-toggle='tab'][href='#comment'][role='tab'][aria-controls='comment']",{style:{color:"#476ba3"}},o("i.fas.fa-inbox.pd-1.mg-r-2")," COMENTARIOS "))]))]),o("tr.d-print-none",[o("td[colspan='10']",o(".tab-content.bd.bd-gray-300.bd-t-0[id='myTab']",[o(".tab-pane.fade[id='home'][role='tabpanel'][aria-labelledby='home-tab']",[]),o(".tab-pane.fade[id='muestra'][role='tabpanel'][aria-labelledby='home-muestra']",[]),o(".tab-pane.fade[id='recep'][role='tabpanel'][aria-labelledby='home-recep']",[]),o(".tab-pane.fade[id='comment'][role='tabpanel'][aria-labelledby='home-comment']",[o("p.mg-5",[o("span.badge.badge-light.wd-100p.tx-14","Observaciones"),o("textarea.form-control.mg-t-5[rows='5'][placeholder='Observaciones']",{}),o("div.mg-0.mg-t-5.text-right",[o("button.btn.btn-xs.btn-primary.mg-l-2.tx-semibold[type='button']",{onclick:function(){}},[o("i.fas.fa-paper-plane.mg-r-5")],"Guardar")]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("p.mg-5",[o("span.badge.badge-light.wd-100p.tx-14","Historial de Observaciones"),o("table.table.table-sm[id='table-observaciones'][width='100%']")])])]))])])])])]:[o(we)]]))]}vMenu(){return o(Vt,{page:"administracion/metroplus"})}reloadData(r){this.usuarios=null,this.idFiltro=r}fetchProfile(){let r=this;if(r.usuarios!==null&&r.usuarios.status)return r.usuarios.data.map(function(n,a,i){r.idUsr==n.samaccountname&&(r.dataUser=n)})}fetchData(){let r="?idFiltro="+this.idFiltro;return o.request({method:"GET",url:Be.apiUrl+"/v2/usuarios/metroplus"+r,headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(n){return n}).catch(function(n){return{status:null,message:n}})}arqTable(){return{data:null,dom:"ltp",language:{searchPlaceholder:"Buscar...",sSearch:"",lengthMenu:"Mostrar _MENU_ registros por p\xE1gina",sProcessing:"Procesando...",sZeroRecords:"Todav\xEDa no tienes resultados disponibles.",sEmptyTable:"Ning\xFAn dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"\xDAltimo",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},cache:!1,destroy:!0,columns:[{title:"N\xB0 : "},{title:"Usuario AD:"},{title:"Nombres:"},{title:"Apellidos:"},{title:"E-mail:"},{title:"Opciones:"}],aoColumnDefs:[{mRender:function(r,n,a,i){return i.row+i.settings._iDisplayStart+1},visible:!0,aTargets:[0],orderable:!1},{mRender:function(r,n,a){return a.samaccountname},visible:!0,aTargets:[1],orderable:!0},{mRender:function(r,n,a){return a.sn},visible:!0,aTargets:[2],orderable:!0},{mRender:function(r,n,a){return a.cn},visible:!0,aTargets:[3],orderable:!0},{mRender:function(r,n,a){return a.mail},visible:!0,aTargets:[4],orderable:!0},{mRender:function(r,n,a){return""},visible:!0,aTargets:[5],orderable:!0}],fnRowCallback:function(r,n,a,i){o.mount(r,{view:()=>[o("td",[i+1]),o("td",[n.samaccountname]),o("td",[n.sn]),o("td",[n.cn]),o("td",[n.mail,o("br"),o("span.tx-12[data-toggle='collapse'][href='#collapseExample_"+n.samaccountname+"'][role='button'][aria-expanded='false'][aria-controls='collapseExample_"+n.samaccountname+"']",{style:"cursor:pointer;"},"Creado: "+n.whencreated),o(".collapse[id='collapseExample_"+n.samaccountname+"']",[o(".tx-12.d-block","Actualizado: "+n.whenchanged),o(".tx-12.d-block","\xDAltima Contrase\xF1a: "+n.pwdlastset),o(".tx-12.d-block","\xDAltimo Acceso: "+n.lastlogontimestamp)])]),o("td",[o("button.btn.btn-sm.btn-block.tx-semibold.tx-white",{style:{"background-color":"#185b98"},onclick:()=>{o.route.set("/administracion/metrovirtual/",{idUsr:n.samaccountname})}},"Ver")])]})}}}vTableUsuarios(r,n,a){return[o(Qt,{idTable:r,dataTable:n,arqTable:a})]}page(){return[this.vHeader(),this.vMenu(),this.idUsr==null?[this.vMain()]:[this.vMainProfile()]]}}class _n{}A(_n,"modulos",[{page:"hospitalizacion/pasaportes",label:"Pasaportes de Pacientes"},{page:"hospitalizacion/control-camas",label:"Camas GEMA-MV"}]);class Fl{view(){if(_n.modulos.length!==0)return[_n.modulos.map(function(t,r,n){return[o(o.route.Link,{href:"/"+t.page,class:No.page==t.page?"active":""},[t.label])]})]}}class No{oninit(t){No.page=t.attrs.page}view(){return[o(".sidebar.sidebar-fixed.sidebar-components[id='sidebarMenu']",[o("div.sidebar-header",[o("a[href=''][id='mainMenuOpen']",o("i[data-feather='menu']")),o("h5","Menu"),o("a[href=''][id='sidebarMenuClose']",o("i[data-feather='x']"))]),o("div.sidebar-body",o("ul.sidebar-nav",[o("li.nav-label.mg-b-15","Hospitalizaci\xF3n"),o("li.nav-item.show",[o(o.route.Link,{href:"/hospitalizacion",class:"nav-link with-sub"},[o("i[data-feather='layout']")," Hospitalizaci\xF3n"]),o("nav.nav",[o(Fl)])])]))])]}}class ql extends y{constructor(){super(),this.title="Hospitalizaci\xF3n",this.isAuthenticated(),this.hasProfile("ADM_USUARIOS_METROPLUS")&&(this.view=this.page)}vHeader(){return o(Ue,{userName:this.userName})}vMain(){return[o("div.content.content-components",{},o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item.active[aria-current='page']",this.title)]),o("h1.df-title.mg-t-20.mg-b-10",this.title+":"),o("div.row",[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/hospitalizacion/pasaportes']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-file-alt")),o("p.tx-color-03.mg-b-0.tx-semibold","Pasaportes de Pacientes")])])])),o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/hospitalizacion/control-camas']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fa-procedures")),o("p.tx-color-03.mg-b-0.tx-semibold","Camas GEMA-MV")])])]))])]))]}vMenu(){return o(No)}page(){return[this.vHeader(),this.vMenu(),this.vMain()]}}class Kl extends y{constructor(r){super();A(this,"pasaportes",null);A(this,"dataPasaporte",null);A(this,"idPasaporte",null);A(this,"idFiltro",1);this.title="Pasaportes de Pacientes",this.isAuthenticated(),this.hasProfile("ADM_USUARIOS_METROPLUS")&&(this.view=this.page)}oncreate(r){r.attrs.idFiltro!==void 0&&(this.idFiltro=r.attrs.idFiltro),this.fetchData().then(n=>{this.pasaportes=n})}onupdate(r){r.attrs.idPasaporte!==void 0?this.idPasaporte=r.attrs.idPasaporte:this.idPasaporte=null,o.redraw()}vHeader(){return o(Ue,{userName:this.userName})}vMain(){return[o("div.content.content-components",o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/hospitalizacion"},["Hospitalizaci\xF3n"])),o("li.breadcrumb-item.active[aria-current='page']",this.title)]),o("h1.df-title.mg-t-20.mg-b-20",this.title+":"),o("div",[this.pasaportes!==null&&this.pasaportes.status?[o("div.table-content.col-12.pd-r-0.pd-l-0",[o("div.d-flex.align-items-center.justify-content-between.mg-t-10",[o("h5.mg-b-0","Todos los Pasaportes:",o("span.badge.bg-litecoin.tx-white.tx-semibold.pd-l-10.pd-r-10.mg-l-5.tx-15",{oncreate:r=>{this.idFiltro==1&&(r.dom.innerHTML="Pasaportes Pendientes"),this.idFiltro==2&&(r.dom.innerHTML="Pasaportes Generados")},onupdate:r=>{this.idFiltro==1&&(r.dom.innerHTML="Pasaportes Pendientes"),this.idFiltro==2&&(r.dom.innerHTML="Pasaportes Generados")}})),o("div.d-flex.tx-14",[o("div.dropdown.dropleft",[o("div.link-03.lh-0.mg-l-5[id='dropdownMenuButton'][data-toggle='dropdown'][aria-haspopup='true'][aria-expanded='false']",{style:{cursor:"pointer"},title:"Filtrar"},o("i.fas.fa-filter.tx-18.pd-5")),o(".dropdown-menu.tx-13[aria-labelledby='dropdownMenuButton']",[o("h6.dropdown-header.tx-uppercase.tx-12.tx-bold.tx-inverse","FILTROS:"),o(o.route.Link,{class:"dropdown-item",href:"/hospitalizacion/pasaportes/?idFiltro=1",onclick:r=>{this.reloadData(1),this.fetchData().then(n=>{this.pasaportes=n})}},["Pasaportes Pendientes"]),o(o.route.Link,{class:"dropdown-item",href:"/hospitalizacion/pasaportes/?idFiltro=2",onclick:r=>{this.reloadData(2),this.fetchData().then(n=>{this.pasaportes=n})}},["Pasaportes Generados"])])])])])]),this.vTableUsuarios("table-usr",this.pasaportes.data,this.arqTable())]:this.pasaportes!==null&&(!this.pasaportes.status||this.pasaportes.status==null)?[o(Rt,{type:this.pasaportes.status?0:1,error:this.pasaportes})]:[o(we)]])])),o("div.section-nav",{class:this.pasaportes!==null?"":"d-none"},[o("label.nav-label",this.title+":"),o("div.mg-t-10.bg-white",{},o("div.mg-t-10.bg-white",o("div.card-header.pd-t-20.pd-b-0.bd-b-0",[o("h6.lh-5.mg-b-5","N\xB0 de Resultados:")]),o("div.card-body.pd-0",[o("div.pd-t-10.pd-b-0.pd-x-20.d-flex.align-items-baseline",[o("h2.tx-normal.tx-rubik.mg-b-0.mg-r-5",this.pasaportes!==null?this.pasaportes.data.length:0),o("div.tx-14",[o("divv.lh-0.tx-gray-300","Resultado(s)")])])])),o("div.pd-20",[o(Po)]))])]}vMainProfile(){return this.fetchProfile(),[o("div.content.content-components",o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/hospitalizacion"},["Hospitalizaci\xF3n"])),o("li.breadcrumb-item.active[aria-current='page']",this.title)]),o("h1.df-title.mg-t-20.mg-b-10",this.title+":"),this.dataPasaporte!==null?[o("div.table-responsive",[o("table.table.table-bordered.table-sm.tx-14",[o("thead",o("tr.bg-litecoin.op-9.tx-white.tx-uppercase",[o("th[scope='col'][colspan='10']","DATOS DEL USUARIO: "+this.dataPasaporte.samaccountname)])),o("tbody",[o("tr",[o("th",{style:{"background-color":"#a8bed6"}},"Nombres Completos:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataPasaporte.sn+" "+this.dataPasaporte.cn),o("th",{style:{"background-color":"#a8bed6"}},"Grupo:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataPasaporte.grupo)]),o("tr",[o("th",{style:{"background-color":"#a8bed6"}},"Correo electr\xF3nico:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataPasaporte.mail),o("th",{style:{"background-color":"#a8bed6"}},"Historial de Actividad:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},o(".tx-12.d-block","Creado: "+this.dataPasaporte.whencreated),o(".tx-12.d-block","Actualizado: "+this.dataPasaporte.whenchanged),o(".tx-12.d-block","\xDAltima Contrase\xF1a: "+this.dataPasaporte.pwdlastset),o(".tx-12.d-block","\xDAltimo Acceso: "+this.dataPasaporte.lastlogontimestamp))])]),o("tbody",[o("tr.d-print-none.bg-litecoin.op-9.tx-white.",[o("th[scope='col'][colspan='10']","OPCIONES DISPONIBLES:")]),o("tr.d-print-none",[o("td[colspan='10']",{style:{"background-color":"#eaeff5"}},o("ul.nav.nav-tabs[id='myTab'][role='tablist']",{},[o("li.nav-item",o("a.nav-link[id='home-tab'][data-toggle='tab'][href='#home'][role='tab'][aria-controls='home'][aria-selected='true']",{style:{color:"#476ba3"}},o("i.fas.fa-file-alt.pd-1.mg-r-2")," HOJA 005")),o("li.nav-item",o("a.nav-link[id='home-muestra'][data-toggle='tab'][href='#muestra'][role='tab'][aria-controls='muestra']",{style:{color:"#476ba3"}},o("i.fas.fa-edit.pd-1.mg-r-2")," TOMA DE MUESTRA ")),o("li.nav-item",o("a.nav-link[id='home-recep'][data-toggle='tab'][href='#recep'][role='tab'][aria-controls='recep']",{style:{color:"#476ba3"}},o("i.fas.fa-inbox.pd-1.mg-r-2")," RECEP. DE MUESTRA ")),o("li.nav-item",o("a.nav-link[id='home-comment'][data-toggle='tab'][href='#comment'][role='tab'][aria-controls='comment']",{style:{color:"#476ba3"}},o("i.fas.fa-inbox.pd-1.mg-r-2")," COMENTARIOS "))]))]),o("tr.d-print-none",[o("td[colspan='10']",o(".tab-content.bd.bd-gray-300.bd-t-0[id='myTab']",[o(".tab-pane.fade[id='home'][role='tabpanel'][aria-labelledby='home-tab']",[]),o(".tab-pane.fade[id='muestra'][role='tabpanel'][aria-labelledby='home-muestra']",[]),o(".tab-pane.fade[id='recep'][role='tabpanel'][aria-labelledby='home-recep']",[]),o(".tab-pane.fade[id='comment'][role='tabpanel'][aria-labelledby='home-comment']",[o("p.mg-5",[o("span.badge.badge-light.wd-100p.tx-14","Observaciones"),o("textarea.form-control.mg-t-5[rows='5'][placeholder='Observaciones']",{}),o("div.mg-0.mg-t-5.text-right",[o("button.btn.btn-xs.btn-primary.mg-l-2.tx-semibold[type='button']",{onclick:function(){}},[o("i.fas.fa-paper-plane.mg-r-5")],"Guardar")]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("p.mg-5",[o("span.badge.badge-light.wd-100p.tx-14","Historial de Observaciones"),o("table.table.table-sm[id='table-observaciones'][width='100%']")])])]))])])])])]:[o(we)]]))]}vMenu(){return o(No,{page:"hospitalizacion/pasaportes"})}reloadData(r){this.pasaportes=null,this.idFiltro=r}fetchProfile(){let r=this;if(r.pasaportes!==null&&r.pasaportes.status)return r.pasaportes.data.map(function(n,a,i){r.idPasaporte==n.NHC&&(r.dataPasaporte=n)})}fetchData(){let r="?idFiltro="+this.idFiltro;return o.request({method:"GET",url:Be.apiUrl+"/v2/pacientes/pasaportes"+r,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:localStorage.getItem("userToken")}}).then(function(n){return n}).catch(function(n){return{status:null,message:n}})}arqTable(){return{data:null,dom:"ltp",language:{searchPlaceholder:"Buscar...",sSearch:"",lengthMenu:"Mostrar _MENU_ registros por p\xE1gina",sProcessing:"Procesando...",sZeroRecords:"Todav\xEDa no tienes resultados disponibles.",sEmptyTable:"Ning\xFAn dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"\xDAltimo",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},cache:!1,destroy:!0,columns:[{title:"N\xB0 : "},{title:"NHC:"},{title:"Paciente:"},{title:"Pasaporte:"},{title:"Opciones:"}],aoColumnDefs:[{mRender:function(r,n,a,i){return i.row+i.settings._iDisplayStart+1},visible:!0,aTargets:[0],orderable:!1},{mRender:function(r,n,a){return a.samaccountname},visible:!0,aTargets:[1],orderable:!0},{mRender:function(r,n,a){return a.sn},visible:!0,aTargets:[2],orderable:!0},{mRender:function(r,n,a){return a.cn},visible:!0,aTargets:[3],orderable:!0},{mRender:function(r,n,a){return""},visible:!0,aTargets:[4],orderable:!0}],fnRowCallback:function(r,n,a,i){o.mount(r,{view:()=>[o("td",[i+1]),o("td",[n.NHC]),o("td",[n.PTE]),o("td.bg-warning",[o(".",[o(".tx-14.d-block.tx-semibold","Status: Pendiente "),o(".tx-12.d-block","Asignado a: "+n.NHC),o(".tx-12.d-block","Fecha Asignaci\xF3n: "+n.NHC)])]),o("td",[o("button.btn.btn-xs.btn-block.tx-semibold.tx-white",{style:{"background-color":"#185b98"},onclick:()=>{o.route.set("/hospitalizacion/pasaporte/",{idPasaporte:n.NHC})}},"Ver Pasaporte")])]})}}}vTableUsuarios(r,n,a){return[o(Qt,{idTable:r,dataTable:n,arqTable:a})]}page(){return[this.vHeader(),this.vMenu(),this.idPasaporte==null?[this.vMain()]:[this.vMainProfile()]]}}class Bl extends y{constructor(r){super();A(this,"usuarios",null);A(this,"dataPasaporte",null);A(this,"idPasaporte",null);A(this,"idFiltro",1);A(this,"usrAsignado",null);A(this,"formLoader",!1);A(this,"mascotas",!1);A(this,"visitas",!1);A(this,"indicaciones",!1);A(this,"guardia",!1);A(this,"desayuno",!1);A(this,"ducha",!1);A(this,"comida",!1);A(this,"dormir",!1);this.title="Pasaporte de Paciente",this.view=this.page}oncreate(r){let n=this;r.attrs.idPasaporte!==void 0&&(n.idPasaporte=r.attrs.idPasaporte),n.fetchPasaporte().then(a=>{n.dataPasaporte=a.data[0],n.dataPasaporte.STATUS==1&&n.fetchAsignado()})}vHeader(){return o(Rr)}vMainProfile(){return[o("div.content.content-components",o("div.container.mg-l-0.mg-r-0",[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/hospitalizacion"},["Hospitalizaci\xF3n"])),o("li.breadcrumb-item.active[aria-current='page']",this.title)]),o(".df-title.mg-t-20.mg-b-10.tx-30.d-flexs",this.title+": ",o("span.badge.tx-20",{class:this.dataPasaporte!==null&&this.dataPasaporte.STATUS==2?"badge-success":"badge-warning"},this.dataPasaporte!==null?[this.dataPasaporte.STATUS==0?"Pendiente":"",this.dataPasaporte.STATUS==1?"Asignado a: "+(this.usrAsignado==null?"":this.usrAsignado.displayName):"",this.dataPasaporte.STATUS==2?"Generado":""]:[])),this.dataPasaporte!==null?[o("table.table.table-bordered.table-sm.tx-14",[o("thead",o("tr.bg-litecoin.op-9.tx-white.tx-uppercase",[o("th[scope='col'][colspan='6']","DATOS DEL PACIENTE:")])),o("tbody",[o("tr",[o("th.wd-10p",{style:{"background-color":"#a8bed6"}},"NHC:"),o("td",{style:{"background-color":"#eaeff5"}},this.dataPasaporte.NHC)]),o("tr",[o("th.wd-10p",{style:{"background-color":"#a8bed6"}},"PTE:"),o("td",{style:{"background-color":"#eaeff5"}},this.dataPasaporte.PTE)]),o("tr",[o("th.wd-10p",{style:{"background-color":"#a8bed6"}},"HAB:"),o("td",{style:{"background-color":"#eaeff5"}},this.dataPasaporte.HAB)]),o("tr",[o("th.wd-10p",{style:{"background-color":"#a8bed6"}},"MED:"),o("td",{style:{"background-color":"#eaeff5"}},this.dataPasaporte.MED)]),o("tr",[o("th.wd-10p",{style:{"background-color":"#a8bed6"}},"ESP:"),o("td",{style:{"background-color":"#eaeff5"}},this.dataPasaporte.ESP)]),o("tr.d-print-none.bg-litecoin.op-9.tx-white.",[o("th[scope='col'][colspan='6']","OPCIONES DISPONIBLES:")]),o("tr.d-print-none",[o("td[colspan='6']",{style:{"background-color":"#eaeff5"}},o("ul.nav.nav-tabs[id='myTab'][role='tablist']",[this.dataPasaporte.STATUS==0?[o("li.nav-item.mg-b-5",o("a.nav-link[id='home-asig'][data-toggle='tab'][href='#asig'][role='tab'][aria-controls='asig']",{style:{color:"#476ba3"}},o("i.fas.fa-edit.pd-1.mg-r-2")," Asignar Encuesta  "))]:[],this.dataPasaporte.STATUS==1?[o("li.nav-item.pd-b-5",o("a.nav-link[id='home-tab'][data-toggle='tab'][href='#home'][role='tab'][aria-controls='home'][aria-selected='true']",{style:{color:"#476ba3"}},o("i.fas.fa-edit.pd-1.mg-r-2")," Realizar Encuesta ")),,o("li.nav-item.pd-b-5",o("a.nav-link[id='home-asig'][data-toggle='tab'][href='#asig'][role='tab'][aria-controls='asig']",{style:{color:"#476ba3"}},o("i.fas.fa-edit.pd-1.mg-r-2")," Reasignar Encuesta  "))]:[],this.dataPasaporte.STATUS==2?[o("li.nav-item.mg-b-5",o("a.nav-link[id='home-ver'][data-toggle='tab'][href='#ver'][role='tab'][aria-controls='ver']",{style:{color:"#476ba3"}},o("i.fas.fa-edit.pd-1.mg-r-2")," Ver Encuesta  "))]:[]]))]),o("tr",[o("td[colspan='6']",o(".tab-content.bd.bd-gray-300.bd-t-0.wd-100p[id='myTab']",[o(".tab-pane.fade[id='home'][role='tabpanel'][aria-labelledby='home-tab']",[o(".pd-20.bg-white",{class:this.formLoader?"":"d-none"},[o(we)]),o("form",{class:this.formLoader?"d-none":"",onsubmit:r=>{r.preventDefault();let n=new FormData(r.srcElement),a=[];for(let i of n.entries())a.push(i);this.fetchGenerarPasaporte(a)}},[o("div.form-row",[o("div.form-group.col-md-12.text-center m-0",[o("div.bg-secondary",[o("label.pd-b-5.pd-t-5.m-0.tx-white.tx-semibold","Preferencias del Paciente")]),o("hr.wd-100p.mg-t-5.mg-b-5")])]),o("div.form-row",[o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","1.- \xBFC\xF2mo prefiere que lo llamemos?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq1'][name='rq1'][value='Por mi Nombre']",{}),o("label.custom-control-label[for='q1_rq1']","Por mi Nombre")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq1'][name='rq1'][value='Por su Apellido']"),o("label.custom-control-label[for='q2_rq1']","Por su Apellido")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q3_rq1'][name='rq1'][value='Me da igual']"),o("label.custom-control-label[for='q3_rq1']","Por su T\xEDtulo Profesional")]),o("div",[o("label","Especifique:"),o("input.form-control[type='text'][placeholder='Especifique:'][name='rq1_1']")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","2.- \xBFQu\xE9 tan importante es para usted la hora a la que se despierta en la ma\xF1ana?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq2'][name='rq2'][value='Muy Importante']",{onclick:()=>{this.desayuno=!0}}),o("label.custom-control-label[for='q1_rq2']","Muy Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq2'][name='rq2'][value='Importante']",{onclick:()=>{this.desayuno=!0}}),o("label.custom-control-label[for='q2_rq2']","Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q3_rq2'][name='rq2'][value='Me da igual']",{onclick:()=>{this.desayuno=!1}}),o("label.custom-control-label[for='q3_rq2']","Me da igual")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q4_rq2'][name='rq2'][value='No muy importante']",{onclick:()=>{this.desayuno=!1}}),o("label.custom-control-label[for='q4_rq2']","No muy importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q5_rq2'][name='rq2'][value='No es nada importante']",{onclick:()=>{this.desayuno=!1}}),o("label.custom-control-label[for='q5_rq2']","No es nada importante")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",{class:this.desayuno?"":"d-none"},[o("div.pd-20.bg-white.tx-18",[o("div",[o("label","Hora:"),o("input.form-control[type='text'][placeholder='Hora:'][name='rq2_1']",{disabled:this.desayuno?"":"disabled"})])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","3.- \xBFQu\xE9 tan importante es para usted la hora a la que toma un ba\xF1o?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq3'][name='rq3'][value='Muy Importante']",{onclick:()=>{this.ducha=!0}}),o("label.custom-control-label[for='q1_rq3']","Muy Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq3'][name='rq3'][value='Importante']",{onclick:()=>{this.ducha=!0}}),o("label.custom-control-label[for='q2_rq3']","Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q3_rq3'][name='rq3'][value='Me da igual']",{onclick:()=>{this.ducha=!1}}),o("label.custom-control-label[for='q3_rq3']","Me da igual")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q4_rq3'][name='rq3'][value='No muy importante']",{onclick:()=>{this.ducha=!1}}),o("label.custom-control-label[for='q4_rq3']","No muy importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q5_rq3'][name='rq3'][value='No es nada importante']",{onclick:()=>{this.ducha=!1}}),o("label.custom-control-label[for='q5_rq3']","No es nada importante")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",{class:this.ducha?"":"d-none"},[o("div.pd-20.bg-white.tx-18",[o("div",[o("label","Hora:"),o("input.form-control[type='text'][placeholder='Hora:'][name='rq3_1']",{disabled:this.ducha?"":"disabled"})])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","4.- \xBFQu\xE9 tan importante es para usted el cuidado diario de su cabello?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq4'][name='rq4'][value='Muy Importante']"),o("label.custom-control-label[for='q1_rq4']","Muy Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq4'][name='rq4'][value='Importante']"),o("label.custom-control-label[for='q2_rq4']","Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q3_rq4'][name='rq4'][value='Me da igual']"),o("label.custom-control-label[for='q3_rq4']","Me da igual")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q4_rq4'][name='rq4'][value='No muy importante']"),o("label.custom-control-label[for='q4_rq4']","No muy importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q5_rq4'][name='rq4'][value='No es nada importante']"),o("label.custom-control-label[for='q5_rq4']","No es nada importante")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","5.- \xBFQu\xE9 tan importante es para usted la hora en la que duerme en la noche?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq5'][name='rq5'][value='Muy Importante']",{onclick:()=>{this.dormir=!0}}),o("label.custom-control-label[for='q1_rq5']","Muy Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq5'][name='rq5'][value='Importante']",{onclick:()=>{this.dormir=!0}}),o("label.custom-control-label[for='q2_rq5']","Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q3_rq5'][name='rq5'][value='Me da igual']",{onclick:()=>{this.dormir=!1}}),o("label.custom-control-label[for='q3_rq5']","Me da igual")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q4_rq5'][name='rq5'][value='No muy importante']",{onclick:()=>{this.dormir=!1}}),o("label.custom-control-label[for='q4_rq5']","No muy importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q5_rq5'][name='rq5'][value='No es nada importante']",{onclick:()=>{this.dormir=!1}}),o("label.custom-control-label[for='q5_rq5']","No es nada importante")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",{class:this.dormir?"":"d-none"},[o("div.pd-20.bg-white.tx-18",[o("div",[o("label","Hora:"),o("input.form-control[type='text'][name='rq5_1']",{disabled:this.dormir?"":"disabled"})])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","6.- \xBFQu\xE9 tan importante es para usted poder escoger su comida?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq6'][name='rq6'][value='Muy Importante']",{onclick:()=>{this.comida=!0}}),o("label.custom-control-label[for='q1_rq6']","Muy Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq6'][name='rq6'][value='Importante']",{onclick:()=>{this.comida=!0}}),o("label.custom-control-label[for='q2_rq6']","Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q3_rq6'][name='rq6'][value='Me da igual']",{onclick:()=>{this.comida=!1}}),o("label.custom-control-label[for='q3_rq6']","Me da igual")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q4_rq6'][name='rq6'][value='No muy importante']",{onclick:()=>{this.comida=!1}}),o("label.custom-control-label[for='q4_rq6']","No muy importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q5_rq6'][name='rq6'][value='No es nada importante']",{onclick:()=>{this.comida=!1}}),o("label.custom-control-label[for='q5_rq6']","No es nada importante")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",{class:this.comida?"":"d-none"},[o("div.pd-20.bg-white.tx-18",[o("div",[o("label","Comida Favorita:"),o("input.form-control[type='text'][name='rq6_1']",{disabled:this.comida?"":"disabled"})]),o("div",[o("label","Preferencias Comida:"),o("input.form-control[type='text'][name='rq6_2']",{disabled:this.comida?"":"disabled"})]),o("div",[o("label","Excluir:"),o("input.form-control[type='text'][name='rq6_3']",{disabled:this.comida?"":"disabled"})])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","7.- \xBFQu\xE9 tan importante es para usted salir al aire libre cuando el clima es adecuado?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq7'][name='rq7'][value='Muy Importante']"),o("label.custom-control-label[for='q1_rq7']","Muy Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq7'][name='rq7'][value='Importante']"),o("label.custom-control-label[for='q2_rq7']","Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q3_rq7'][name='rq7'][value='Me da igual']"),o("label.custom-control-label[for='q3_rq7']","Me da igual")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q4_rq7'][name='rq7'][value='No muy importante']"),o("label.custom-control-label[for='q4_rq7']","No muy importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q5_rq7'][name='rq7'][value='No es nada importante']"),o("label.custom-control-label[for='q5_rq7']","No es nada importante")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","8.- \xBFUsted tiene mascotas? En caso afirmativo, \xBFqu\xE9 tan importante es para usted estar cerca de sus mascotas?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq8'][name='rq8'][value='Muy Importante']",{onclick:()=>{this.mascotas=!0}}),o("label.custom-control-label[for='q1_rq8']","Muy Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq8'][name='rq8'][value='Importante']",{onclick:()=>{this.mascotas=!0}}),o("label.custom-control-label[for='q2_rq8']","Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q3_rq8'][name='rq8'][value='Me da igual']",{onclick:()=>{this.mascotas=!1}}),o("label.custom-control-label[for='q3_rq8']","Me da igual")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q4_rq8'][name='rq8'][value='No muy importante']",{onclick:()=>{this.mascotas=!1}}),o("label.custom-control-label[for='q4_rq8']","No muy importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q5_rq8'][name='rq8'][value='No es nada importante']",{onclick:()=>{this.mascotas=!1}}),o("label.custom-control-label[for='q5_rq8']","No es nada importante")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",{class:this.mascotas?"":"d-none"},[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","8.1.- \xBFQuiere conocer el procedimiento de ingreso de mascotas al hospital?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_1_rq8_1'][name='rq8_1'][value='Si']",{disabled:this.mascotas?"":"disabled"}),o("label.custom-control-label[for='q1_1_rq8_1']","Si")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_2_rq8_1'][name='rq8_1'][value='No']",{disabled:this.mascotas?"":"disabled"}),o("label.custom-control-label[for='q2_2_rq8_1']","No")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","9.- \xBFQu\xE9 tan importante es para usted tener libros/revistas a su disposici\xF3n para leer?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq9'][name='rq9'][value='Muy Importante']"),o("label.custom-control-label[for='q1_rq9']","Muy Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq9'][name='rq9'][value='Importante']"),o("label.custom-control-label[for='q2_rq9']","Importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q3_rq9'][name='rq9'][value='Me da igual']"),o("label.custom-control-label[for='q3_rq9']","Me da igual")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q4_rq9'][name='rq9'][value='No muy importante']"),o("label.custom-control-label[for='q4_rq9']","No muy importante")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q5_rq9'][name='rq9'][value='No es nada importante']"),o("label.custom-control-label[for='q5_rq9']","No es nada importante")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16"," 10.- \xBFEstar\xEDa de acuerdo en interactuar con el personal de salud en la entrega recepci\xF3n de turno?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq10'][name='rq10'][value='Si']",{onclick:()=>{this.guardia=!0}}),o("label.custom-control-label[for='q1_rq10']","Si")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq10'][name='rq10'][value='No']",{onclick:()=>{this.guardia=!1}}),o("label.custom-control-label[for='q2_rq10']","No")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",{class:this.guardia?"":"d-none"},[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","10.1.- \xBFEn que turno preferir\xEDa participar.?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_1_rq10_1'][name='rq10_1'][value='Ma\xF1ana']",{disabled:this.guardia?"":"disabled"}),o("label.custom-control-label[for='q1_1_rq10_1']","Ma\xF1ana")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_2_rq10_1'][name='rq10_1'][value='Tarde']",{disabled:this.guardia?"":"disabled"}),o("label.custom-control-label[for='q2_2_rq10_1']","Tarde")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","11.- \xBFDesea restringir totalmente sus vistas?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq11'][name='rq11'][value='Si']"),o("label.custom-control-label[for='q1_rq11']","Si")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq11'][name='rq11'][value='No']"),o("label.custom-control-label[for='q2_rq11']","No")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","12.- \xBFDurante su hospitalizaci\xF3n y cuidados posteriores a la alta m\xE9dica, usted desear\xEDa que capaciten a una persona de su confianza para que le brinde un cuidado y acompa\xF1amiento pertinente?")]),o("div.pd-20.bg-white.tx-18",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q1_rq12'][name='rq12'][value='Si']",{onclick:()=>{this.indicaciones=!0}}),o("label.custom-control-label[for='q1_rq12']","Si")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='q2_rq12'][name='rq12'][value='No']",{onclick:()=>{this.indicaciones=!1}}),o("label.custom-control-label[for='q2_rq12']","No")])]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",{class:this.indicaciones?"":"d-none"},[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","12.1.- Especificar el nombre de la persona que requiere capacitaci\xF3n:")]),o("div.pd-20.bg-white.tx-18",[o("div",[o("label","Nombre:"),o("input.form-control[type='text'][placeholder='Nombre:'][name='rq12_1']",{disabled:this.indicaciones?"":"disabled"})])]),o("hr.wd-100p.mg-t-5.mg-b-5")])]),o("div.form-group.pd-5.bg-white",o("button.btn.btn-primary.btn-xs.btn-block.tx-semibold.tx-18[type='submit']","Enviar"))])]),o(".tab-pane.fade[id='asig'][role='tabpanel'][aria-labelledby='home-asig']",[o(".pd-20.bg-white",{class:this.formLoader?"":"d-none"},[o(we)]),o("form",{class:this.formLoader?"d-none":"",onsubmit:r=>{r.preventDefault(),this.usrAsignado!==null&&this.fetchAsignar()}},[o("div.form-row",[o("div.form-group.col-md-12.text-center m-0",[o("div.bg-secondary",[o("label.pd-b-5.pd-t-5.m-0.tx-white.tx-semibold","Asignar Encuesta")]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","1.- \xBFA qui\xE9n desea asignar esta encuesta?")]),o("div.pd-20.bg-white.tx-18",[o("label.pd-l-10.pd-t-10.pd-r-10.text-justify","- Seleccione el Grupo:"),o("select.custom-select.mg-b-5",{value:this.grupo!==null?this.grupo:"",onchange:r=>{this.grupo=r.target.value,this.groupName=r.target.options[r.target.options.selectedIndex].dataset.gn,this.usrAsignado=null,this.fetchUsuarios()}},[o("option[value='']",{oncreate:r=>{r.dom.selected=!0}},"Seleccione..."),o("option[data-gn='PB'][value='b74c79e1-ae1c-43a4-a901-b6f582901244']","HM-Grp-Encargadas-PB"),o("option[data-gn='H1'][value='cf113897-f369-4a8d-a5d0-b721b0026f93']","HM-Grp-Encargadas-H1"),o("option[data-gn='H2'][value='c0f727ae-54b1-47c4-9371-99fdbb367283']","HM-Grp-Encargadas-H2"),o("option[data-gn='C2'][value='77617330-eee8-4fb2-9532-7f3e7519c78f']","HM-Grp-Encargadas-C2"),o("option[data-gn='COVID'][value='d5cb5f59-dcca-44a6-96fe-b4588b21abaa']","HM-Grp-Encargadas-COVID")]),o("label.pd-l-10.pd-t-10.pd-r-10.text-justify",{class:this.usuarios!==null?"":"d-none"},"- Seleccione el Usuario:"),o("select.custom-select.mg-b-5",{class:this.usuarios!==null?"":"d-none",onchange:r=>{this.usrAsignado={nhc:this.idPasaporte,groupName:this.groupName,grupoId:this.grupo,idUsr:r.target.options[r.target.options.selectedIndex].id,displayName:r.target.options[r.target.options.selectedIndex].dataset.usr}}},[this.usuarios!==null?[o("option[value='']",{oncreate:r=>{r.dom.selected=!0}},"Seleccione..."),this.usuarios.map(r=>o("option",{id:r.id,value:r.id,"data-usr":r.displayName},r.displayName))]:[]])]),o("hr.wd-100p.mg-t-5.mg-b-5")])]),o("div.form-group.pd-5.bg-white",o("button.btn.btn-primary.btn-xs.btn-block.tx-semibold.tx-18[type='submit']","Asignar"))])]),o(".tab-pane.fade[id='ver'][role='tabpanel'][aria-labelledby='home-ver']",[this.dataPasaporte!==null&&this.dataPasaporte.STATUS==2?[o("form",[o("div.form-row",[o("div.form-group.col-md-12.text-center m-0",[o("div.bg-secondary",[o("label.pd-b-5.pd-t-5.m-0.tx-white.tx-semibold","Preferencias del Paciente")]),o("hr.wd-100p.mg-t-5.mg-b-5")])]),o("div.form-row",[o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","1.- \xBFC\xF2mo prefiere que lo llamemos?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq1]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","2.- \xBFQu\xE9 tan importante es para usted la hora a la que se despierta en la ma\xF1ana?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq2]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","3.- \xBFQu\xE9 tan importante es para usted la hora a la que toma un ba\xF1o?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq3]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","4.- \xBFQu\xE9 tan importante es para usted el cuidado diario de su cabello?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq4]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","5.- \xBFQu\xE9 tan importante es para usted la hora en la que duerme en la noche?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq5]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","6.- \xBFQu\xE9 tan importante es para usted poder escoger su comida?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq6]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","7.- \xBFQu\xE9 tan importante es para usted salir al aire libre cuando el clima es adecuado?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq7]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","8.- \xBFUsted tiene mascotas? En caso afirmativo, \xBFqu\xE9 tan importante es para usted estar cerca de sus mascotas?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq8]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","9.- \xBFQu\xE9 tan importante es para usted tener libros/revistas a su disposici\xF3n para leer?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq9]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16"," 10.- \xBFEstar\xEDa de acuerdo en interactuar con el personal de salud en la entrega recepci\xF3n de turno?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq10]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","11.- \xBFDesea restringir totalmente sus vistas?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq11]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("div.form-group.col-md-12.m-0",[o("div.bg-litecoin op-9",[o("label.pd-l-10.pd-t-10.pd-r-10.tx-white.text-justify.tx-16","12.- \xBFDurante su hospitalizaci\xF3n y cuidados posteriores a la alta m\xE9dica, usted desear\xEDa que capaciten a una persona de su confianza para que le brinde un cuidado y acompa\xF1amiento pertinente?")]),o("div.pd-20.bg-white.tx-18",[this.dataPasaporte.ENCUESTA.rq12]),o("hr.wd-100p.mg-t-5.mg-b-5")])])])]:[]])]))])])])]:[o(we)]]))]}fetchUsuarios(){let r=this;return r.formLoader=!0,o.request({method:"POST",url:"https://prod-86.westus.logic.azure.com:443/workflows/6ae81d0303a0473cac689c25bb466253/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=mG7JHMfylqEd193lR_ROizpE6E--wTLs7VbFGbf7BYY",body:{grupo:r.grupo},headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(n){r.formLoader=!1,r.usuarios=n.value}).catch(function(n){return{status:null,message:n}})}fetchPasaporte(){let r="?nhc="+this.idPasaporte;return o.request({method:"GET",url:Be.apiUrl+"/v2/pacientes/pasaportes"+r,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:localStorage.getItem("userToken")}}).then(function(n){return n}).catch(function(n){return{status:null,message:n}})}fetchAsignar(){let r=this;return r.formLoader=!0,o.request({method:"POST",url:Be.apiUrl+"/v2/pacientes/nueva-asignacion",body:{usr:r.usrAsignado,pte:r.dataPasaporte},headers:{"Content-Type":"application/json; charset=utf-8",Authorization:localStorage.getItem("userToken")}}).then(function(n){r.formLoader=!1,n.status?window.location.reload():alert(n.message)}).catch(function(n){return{status:null,message:n}})}fetchGenerarPasaporte(r){let n=this;return n.formLoader=!0,o.request({method:"POST",url:Be.apiUrl+"/v2/pacientes/nuevo-pasaporte-2",body:{encuesta:r,pte:n.dataPasaporte},headers:{"Content-Type":"application/json; charset=utf-8",Authorization:localStorage.getItem("userToken")}}).then(function(a){n.formLoader=!1,a.status?window.location.reload():alert(a.message)}).catch(function(a){return{status:null,message:a}})}fetchAsignado(){let r=this;return o.request({method:"GET",url:Be.apiUrl+"/v2/pacientes/historial-asignaciones?nhc="+r.idPasaporte,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:localStorage.getItem("userToken")}}).then(function(n){n.status&&(r.usrAsignado=n.data)}).catch(function(n){return{status:null,message:n}})}page(){return[this.vHeader(),this.vMainProfile()]}}class Yl extends y{constructor(r){super();A(this,"pasaportes",null);A(this,"dataPasaporte",null);A(this,"idPasaporte",null);A(this,"idFiltro",1)}oncreate(r){r.attrs!==void 0&&(this.dataPasaporte=r.attrs,this.idPasaporte=this.dataPasaporte.NHC,this.fetchPasaporte())}fetchPasaporte(){let r=this;return o.request({method:"POST",url:Be.apiUrl+"/v2/pacientes/step-pasaporte",body:r.dataPasaporte,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:localStorage.getItem("userToken")}}).then(function(n){n.status?o.route.set("/hospitalizacion/pasaporte",{idPasaporte:r.idPasaporte}):alert(n.message)}).catch(function(n){return{status:null,message:n}})}}class An{}A(An,"modulos",[{page:"laboratorio/flebotomista",label:"Flebotomista"}]);class Gl{view(){if(An.modulos.length!==0)return[An.modulos.map(function(t,r,n){return[o(o.route.Link,{href:"/"+t.page,class:Mr.page==t.page?"active":""},[t.label])]})]}}class Mr{oninit(t){Mr.page=t.attrs.page}view(){return[o(".sidebar.sidebar-fixed.sidebar-components[id='sidebarMenu']",[o("div.sidebar-header",[o("a[href=''][id='mainMenuOpen']",o("i[data-feather='menu']")),o("h5","Menu"),o("a[href=''][id='sidebarMenuClose']",o("i[data-feather='x']"))]),o("div.sidebar-body",o("ul.sidebar-nav",[o("li.nav-label.mg-b-15","Laboratorio"),o("li.nav-item.show",[o(o.route.Link,{href:"/laboratorio",class:"nav-link with-sub"},[o("i[data-feather='layout']")," Laboratorio"]),o("nav.nav",[o(Gl)])])]))])]}}class zl extends y{constructor(){super(),y.isAuthenticated()&&(y.title="Laboratorio",y.hasProfile("LABORATORIO_METROPLUS")&&(this.view=this.page))}vHeader(){return o(Ue,{userName:y.userName})}vMain(){return[o("div.content.content-components",{},o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-10",y.title+":"),o("div.row",[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a[href='/laboratorio/flebotomista']",{style:{color:"#325a98"}},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas.fas.fa-flask ")),o("p.tx-color-03.mg-b-0.tx-semibold","Flebotomista")])])]))])]))]}vMenu(){return o(Mr)}page(){return[this.vHeader(),this.vMenu(),this.vMain()]}}class $l{constructor(t){this.peer=new Peer({host:"localhost",port:9e3,path:"/myapp"}),this.connected=!1,this.dataConnection=null,this.onConnect=null,this.onMessage=null,this.onError=null,this.peer.on("open",r=>{console.log("PeerJS instance ready"),t(r)}),this.peer.on("connection",r=>{console.log("Connection received from",r.peer),this.setDataConnection(r)}),this.peer.on("error",r=>{console.error("PeerJS error",r),this.onError&&this.onError(r)})}connectTo(t){console.log("Connecting to",t);let r=this.peer.connect(t);this.setDataConnection(r)}setDataConnection(t){this.dataConnection=t,this.dataConnection.on("open",()=>{console.log("Data connection open with",this.dataConnection.peer),this.connected=!0,this.onConnect&&this.onConnect()}),this.dataConnection.on("data",r=>{console.log("Data received from",this.dataConnection.peer,r),this.onMessage&&this.onMessage(r)}),this.dataConnection.on("close",()=>{console.log("Data connection closed with",this.dataConnection.peer),this.connected=!1}),this.dataConnection.on("error",r=>{console.error("Data connection error with",this.dataConnection.peer,r),this.onError&&this.onError(r)})}sendMessage(t){console.log("Sending message to",this.dataConnection.peer,t),this.dataConnection.send(t)}close(){console.log("Closing connection with",this.dataConnection.peer),this.dataConnection.close(),this.peer.destroy()}}function jl(){return{interval:null,seconds:100,isPaused:!1}}const mo={showFilter:!0,showSearch:!0,show:!1,increment(c){P.pedidos!==null&&P.pedidos.length!==0&&P.reLoader&&(c.seconds--,c.seconds==0&&(c.seconds=100,P.pedidos=null,P.fetchPendientes()),o.redraw())},start(c){c.interval=setInterval(mo.increment,1e3,c)},stop(c){c.interval=clearInterval(c.interval)},reset(c){c.seconds=100},toggle(c){c.isPaused?mo.start(c):mo.stop(c),c.isPaused=!c.isPaused}};function Vl(){const c=jl();return mo.start(c),{view(){return[o("div.mg-b-0",[o("div.progress.ht-4.mg-b-0.op-5",o(".progress-bar.bg-primary.[role='progressbar'][aria-valuenow='"+c.seconds+"'][aria-valuemin='0'][aria-valuemax='60']",{oncreate:t=>{t.dom.style.width="100%"},onupdate:t=>{t.dom.style.width=c.seconds+"%"}}))])]},onremove(){mo.stop(c)}}}class Ql{constructor(t){this.div=document.getElementById(t),this.intervalo=setInterval(()=>this.actualizar(),1e3)}actualizar(){let t=new Date().getHours(),r=new Date().getMinutes(),n=new Date().getSeconds();t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n);let a=t+":"+r+":"+n;this.div.textContent=a}detener(){clearInterval(this.intervalo)}}class no{view(){return[o("div.content.content-components",o("div.container",{style:{"max-width":"100%"}},[o("div.d-flex",[o("div.flex-grow-1",o("h1.df-title.mg-t-20.mg-b-10",["Laboratorio: ",o("span.tx-40.badge.bg-litecoin.pd-10.tx-white.mg-r-10",P.getToma()),o("i.fas.fa-edit.tx-40.tx-light",{title:" Editar ",onclick:()=>{P.showConfigToma=!P.showConfigToma}})])),o("div.d-flex.mg-l-auto",o("div[id='reloj'].df-title.mg-t-20.mg-b-10",{oncreate:()=>new Ql("reloj")}),o("i",{title:" Editar ",class:"fas fa-clock mg-l-4 mg-t-30 tx-32 tx-light"}))]),o("div.mg-t-20.d.flex",{class:P.showConfigToma==null||P.showConfigToma==!1?"d-none":""},[o("fieldset.form-fieldset",[o("legend.pd-2","MODIFICAR TOMA:"),o("div.tx-30",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='customRadio1'][name='customRadio']",{checked:P.idToma=="TOMA1",onchange:t=>{P.idToma="TOMA1",localStorage.setItem("peerId",P.idToma)}}),o("label.custom-control-label[for='customRadio1']","TOMA 1")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='customRadio2'][name='customRadio']",{checked:P.idToma=="TOMA2",onchange:t=>{P.idToma="TOMA2",localStorage.setItem("peerId",P.idToma)}}),o("label.custom-control-label[for='customRadio2']","TOMA  2")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='customRadio3'][name='customRadio']",{checked:P.idToma=="TOMA3",onchange:t=>{P.idToma="TOMA3",localStorage.setItem("peerId",P.idToma)}}),o("label.custom-control-label[for='customRadio3']","TOMA  3")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='customRadio4'][name='customRadio']",{checked:P.idToma=="TOMA4",onchange:t=>{P.idToma="TOMA4",localStorage.setItem("peerId",P.idToma)}}),o("label.custom-control-label[for='customRadio4']","TOMA  4")]),o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='customRadio5'][name='customRadio']",{checked:P.idToma=="TOMA5",onchange:t=>{P.idToma="TOMA5",localStorage.setItem("peerId",P.idToma)}}),o("label.custom-control-label[for='customRadio5']","TOMA 5")])])])]),o("div.row.mg-t-20",{class:P.showConfigToma==null||P.showConfigToma==!1?"":"d-none"},[o("li.list-item.bg-success.wd-100p",{class:P.showGestionados?"d-none":"",onclick:()=>{P.showPendientes=!P.showPendientes,P.reLoader=!P.reLoader,P.pedidos==null&&P.fetchPendientes()}},[o("div.media",[o("div.wd-60.tx-center.pd-10 bg-litecoin",o("i.fas.fa-flask.tx-30.tx-white")),o("div.media-body.mg-l-15",[o("p.tx-40.mg-b-0.tx-white","Pendientes")])])]),o("div.bg-white.wd-100p.pd-2",{class:P.showPendientes?"":"d-none"},[o("div.d-flex.bg-gray-200",[o("div.pd-10.bg-gray-300.flex-grow-1","Usuario: "+P.getUsrToma()),o("div.pd-10.bg-gray-500",{style:{cursor:"pointer"},onclick:()=>{P.pedidos=null,P.fetchPendientes()}},"Actualizar")]),o("div.pd-5",[o(Vl)]),o("div.wd-100p.bg-white.pd-10",[P.pedidos!==null&&P.pedidos.status?[P.vTablePedidos("table-pedidos",P.pedidos.data,P.arqTablePedidos())]:P.pedidos!==null&&(!P.pedidos.status||P.pedidos.status==null)?[o(Rt,{type:P.pedidos.status?0:1,error:P.pedidos})]:[o(we)]])]),o("li.list-item.bg-white.wd-100p",{class:P.showPendientes?"d-none":"",onclick:()=>{P.showGestionados=!P.showGestionados}},[o("div.media",[o("div.wd-60.tx-center.pd-10 bg-litecoin",o("i.fas.fa-file-alt.tx-30.tx-white")),o("div.media-body.mg-l-15",[o("p.tx-40.mg-b-0","Gestionados")])])]),o("li.list-item.bg-white.wd-100p",{class:P.showPendientes?"d-none":""},[o("div.media.wd-100p",[o("div.wd-60.tx-center.pd-10.bg-litecoin",o("i.fas.fa-user.tx-30.tx-white")),o("div.media-body.mg-l-15",[o("button.btn.btn-xs.btn-brand-02.btn-block.tx-semibold.mg-t-1.tx-18",{class:localStorage.authTokenFlebotomista!==void 0?"d-none":"",onclick:()=>{P.autorizar()}},[o("img.mg-r-2.pd-8[src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHYAAAB2CAYAAAAdp2cRAAAABHNCSVQICAgIfAhkiAAAAZ5JREFUeJzt17FNHFEYRtE3qxUJkmtw5hBRASKhBMf04cA4cEwLWwfRVgCiA2qw5MCSvc85It0Z6eqc8J/ke7rRLL+/XT+M3e77qDqdflz+fHl4f358+To3WLOa3dYDOA9ho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4SNEjZK2Chho4QFAIDl6unX/Rjzfush57McXu8+Hd5f/zx/Oa6/ZT37MefnZRk3Ww85lznn8eMvS/bNY/iPzRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2StgoYaOEjRI2aj9OF4e5/3vcesjZ/Nu/fXTeLfN25SWr+g/+GiEp5JSeMAAAAABJRU5ErkJggg=='][alt='Microsoft'][width='5%'][height='5%']")," Autorizar Usuario "]),o("div.tx-40.mg-b-0",{class:localStorage.authTokenFlebotomista==null?"d-none":""},[o("div.d-inline","Usuario: "+P.getUsrToma()),o("i.fas.fa-edit.tx-40.tx-light.mg-l-15",{title:" Editar ",onclick:()=>{localStorage.removeItem("authTokenFlebotomista"),window.location.reload()}})])])])])])]))]}}A(no,"opcPendientes",!0),A(no,"opcGestionados",!0),A(no,"showPendientes",!0),A(no,"showGestionados",!0);const dt=class extends y{constructor(){super(),y.title="Flebotomia",this.view=this.page}static autorizar(){y.autorizarMSA("Flebotomista")}static getUsrToma(){return localStorage.authTokenFlebotomista!==void 0?JSON.parse(localStorage.authTokenFlebotomista).usr.split("@")[0]:"Sin Nombre"}static getToma(){return localStorage.peerId==null?"Sin Nombre":localStorage.peerId}static fetchPendientes(){return o.request({method:"GET",url:"https://lisa.hospitalmetropolitano.org/v1/listar?type=ingresadasFlebotomia&idFiltro=4",headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){return dt.pedidos=t,t}).catch(function(t){return{status:null,message:t}})}static vTablePedidos(t,r,n){return[o(Qt,{idTable:t,dataTable:r,arqTable:n})]}static arqTablePedidos(t,r,n){return{data:dt.pedidos,dom:"t",responsive:!0,language:{searchPlaceholder:"Buscar...",sSearch:"",lengthMenu:"Mostrar _MENU_ registros por p\xE1gina",sProcessing:"Procesando...",sZeroRecords:"Todav\xEDa no tienes resultados disponibles.",sEmptyTable:"Ning\xFAn dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"\xDAltimo",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},cache:!1,pageLength:100,destroy:!0,columns:[{title:""},{title:"Fecha:"},{title:"SC:"},{title:"Paciente:"},{title:"Nhc:"},{title:"Opciones:"}],aoColumnDefs:[{mRender:function(a,i,s,l){return l.row+l.settings._iDisplayStart+1},fnCreatedCell:function(a,i,s,l,u){return o.mount(a,{view:()=>[o("button.btn-xs[type='button']",{class:"bg-warning"},o("i.fas.fa-bell.tx-22"),o("div.tx-12.tx-semibold","Llamar"),o("div.d-inline.tx-12.tx-semibold.tx-danger",""))]})},visible:!0,aTargets:[0],orderable:!0},{mRender:function(a,i,s){return moment(s.fechaPedido,"DD-MM-YYYY HH:mm:ss").unix()},fnCreatedCell:function(a,i,s,l,u){return o.mount(a,{view:()=>o(".d-block.pd-0.mg-0",s.fechaPedido)})},visible:!0,aTargets:[1],orderable:!0},{mRender:function(a,i,s){return s.codigoPedido},fnCreatedCell:function(a,i,s,l,u){return o.mount(a,{view:()=>o(".d-block.pd-0.mg-0",s.codigoPedido)})},visible:!0,aTargets:[2],orderable:!0},{mRender:function(a,i,s){return s.paciente},fnCreatedCell:function(a,i,s,l,u){return o.mount(a,{view:()=>[o(".d-block.pd-0.mg-0.tx-12.tx-primary.op-9",s.sector),o(".d-block.pd-0.mg-0",s.paciente)]})},visible:!0,aTargets:[3],orderable:!0},{mRender:function(a,i,s){return s.numeroHistoriaClinica},fnCreatedCell:function(a,i,s,l,u){return o.mount(a,{view:()=>o(".d-block.pd-0.mg-0",s.numeroHistoriaClinica)})},visible:!0,aTargets:[4],orderable:!0},{fnCreatedCell:function(a,i,s,l,u){return o.mount(a,{view:()=>[o("button.btn-xs.btn-block.tx-white[type='button']",{style:{"background-color":"#185b98"}},o("i.fas.fa-folder-open.tx-22"),o("div.tx-12.tx-semibold","Ver"))]})},visible:!0,aTargets:[5],orderable:!0}]}}getConnectRTC(){return new Promise(function(t,r){dt.idToma=localStorage.getItem("peerId")!==void 0?localStorage.getItem("peerId"):dt.idToma,dt.peer=new $l(n=>{dt.peer.peer.onError(a=>{console.log(" ee ",a)})})})}vHeader(){return o(Rr)}vMain(){return[o(no)]}page(){return[this.vHeader(),this.vMain()]}};let P=dt;A(P,"isConnect",!1),A(P,"peer",null),A(P,"otherPeer"),A(P,"peerMessage"),A(P,"showConfigToma",!1),A(P,"idToma",null),A(P,"usrToma",null),A(P,"pedidos",null),A(P,"reLoader",!1);class gr{}A(gr,"modulos",[{page:"imagen/pedidos",label:"Recepci\xF3n de Pedidos",profile:"PERFIL_PEDIDOS_IMAGEN_METROPLUS",icon:"fa-inbox"},{page:"imagen/agendas",label:"Agenda Centralizada",profile:"PERFIL_AGENDAMV_IMAGEN_METROPLUS",icon:"fa-calendar-day"}]);class Wl{view(){if(gr.modulos.length!==0)return[gr.modulos.map(function(t,r,n){if(y.hasProfile(t.profile))return[o(o.route.Link,{href:"/"+t.page,class:Pr.page==t.page?"active":""},[t.label])]})]}}class Pr{oninit(t){Pr.page=t.attrs.page}view(){return[o(".sidebar.sidebar-fixed.sidebar-components[id='sidebarMenu']",[o("div.sidebar-header",[o("a[href=''][id='mainMenuOpen']",o("i[data-feather='menu']")),o("h5","Menu"),o("a[href=''][id='sidebarMenuClose']",o("i[data-feather='x']"))]),o("div.sidebar-body",o("ul.sidebar-nav",[o("li.nav-label.mg-b-15","Imagen"),o("li.nav-item.show",[o(o.route.Link,{href:"/imagen",class:"nav-link with-sub"},[o("i[data-feather='layout']")," Imagen "]),o("nav.nav",[o(Wl)])])]))])]}}class Jl{view(){return gr.modulos.map(function(t,r,n){if(y.hasProfile(t.profile))return[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a",{style:{color:"#325a98"},href:"/"+t.page},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas",{class:t.icon})),o("p.tx-color-03.mg-b-0.tx-semibold",t.label)])])]))]})}}class Xl extends y{constructor(){super(),y.isAuthenticated()&&y.hasProfile("PERFIL_IMAGEN_METROPLUS")&&(y.setTitle("Imagen"),this.view=this.page)}vHeader(){return o(Ue,{userName:y.userName})}vMain(){return[o("div.content.content-components",{},o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-10",y.title+":"),o("div.row",[o(Jl)])]))]}vMenu(){return o(Pr)}page(){return[this.vHeader(),this.vMenu(),this.vMain()]}}class fr{}A(fr,"modulos",[{page:"imagen/agendas/configuracion",label:"Configuraci\xF3n de Agendas",profile:"PERFIL_AG_ADM_IMAGEN",icon:"fa-cog"},{page:"imagen/agendas/perfiles",label:"Perfiles de Usuario",profile:"PERFIL_AG_ADM_IMAGEN",icon:"fa-user"},{page:"imagen/agendas/calendario",label:"Ver Calendario",profile:"PERFIL_AG_GEST_IMAGEN",icon:"fa-calendar-day"}]);class Zl{view(){if(fr.modulos.length!==0)return[fr.modulos.map(function(t,r,n){if(y.hasProfile(t.profile))return[o(o.route.Link,{href:"/"+t.page,class:Wt.page==t.page?"active":""},[t.label])]})]}}class Wt{oninit(t){Wt.page=t.attrs.page}view(){return[o(".sidebar.sidebar-fixed.sidebar-components[id='sidebarMenu']",[o("div.sidebar-header",[o("a[href=''][id='mainMenuOpen']",o("i[data-feather='menu']")),o("h5","Menu"),o("a[href=''][id='sidebarMenuClose']",o("i[data-feather='x']"))]),o("div.sidebar-body",o("ul.sidebar-nav",[o("li.nav-label.mg-b-15","Imagen"),o("li.nav-item.show",[o(o.route.Link,{href:"/imagen/agendas",class:"nav-link with-sub"},[o("i[data-feather='layout']")," Agenda Centralizada "]),o("nav.nav",[o(Zl)])])]))])]}}class ed{view(){return fr.modulos.map(function(t,r,n){if(y.hasProfile(t.profile))return[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a",{style:{color:"#325a98"},href:"/"+t.page},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas",{class:t.icon})),o("p.tx-color-03.mg-b-0.tx-semibold",t.label)])])]))]})}}class td extends y{constructor(){super(),y.isAuthenticated()&&y.hasProfile("PERFIL_AGENDAMV_IMAGEN_METROPLUS")&&(y.setTitle("Agenda Centralizada"),this.view=this.page)}vHeader(){return o(Ue,{userName:y.userName})}vMain(){return[o("div.content.content-components",{},o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/imagen"},["Imagen"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-10",y.title+":"),o("div.row",[o(ed)])]))]}vMenu(){return o(Wt)}page(){return[this.vHeader(),this.vMenu(),this.vMain()]}}class Tt extends y{constructor(){super(),y.isAuthenticated()&&(y.setTitle("Agenda Centralizada"),this.view=Tt.page)}static vHeader(){return o(Ue,{userName:y.userName})}static setSidebar(){$("#calendarInline").datepicker({showOtherMonths:!0,selectOtherMonths:!0,beforeShowDay:function(t){var r=t.getDate();return console.log(r),[!0,r<10?"zero":""]}}),setTimeout(function(){new PerfectScrollbar("#calendarSidebarBody",{suppressScrollX:!0})},100),$("#calendarSidebarShow").on("click",function(t){t.preventDefault(),$("body").toggleClass("calendar-sidebar-show"),$(this).addClass("d-none"),$("#mainMenuOpen").removeClass("d-none")}),$(document).on("click touchstart",function(t){if(t.stopPropagation(),!$(t.target).closest(".burger-menu").length){var r=$(t.target).closest(".calendar-sidebar").length;r||($("body").removeClass("calendar-sidebar-show"),$("#mainMenuOpen").addClass("d-none"),$("#calendarSidebarShow").removeClass("d-none"))}}),$('[data-toggle="tooltip"]').tooltip()}static setCalendar(){$("#calendar").fullCalendar({height:"parent",header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listWeek"},navLinks:!0,selectable:!0,selectLongPressDelay:100,editable:!1,nowIndicator:!0,defaultView:"listMonth",minTime:"06:00:00",maxTime:"21:00:00",slotDuration:"00:15:00",slotLabelInterval:15,slotLabelFormat:"HH:mma",slotMinutes:15,timeFormat:"HH:mma",views:{agenda:{columnHeaderHtml:function(r){return"<span>"+r.format("ddd")+"</span><span>"+r.format("DD")+"</span>"}},day:{columnHeader:!1},listMonth:{listDayFormat:"ddd DD",listDayAltFormat:!1},listWeek:{listDayFormat:"ddd DD",listDayAltFormat:!1},agendaThreeDay:{type:"agenda",duration:{days:3},titleFormat:"MMMM YYYY"}},eventSources:[],eventAfterAllRender:function(r){if(r.name==="listMonth"||r.name==="listWeek"){var n=r.el.find(".fc-list-heading-main");n.each(function(){var a=$(this).text().split(" "),i=moment().format("DD");$(this).html(a[0]+"<span>"+a[1]+"</span>"),i===a[1]&&$(this).addClass("now")})}console.log(r.el)},eventRender:function(r,n){r.description&&(n.find(".fc-list-item-title").append('<span class="fc-desc">'+r.description+"</span>"),n.find(".fc-content").append('<span class="fc-desc">'+r.description+"</span>"));var a=r.source.borderColor?r.source.borderColor:r.borderColor;n.find(".fc-list-item-time").css({color:a,borderColor:a}),n.find(".fc-list-item-title").css({borderColor:a}),n.css("borderLeftColor",a)}});var t=$("#calendar").fullCalendar("getCalendar");window.matchMedia("(min-width: 576px)").matches&&t.changeView("agendaWeek"),window.matchMedia("(min-width: 992px)").matches&&t.changeView("month"),t.option("windowResize",function(r){r.name==="listWeek"&&(window.matchMedia("(min-width: 992px)").matches?t.changeView("month"):t.changeView("listWeek"))}),t.on("eventClick",function(r,n,a){r.stAgendar==1}),t.getDate(),t.option("select",function(r,n){throw alert("Seleccione una cita disponible."),"Seleccione una cita disponible."}),$(".select2-modal").select2({minimumResultsForSearch:1/0,dropdownCssClass:"select2-dropdown-modal"}),$(".calendar-add").on("click",function(r){r.preventDefault(),$("#modalCreateEvent").modal("show")})}static vMain(){return[o("div.calendar-wrapper",[o("div.calendar-sidebar",[o("div.calendar-sidebar-header",[o("i[data-feather='search']"),o("div.search-form",[o("input.form-control[type='search'][placeholder='Buscar por Apellidos y Nombres']")]),o("a.btn btn-sm btn-primary btn-icon calendar-add",[o("div[data-toggle='tooltip']",[o("i.tx-white[data-feather='plus']")])])]),o("div.calendar-sidebar-body[id='calendarSidebarBody']",{oncreate:()=>{Tt.setSidebar()}},[o("div.calendar-inline",[o("div[id='calendarInline']")]),o("div.pd-t-0.pd-l-20.pd-r-20",[o("label.tx-uppercase.tx-sans.tx-10.tx-medium.tx-spacing-1.tx-color-03.mg-b-15","Filtro Calendarios: "),o("div.schedule-group",o("select.form-control.select2-limit[multiple='multiple']",{oncreate:()=>{$(".select2-limit").select2({placeholder:"Seleccione...",searchInputPlaceholder:"Buscar"})}},[o("option[label='Choose one']"),o("option[value='Firefox']","Firefox"),o("option[value='Chrome']","Chrome"),o("option[value='Safari']","Safari"),o("option[value='Opera']","Opera"),o("option[value='Internet Explorer']","Internet Explorer")]))]),o("div.pd-t-20.pd-l-20.pd-r-20",[o("label.tx-uppercase.tx-sans.tx-10.tx-medium.tx-spacing-1.tx-color-03.mg-b-15","Ultimos agendamientos:"),o("div.schedule-group",[])])])]),o("div.calendar-content",[o("div.pd-20",[o(we)]),o("div.calendar-content-body[id='calendar']",{oncreate:()=>{Tt.setCalendar()}})])])]}static vMenu(){return o(Wt)}static page(){return[Tt.vHeader(),Tt.vMain()]}}class od extends y{constructor(r){super();A(this,"usuarios",null);A(this,"dataUser",null);A(this,"idAgenda",null);A(this,"v",null);A(this,"idFiltro",1);y.isAuthenticated()&&y.hasProfile("PERFIL_AG_ADM_IMAGEN")&&(y.setTitle("Configuraci\xF3n de Agendas"),this.view=this.page)}oncreate(r){r.attrs.idFiltro!==void 0&&(this.idFiltro=r.attrs.idFiltro),this.fetchData().then(n=>{this.usuarios=n})}onupdate(r){r.attrs.idAgenda!==void 0?this.idAgenda=r.attrs.idAgenda:this.idAgenda=null,r.attrs.view!==void 0?this.v=r.attrs.view:this.v=null,o.redraw()}vHeader(){return o(Ue,{userName:y.userName})}vMain(){return[o("div.content.content-components",o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/imagen"},["Imagen"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/imagen/agendas"},["Agenda Centralizada"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-20",y.title+":"),o("div",[this.usuarios!==null&&this.usuarios.status?[o("div.table-content.col-12.pd-r-0.pd-l-0",[o("div.d-flex.align-items-center.justify-content-between.mg-t-10",[o("h5.mg-b-0","Todas las Agendas:",o("span.badge.bg-litecoin.tx-white.tx-semibold.pd-l-10.pd-r-10.mg-l-5.tx-14",[o("i.fas.fa-calendar-day.pd-2")," Agendas Disponibles "])),o("div.d-flex",[o("span.badge.bg-litecoin.tx-white.tx-semibold.pd-l-10.pd-r-10.mg-l-5.tx-14[role='button']",[o("div.dropdown.dropleft",[o("div.lh-0.mg-l-5[id='dropdownMenuButton'][data-toggle='dropdown'][aria-haspopup='true'][aria-expanded='false']",{style:{cursor:"pointer"},title:"Filtrar"},o("i.fas.fa-filter.pd-2")," Filtrar "),o(".dropdown-menu.tx-14[aria-labelledby='dropdownMenuButton']",[o(".dropdown-header.tx-uppercase.tx-12.tx-bold.tx-inverse","FILTROS:"),o(o.route.Link,{class:"dropdown-item",href:"/imagen/agendas/configuracion/?idFiltro=1",onclick:r=>{this.reloadData(1),this.fetchData().then(n=>{this.usuarios=n})}},["Agendas Disponibles"]),o(o.route.Link,{class:"dropdown-item",href:"/imagen/agendas/configuracion/?idFiltro=2",onclick:r=>{this.reloadData(2),this.fetchData().then(n=>{this.usuarios=n})}},["Agendas Bloqueadas"])])])]),o("span.badge.bg-litecoin.tx-white.tx-semibold.pd-l-10.pd-r-10.mg-l-5.tx-14",{style:{cursor:"pointer"},onclick:()=>{o.route.set("/imagen/agendas/configuracion/?view=new")}},[o("i.fas.fa-plus-circle.pd-2")," Nueva Agenda "])])])]),o("hr.mg-b-0"),this.vTableUsuarios("table-usr",this.usuarios.data,this.arqTable())]:this.usuarios!==null&&(!this.usuarios.status||this.usuarios.status==null)?[o(Rt,{type:this.usuarios.status?0:1,error:this.usuarios})]:[o(we)]])])),o("div.section-nav",{class:this.usuarios!==null?"":"d-none"},[o("label.nav-label",y.title+":"),o("div.mg-t-10.bg-white",{},o("div.mg-t-10.bg-white",o("div.card-header.pd-t-20.pd-b-0.bd-b-0",[o("h6.lh-5.mg-b-5","N\xB0 de Resultados:")]),o("div.card-body.pd-0",[o("div.pd-t-10.pd-b-0.pd-x-20.d-flex.align-items-baseline",[o("h2.tx-normal.tx-rubik.mg-b-0.mg-r-5",this.usuarios!==null?this.usuarios.data.length:0),o("div.tx-14",[o("divv.lh-0.tx-gray-300","Resultado(s)")])])])),o("div.pd-20",[o(Po)]))])]}vMainProfile(){return this.fetchProfile(),[o("div.content.content-components",o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/imagen"},["Imagen"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/imagen/agendas"},["Agenda Centralizada"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-10",y.title+":"),this.dataUser!==null?[o("div.table-responsive",[o("table.table.table-bordered.table-sm.tx-14",[o("thead",o("tr.bg-litecoin.op-9.tx-white.tx-uppercase",[o("th[scope='col'][colspan='10']","DATOS DEL USUARIO: "+this.dataUser.samaccountname)])),o("tbody",[o("tr",[o("th",{style:{"background-color":"#a8bed6"}},"Nombres Completos:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.sn+" "+this.dataUser.cn),o("th",{style:{"background-color":"#a8bed6"}},"Grupo:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.grupo)]),o("tr",[o("th",{style:{"background-color":"#a8bed6"}},"Correo electr\xF3nico:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.mail),o("th",{style:{"background-color":"#a8bed6"}},"Historial de Actividad:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},o(".tx-12.d-block","Creado: "+this.dataUser.whencreated),o(".tx-12.d-block","Actualizado: "+this.dataUser.whenchanged),o(".tx-12.d-block","\xDAltima Contrase\xF1a: "+this.dataUser.pwdlastset),o(".tx-12.d-block","\xDAltimo Acceso: "+this.dataUser.lastlogontimestamp))])]),o("tbody",[o("tr.d-print-none.bg-litecoin.op-9.tx-white.",[o("th[scope='col'][colspan='10']","OPCIONES DISPONIBLES:")]),o("tr.d-print-none",[o("td[colspan='10']",{style:{"background-color":"#eaeff5"}},o("ul.nav.nav-tabs[id='myTab'][role='tablist']",{},[o("li.nav-item",o("a.nav-link[id='home-tab'][data-toggle='tab'][href='#home'][role='tab'][aria-controls='home'][aria-selected='true']",{style:{color:"#476ba3"}},o("i.fas.fa-file-alt.pd-1.mg-r-2")," HOJA 005")),o("li.nav-item",o("a.nav-link[id='home-muestra'][data-toggle='tab'][href='#muestra'][role='tab'][aria-controls='muestra']",{style:{color:"#476ba3"}},o("i.fas.fa-edit.pd-1.mg-r-2")," TOMA DE MUESTRA ")),o("li.nav-item",o("a.nav-link[id='home-recep'][data-toggle='tab'][href='#recep'][role='tab'][aria-controls='recep']",{style:{color:"#476ba3"}},o("i.fas.fa-inbox.pd-1.mg-r-2")," RECEP. DE MUESTRA ")),o("li.nav-item",o("a.nav-link[id='home-comment'][data-toggle='tab'][href='#comment'][role='tab'][aria-controls='comment']",{style:{color:"#476ba3"}},o("i.fas.fa-inbox.pd-1.mg-r-2")," COMENTARIOS "))]))]),o("tr.d-print-none",[o("td[colspan='10']",o(".tab-content.bd.bd-gray-300.bd-t-0[id='myTab']",[o(".tab-pane.fade[id='home'][role='tabpanel'][aria-labelledby='home-tab']",[]),o(".tab-pane.fade[id='muestra'][role='tabpanel'][aria-labelledby='home-muestra']",[]),o(".tab-pane.fade[id='recep'][role='tabpanel'][aria-labelledby='home-recep']",[]),o(".tab-pane.fade[id='comment'][role='tabpanel'][aria-labelledby='home-comment']",[o("p.mg-5",[o("span.badge.badge-light.wd-100p.tx-14","Observaciones"),o("textarea.form-control.mg-t-5[rows='5'][placeholder='Observaciones']",{}),o("div.mg-0.mg-t-5.text-right",[o("button.btn.btn-xs.btn-primary.mg-l-2.tx-semibold[type='button']",{onclick:function(){}},[o("i.fas.fa-paper-plane.mg-r-5")],"Guardar")]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("p.mg-5",[o("span.badge.badge-light.wd-100p.tx-14","Historial de Observaciones"),o("table.table.table-sm[id='table-observaciones'][width='100%']")])])]))])])])])]:[o(we)]]))]}vMenu(){return o(Wt,{page:"administracion/metrovirtual"})}reloadData(r){this.usuarios=null,this.idFiltro=r}fetchProfile(){let r=this;if(r.usuarios!==null&&r.usuarios.status)return r.usuarios.data.map(function(n,a,i){r.idAgenda==n.samaccountname&&(r.dataUser=n)})}fetchData(){let r="?idFiltro="+this.idFiltro;return o.request({method:"GET",url:Be.apiUrl+"/v2/usuarios/metroplus"+r,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:localStorage.getItem("userToken")}}).then(function(n){return n}).catch(function(n){return{status:null,message:n}})}arqTable(){return{data:null,dom:"ltp",language:{searchPlaceholder:"Buscar...",sSearch:"",lengthMenu:"Mostrar _MENU_ registros por p\xE1gina",sProcessing:"Procesando...",sZeroRecords:"Todav\xEDa no tienes resultados disponibles.",sEmptyTable:"Ning\xFAn dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"\xDAltimo",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},cache:!1,destroy:!0,columns:[{title:"N\xB0 : "},{title:"Usuario AD:"},{title:"Nombres:"},{title:"Apellidos:"},{title:"E-mail:"},{title:"Opciones:"}],aoColumnDefs:[{mRender:function(r,n,a,i){return i.row+i.settings._iDisplayStart+1},visible:!0,aTargets:[0],orderable:!1},{mRender:function(r,n,a){return a.samaccountname},visible:!0,aTargets:[1],orderable:!0},{mRender:function(r,n,a){return a.sn},visible:!0,aTargets:[2],orderable:!0},{mRender:function(r,n,a){return a.cn},visible:!0,aTargets:[3],orderable:!0},{mRender:function(r,n,a){return a.mail},visible:!0,aTargets:[4],orderable:!0},{mRender:function(r,n,a){return""},visible:!0,aTargets:[5],orderable:!0}],fnRowCallback:function(r,n,a,i){o.mount(r,{view:()=>[o("td",[i+1]),o("td",[n.samaccountname]),o("td",[n.sn]),o("td",[n.cn]),o("td",[n.mail,o("br"),o("span.tx-12[data-toggle='collapse'][href='#collapseExample_"+n.samaccountname+"'][role='button'][aria-expanded='false'][aria-controls='collapseExample_"+n.samaccountname+"']",{style:"cursor:pointer;"},"Creado: "+n.whencreated),o(".collapse[id='collapseExample_"+n.samaccountname+"']",[o(".tx-12.d-block","Actualizado: "+n.whenchanged),o(".tx-12.d-block","\xDAltima Contrase\xF1a: "+n.pwdlastset),o(".tx-12.d-block","\xDAltimo Acceso: "+n.lastlogontimestamp)])]),o("td",[o("button.btn.btn-sm.btn-block.tx-semibold.tx-white",{style:{"background-color":"#185b98"},onclick:()=>{o.route.set("/imagen/agendas/configuracion/",{idAgenda:n.samaccountname})}},"Ver")])]})}}}vTableUsuarios(r,n,a){return[o(Qt,{idTable:r,dataTable:n,arqTable:a})]}page(){return[this.vHeader(),this.vMenu(),this.idAgenda==null&&this.v==null?[this.vMain()]:this.idAgenda!==null&&this.v==null?[this.vMainProfile()]:this.idAgenda==null&&this.v!==null?[this.vMainProfile()]:[]]}}class br{}A(br,"modulos",[{page:"endoscopia/pedidos",label:"Recepci\xF3n de Pedidos",profile:"PERFIL_PEDIDOS_IMAGEN_METROPLUS",icon:"fa-inbox"},{page:"endoscopia/agendas",label:"Agenda Centralizada",profile:"PERFIL_AGENDAMV_ENDOSCOPIA_METROPLUS",icon:"fa-calendar-day"}]);class rd{view(){if(br.modulos.length!==0)return[br.modulos.map(function(t,r,n){if(y.hasProfile(t.profile))return[o(o.route.Link,{href:"/"+t.page,class:Nr.page==t.page?"active":""},[t.label])]})]}}class Nr{oninit(t){Nr.page=t.attrs.page}view(){return[o(".sidebar.sidebar-fixed.sidebar-components[id='sidebarMenu']",[o("div.sidebar-header",[o("a[href=''][id='mainMenuOpen']",o("i[data-feather='menu']")),o("h5","Menu"),o("a[href=''][id='sidebarMenuClose']",o("i[data-feather='x']"))]),o("div.sidebar-body",o("ul.sidebar-nav",[o("li.nav-label.mg-b-15","Endoscop\xEDa"),o("li.nav-item.show",[o(o.route.Link,{href:"/endoscop\xEDa",class:"nav-link with-sub"},[o("i[data-feather='layout']")," Endoscop\xEDa "]),o("nav.nav",[o(rd)])])]))])]}}class nd{view(){return br.modulos.map(function(t,r,n){if(y.hasProfile(t.profile))return[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a",{style:{color:"#325a98"},href:"/"+t.page},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas",{class:t.icon})),o("p.tx-color-03.mg-b-0.tx-semibold",t.label)])])]))]})}}class ad extends y{constructor(){super(),y.isAuthenticated()&&y.hasProfile("PERFIL_ENDOSCOPIA_METROPLUS")&&(y.setTitle("Endoscop\xEDa"),this.view=this.page)}vHeader(){return o(Ue,{userName:y.userName})}vMain(){return[o("div.content.content-components",{},o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-10",y.title+":"),o("div.row",[o(nd)])]))]}vMenu(){return o(Nr)}page(){return[this.vHeader(),this.vMenu(),this.vMain()]}}class id extends y{constructor(){super();try{y.auth.logout(),y.logout()}catch{m.route.set("/")}}view(){}}class vr{}A(vr,"modulos",[{page:"endoscopia/agendas/configuracion",label:"Configuraci\xF3n de Agendas",profile:"PERFIL_AG_ADM_ENDOSCOPIA",icon:"fa-cog"},{page:"endoscopia/agendas/perfiles",label:"Perfiles de Usuario",profile:"PERFIL_AG_ADM_ENDOSCOPIA",icon:"fa-user"},{page:"endoscopia/agendas/calendario",label:"Ver Calendario",profile:"PERFIL_AG_GEST_ENDOSCOPIA",icon:"fa-calendar-day"}]);class sd{view(){if(vr.modulos.length!==0)return[vr.modulos.map(function(t,r,n){if(y.hasProfile(t.profile))return[o(o.route.Link,{href:"/"+t.page,class:Jt.page==t.page?"active":""},[t.label])]})]}}class Jt{oninit(t){Jt.page=t.attrs.page}view(){return[o(".sidebar.sidebar-fixed.sidebar-components[id='sidebarMenu']",[o("div.sidebar-header",[o("a[href=''][id='mainMenuOpen']",o("i[data-feather='menu']")),o("h5","Menu"),o("a[href=''][id='sidebarMenuClose']",o("i[data-feather='x']"))]),o("div.sidebar-body",o("ul.sidebar-nav",[o("li.nav-label.mg-b-15","Endoscop\xEDa"),o("li.nav-item.show",[o(o.route.Link,{href:"/endoscopia/agendas",class:"nav-link with-sub"},[o("i[data-feather='layout']")," Agenda Centralizada "]),o("nav.nav",[o(sd)])])]))])]}}class cd{view(){return vr.modulos.map(function(t,r,n){if(y.hasProfile(t.profile))return[o("div.col-sm-6.col-lg-3.mg-t-20.mg-sm-t-30.mg-lg-t-0.mg-b-10",o("a",{style:{color:"#325a98"},href:"/"+t.page},[o("div.card.card-help",[o("div.card-body.tx-13",[o("div.tx-60.lh-0.mg-b-15",{style:{color:"#325a98"}},o("i.fas",{class:t.icon})),o("p.tx-color-03.mg-b-0.tx-semibold",t.label)])])]))]})}}class ld extends y{constructor(){super(),y.isAuthenticated()&&y.hasProfile("PERFIL_AGENDAMV_ENDOSCOPIA_METROPLUS")&&(y.setTitle("Agenda Centralizada"),this.view=this.page)}vHeader(){return o(Ue,{userName:y.userName})}vMain(){return[o("div.content.content-components",{},o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/endoscopia"},["Endoscop\xEDa"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-10",y.title+":"),o("div.row",[o(cd)])]))]}vMenu(){return o(Jt)}page(){return[this.vHeader(),this.vMenu(),this.vMain()]}}class dd extends y{constructor(r){super();A(this,"usuarios",null);A(this,"dataUser",null);A(this,"idAgenda",null);A(this,"v",null);A(this,"idFiltro",1);y.isAuthenticated()&&y.hasProfile("PERFIL_AG_ADM_ENDOSCOPIA")&&(y.setTitle("Configuraci\xF3n de Agendas"),this.view=this.page)}oncreate(r){r.attrs.idFiltro!==void 0&&(this.idFiltro=r.attrs.idFiltro),this.fetchData().then(n=>{this.usuarios=n})}onupdate(r){r.attrs.idAgenda!==void 0?this.idAgenda=r.attrs.idAgenda:this.idAgenda=null,r.attrs.view!==void 0?this.v=r.attrs.view:this.v=null,o.redraw()}vHeader(){return o(Ue,{userName:y.userName})}vMain(){return[o("div.content.content-components",o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/imagen"},["Imagen"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/imagen/agendas"},["Agenda Centralizada"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-20",y.title+":"),o("div",[this.usuarios!==null&&this.usuarios.status?[o("div.table-content.col-12.pd-r-0.pd-l-0",[o("div.d-flex.align-items-center.justify-content-between.mg-t-10",[o("h5.mg-b-0","Todas las Agendas:",o("span.badge.bg-litecoin.tx-white.tx-semibold.pd-l-10.pd-r-10.mg-l-5.tx-14",[o("i.fas.fa-calendar-day.pd-2")," Agendas Disponibles "])),o("div.d-flex",[o("span.badge.bg-litecoin.tx-white.tx-semibold.pd-l-10.pd-r-10.mg-l-5.tx-14[role='button']",[o("div.dropdown.dropleft",[o("div.lh-0.mg-l-5[id='dropdownMenuButton'][data-toggle='dropdown'][aria-haspopup='true'][aria-expanded='false']",{style:{cursor:"pointer"},title:"Filtrar"},o("i.fas.fa-filter.pd-2")," Filtrar "),o(".dropdown-menu.tx-14[aria-labelledby='dropdownMenuButton']",[o(".dropdown-header.tx-uppercase.tx-12.tx-bold.tx-inverse","FILTROS:"),o(o.route.Link,{class:"dropdown-item",href:"/endoscopia/agendas/configuracion/?idFiltro=1",onclick:r=>{this.reloadData(1),this.fetchData().then(n=>{this.usuarios=n})}},["Agendas Disponibles"]),o(o.route.Link,{class:"dropdown-item",href:"/endoscopia/agendas/configuracion/?idFiltro=2",onclick:r=>{this.reloadData(2),this.fetchData().then(n=>{this.usuarios=n})}},["Agendas Bloqueadas"])])])]),o("span.badge.bg-litecoin.tx-white.tx-semibold.pd-l-10.pd-r-10.mg-l-5.tx-14",{style:{cursor:"pointer"},onclick:()=>{o.route.set("/endoscopia/agendas/configuracion/?view=new")}},[o("i.fas.fa-plus-circle.pd-2")," Nueva Agenda "])])])]),o("hr.mg-b-0"),this.vTableUsuarios("table-usr",this.usuarios.data,this.arqTable())]:this.usuarios!==null&&(!this.usuarios.status||this.usuarios.status==null)?[o(Rt,{type:this.usuarios.status?0:1,error:this.usuarios})]:[o(we)]])])),o("div.section-nav",{class:this.usuarios!==null?"":"d-none"},[o("label.nav-label",y.title+":"),o("div.mg-t-10.bg-white",{},o("div.mg-t-10.bg-white",o("div.card-header.pd-t-20.pd-b-0.bd-b-0",[o("h6.lh-5.mg-b-5","N\xB0 de Resultados:")]),o("div.card-body.pd-0",[o("div.pd-t-10.pd-b-0.pd-x-20.d-flex.align-items-baseline",[o("h2.tx-normal.tx-rubik.mg-b-0.mg-r-5",this.usuarios!==null?this.usuarios.data.length:0),o("div.tx-14",[o("divv.lh-0.tx-gray-300","Resultado(s)")])])])),o("div.pd-20",[o(Po)]))])]}vMainProfile(){return this.fetchProfile(),[o("div.content.content-components",o("div.container.mg-l-0.mg-r-0",{style:{"max-width":"100%"}},[o("ol.breadcrumb.df-breadcrumbs",[o("li.breadcrumb-item",o(o.route.Link,{href:"/"},["MetroPlus"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/imagen"},["Imagen"])),o("li.breadcrumb-item",o(o.route.Link,{href:"/imagen/agendas"},["Agenda Centralizada"])),o("li.breadcrumb-item.active[aria-current='page']",y.title)]),o("h1.df-title.mg-t-20.mg-b-10",y.title+":"),this.dataUser!==null?[o("div.table-responsive",[o("table.table.table-bordered.table-sm.tx-14",[o("thead",o("tr.bg-litecoin.op-9.tx-white.tx-uppercase",[o("th[scope='col'][colspan='10']","DATOS DEL USUARIO: "+this.dataUser.samaccountname)])),o("tbody",[o("tr",[o("th",{style:{"background-color":"#a8bed6"}},"Nombres Completos:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.sn+" "+this.dataUser.cn),o("th",{style:{"background-color":"#a8bed6"}},"Grupo:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.grupo)]),o("tr",[o("th",{style:{"background-color":"#a8bed6"}},"Correo electr\xF3nico:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},this.dataUser.mail),o("th",{style:{"background-color":"#a8bed6"}},"Historial de Actividad:"),o("td[colspan='4']",{style:{"background-color":"#eaeff5"}},o(".tx-12.d-block","Creado: "+this.dataUser.whencreated),o(".tx-12.d-block","Actualizado: "+this.dataUser.whenchanged),o(".tx-12.d-block","\xDAltima Contrase\xF1a: "+this.dataUser.pwdlastset),o(".tx-12.d-block","\xDAltimo Acceso: "+this.dataUser.lastlogontimestamp))])]),o("tbody",[o("tr.d-print-none.bg-litecoin.op-9.tx-white.",[o("th[scope='col'][colspan='10']","OPCIONES DISPONIBLES:")]),o("tr.d-print-none",[o("td[colspan='10']",{style:{"background-color":"#eaeff5"}},o("ul.nav.nav-tabs[id='myTab'][role='tablist']",{},[o("li.nav-item",o("a.nav-link[id='home-tab'][data-toggle='tab'][href='#home'][role='tab'][aria-controls='home'][aria-selected='true']",{style:{color:"#476ba3"}},o("i.fas.fa-file-alt.pd-1.mg-r-2")," HOJA 005")),o("li.nav-item",o("a.nav-link[id='home-muestra'][data-toggle='tab'][href='#muestra'][role='tab'][aria-controls='muestra']",{style:{color:"#476ba3"}},o("i.fas.fa-edit.pd-1.mg-r-2")," TOMA DE MUESTRA ")),o("li.nav-item",o("a.nav-link[id='home-recep'][data-toggle='tab'][href='#recep'][role='tab'][aria-controls='recep']",{style:{color:"#476ba3"}},o("i.fas.fa-inbox.pd-1.mg-r-2")," RECEP. DE MUESTRA ")),o("li.nav-item",o("a.nav-link[id='home-comment'][data-toggle='tab'][href='#comment'][role='tab'][aria-controls='comment']",{style:{color:"#476ba3"}},o("i.fas.fa-inbox.pd-1.mg-r-2")," COMENTARIOS "))]))]),o("tr.d-print-none",[o("td[colspan='10']",o(".tab-content.bd.bd-gray-300.bd-t-0[id='myTab']",[o(".tab-pane.fade[id='home'][role='tabpanel'][aria-labelledby='home-tab']",[]),o(".tab-pane.fade[id='muestra'][role='tabpanel'][aria-labelledby='home-muestra']",[]),o(".tab-pane.fade[id='recep'][role='tabpanel'][aria-labelledby='home-recep']",[]),o(".tab-pane.fade[id='comment'][role='tabpanel'][aria-labelledby='home-comment']",[o("p.mg-5",[o("span.badge.badge-light.wd-100p.tx-14","Observaciones"),o("textarea.form-control.mg-t-5[rows='5'][placeholder='Observaciones']",{}),o("div.mg-0.mg-t-5.text-right",[o("button.btn.btn-xs.btn-primary.mg-l-2.tx-semibold[type='button']",{onclick:function(){}},[o("i.fas.fa-paper-plane.mg-r-5")],"Guardar")]),o("hr.wd-100p.mg-t-5.mg-b-5")]),o("p.mg-5",[o("span.badge.badge-light.wd-100p.tx-14","Historial de Observaciones"),o("table.table.table-sm[id='table-observaciones'][width='100%']")])])]))])])])])]:[o(we)]]))]}vMenu(){return o(Jt,{page:"administracion/metrovirtual"})}reloadData(r){this.usuarios=null,this.idFiltro=r}fetchProfile(){let r=this;if(r.usuarios!==null&&r.usuarios.status)return r.usuarios.data.map(function(n,a,i){r.idAgenda==n.samaccountname&&(r.dataUser=n)})}fetchData(){let r="?idFiltro="+this.idFiltro;return o.request({method:"GET",url:Be.apiUrl+"/v2/usuarios/metroplus"+r,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:localStorage.getItem("userToken")}}).then(function(n){return n}).catch(function(n){return{status:null,message:n}})}arqTable(){return{data:null,dom:"ltp",language:{searchPlaceholder:"Buscar...",sSearch:"",lengthMenu:"Mostrar _MENU_ registros por p\xE1gina",sProcessing:"Procesando...",sZeroRecords:"Todav\xEDa no tienes resultados disponibles.",sEmptyTable:"Ning\xFAn dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"\xDAltimo",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},cache:!1,destroy:!0,columns:[{title:"N\xB0 : "},{title:"Usuario AD:"},{title:"Nombres:"},{title:"Apellidos:"},{title:"E-mail:"},{title:"Opciones:"}],aoColumnDefs:[{mRender:function(r,n,a,i){return i.row+i.settings._iDisplayStart+1},visible:!0,aTargets:[0],orderable:!1},{mRender:function(r,n,a){return a.samaccountname},visible:!0,aTargets:[1],orderable:!0},{mRender:function(r,n,a){return a.sn},visible:!0,aTargets:[2],orderable:!0},{mRender:function(r,n,a){return a.cn},visible:!0,aTargets:[3],orderable:!0},{mRender:function(r,n,a){return a.mail},visible:!0,aTargets:[4],orderable:!0},{mRender:function(r,n,a){return""},visible:!0,aTargets:[5],orderable:!0}],fnRowCallback:function(r,n,a,i){o.mount(r,{view:()=>[o("td",[i+1]),o("td",[n.samaccountname]),o("td",[n.sn]),o("td",[n.cn]),o("td",[n.mail,o("br"),o("span.tx-12[data-toggle='collapse'][href='#collapseExample_"+n.samaccountname+"'][role='button'][aria-expanded='false'][aria-controls='collapseExample_"+n.samaccountname+"']",{style:"cursor:pointer;"},"Creado: "+n.whencreated),o(".collapse[id='collapseExample_"+n.samaccountname+"']",[o(".tx-12.d-block","Actualizado: "+n.whenchanged),o(".tx-12.d-block","\xDAltima Contrase\xF1a: "+n.pwdlastset),o(".tx-12.d-block","\xDAltimo Acceso: "+n.lastlogontimestamp)])]),o("td",[o("button.btn.btn-sm.btn-block.tx-semibold.tx-white",{style:{"background-color":"#185b98"},onclick:()=>{o.route.set("/endoscopia/agendas/configuracion/",{idAgenda:n.samaccountname})}},"Ver")])]})}}}vTableUsuarios(r,n,a){return[o(Qt,{idTable:r,dataTable:n,arqTable:a})]}page(){return[this.vHeader(),this.vMenu(),this.idAgenda==null&&this.v==null?[this.vMain()]:this.idAgenda!==null&&this.v==null?[this.vMainProfile()]:this.idAgenda==null&&this.v!==null?[this.vMainProfile()]:[]]}}class ud{view(){return[o("li.nav-item",o(o.route.Link,{href:"/inicio",class:"nav-link"},[o("i[data-feather='layout']")," Inicio "]))]}}class hd{view(t){return[o("header.navbar.navbar-header.navbar-header-fixed",[o("a.burger-menu.d-none[href=''][id='sidebarMenuOpen']",o("i[data-feather='arrow-left']")),o("a.burger-menu.d-lg-none[href=''][id='calendarSidebarShow']",o("i[data-feather='arrow-left']")),o("div.navbar-brand",o(o.route.Link,{href:"/",class:"df-logo"},["Metro",o("span","Plus+")])),o(".navbar-menu-wrapper[id='navbarMenu']",[o("div.navbar-menu-header",[o(o.route.Link,{href:"/",class:"df-logo"},["Metro",o("span","Plus+")]),o("a[id='mainMenuClose'][href='']",o("i[data-feather='x']"))]),o("ul.nav.navbar-menu",[o("li.nav-label.pd-l-20.pd-lg-l-25.d-lg-none","Menu"),o("div.d-lg-none",[o(ud)])])]),o(Qn,{userName:t.attrs.userName})])]}}class md{view(){if(U.typeAlert!==null)return[o("div.pos-absolute.t-70.r-10",{style:{"z-index":"999999;"}},o(".toast.animated.bounceInRight[role='alert'][aria-live='assertive'][aria-atomic='true'][data-delay='8000']",[o("div.toast-header.tx-white."+U.typeAlert,[o("h6.tx-white.tx-14.mg-b-0.mg-r-auto."," Anuncio "),o("button.ml-2.mb-1.close[type='button'][data-dismiss='toast'][aria-label='Cerrar']",o("span..tx-white[aria-hidden='true']",o.trust("&times;")))]),o("div.toast-body.tx-semibold",U.messageAlert)]))]}}const wt=class{static selectDestroy(){$("#agendas").select2("destroy"),wt.idFilter="",o.redraw(),setTimeout(()=>{wt.idFilter=U.idCalendar,o.redraw()},1e3)}static selectInit(){$("#agendas").select2({templateSelection:function(t,r){return r[0].style.backgroundColor=U.setColor(t.id),t.text},placeholder:"Seleccione...",searchInputPlaceholder:"Buscar"}).on("change",function(t){let r="",n=$(this).val();$.each(n,function(a,i){r+=i+","}),r=r.substring(0,r.length-1),U.idCalendar=r,n.length>0?o.route.set("/endoscopia/agendas/calendario/",{idCalendar:encodeURIComponent(U.idCalendar)}):o.route.set("/endoscopia/agendas/calendario"),U.reloadFetchAgenda()})}oncreate(){setTimeout(()=>{wt.idFilter=U.idCalendar,o.redraw()},500)}view(){return wt.idFilter!==""?o("select.tx-5.form-control.select2-limit[multiple='multiple'][id='agendas']",{oncreate:t=>{setTimeout(()=>{wt.selectInit()},900)}},[U.calendarios.map(function(t,r,n){return[o("option.tx-10[value='"+t.IDCALENDAR+"']",{oncreate:a=>{U.idCalendar.search(t.IDCALENDAR)!=-1&&(a.dom.selected=!0)}},t.CALENDAR)]})]):o(we)}};let Kt=wt;A(Kt,"idFilter","");class pd{view(){return Kt.idFilter!==""&&!U.loader&&U.citas.status&&U.citas.data.length!==0?U.citas.data.events.map((t,r)=>{if(r<=4)return[o("a.schedule-item.bd-l.bd-2[href='#']",{onclick:n=>{n.preventDefault();let a=moment(t.pn_inicio,"DD/MM/YYYY HH:mm").format("YYYY-MM-DD");$("#calendar").fullCalendar("gotoDate",a)}},[o("span.tx-5.wd-100p.pd-1.pd-r-2.pd-l-5.mg-b-5.tx-semibold",{style:{"background-color":t.borderColor,color:"#fff"}},t.tipo==1?" Cita M\xE9dica ":t.tipo==2?" Evento":" Nota"),o("h6.tx-10",t.paciente),o("span.tx-5.text-capitalize",moment(t.pn_inicio,"DD/MM/YYYY HH:mm").format("HH:mm")+" - "+moment(t.pn_fin,"DD/MM/YYYY HH:mm").format("HH:mm")+" "+moment(t.pn_fin,"DD/MM/YYYY HH:mm").format("dddd, DD/MM/YYYY"))])]}):o(we)}}const ze=class{static loadItems(){$.fn.dataTable.ext.errMode="none";var t=$("#table-items").DataTable({data:ze.data,dom:"ltp",responsive:!0,language:{searchPlaceholder:"Buscar...",sSearch:"",lengthMenu:"Mostrar _MENU_ registros por p\xE1gina",sProcessing:"Procesando...",sZeroRecords:"Todav\xEDa no tienes resultados disponibles.",sEmptyTable:"Ning\xFAn dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"\xDAltimo",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},cache:!1,order:[[2,"Asc"]],destroy:!0,columns:[{title:"N\xB0:"},{title:"C\xF3digo:"},{title:"Item:"},{title:"Duraci\xF3n:"},{title:"Opciones:"}],aoColumnDefs:[{mRender:function(r,n,a,i){return i.row+i.settings._iDisplayStart+1},visible:!0,aTargets:[0]},{mRender:function(r,n,a){return a.CD_ITEM_AGENDAMENTO},visible:!0,aTargets:[1]},{mRender:function(r,n,a){return a.DS_ITEM_AGENDAMENTO},visible:!0,aTargets:[2]},{mRender:function(r,n,a){return'<b class="tx-14 tx-semibold tx-danger">'+a.DURACION+" Min. </b>"},visible:!0,aTargets:[3]},{mRender:function(r,n,a){return"OPCIONES"},visible:!0,aTargets:[4]}],fnRowCallback:function(r,n,a,i){},drawCallback:function(r){r.aoData.map(function(n){o.mount(n.anCells[4],{view:function(){return[o("button.btn.btn-sm.btn-block.btn-primary[type='button']",{onclick:()=>{let a=moment(f.data.pn_inicio,"DD/MM/YYYY HH:mm"),i=moment(n._aData.DURACION,"HH:mm").minutes(),s=a.add(i,"minutes");f.data.end=moment(s).format("dddd, DD-MM-YYYY HH:mm"),f.data.pn_fin=moment(s).format("DD/MM/YYYY HH:mm"),f.data.hashCita=moment(f.data.pn_inicio,"DD/MM/YYYY HH:mm").format("YYYY-MM-DD HH:mm")+"."+moment(s).format("YYYY-MM-DD HH:mm"),f.data.codItem=n._aData.CD_ITEM_AGENDAMENTO,f.data.estudio=n._aData.DS_ITEM_AGENDAMENTO,f.data.pn_item_agendamento=n._aData.CD_ITEM_AGENDAMENTO,f.buscarItems=!f.buscarItems,U.validarAgendamiento()}},"Seleccionar")]}})})}});return $(".dataTables_length select").select2({minimumResultsForSearch:1/0}),t}static fetchSearch(){ze.loader=!0,ze.data=[],o.request({method:"POST",url:"https://api.hospitalmetropolitano.org/v2/date/items",body:{searchField:ze.searchField},headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){ze.loader=!1,ze.data=t.data,ze.loadItems()}).catch(function(t){})}view(){return[o("div.mg-t-10.pd-10.wd-100p",{class:ze.loader?"":"d-none"},o("div.placeholder-paragraph",[o("div.line"),o("div.line")])),o("div.mg-t-10.pd-10.wd-100p",{class:ze.loader?"d-none":""},o("table.table.table-sm.tx-11[id='table-items'][width='100%']"))]}};let Ee=ze;A(Ee,"searchField",""),A(Ee,"data",[]),A(Ee,"loader",!1);const $e=class{static loadPacientes(){$.fn.dataTable.ext.errMode="none";var t=$("#table-pacientes").DataTable({data:$e.data,dom:"ltp",responsive:!0,language:{searchPlaceholder:"Buscar...",sSearch:"",lengthMenu:"Mostrar _MENU_ registros por p\xE1gina",sProcessing:"Procesando...",sZeroRecords:"Todav\xEDa no tienes resultados disponibles.",sEmptyTable:"Ning\xFAn dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"\xDAltimo",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},cache:!1,order:[[2,"Asc"]],destroy:!0,columns:[{title:"N\xB0:"},{title:"NHC:"},{title:"Paciente:"},{title:"Edad:"},{title:"Sexo:"},{title:"F. Nacimiento:"},{title:"Opciones:"}],aoColumnDefs:[{mRender:function(r,n,a,i){return i.row+i.settings._iDisplayStart+1},visible:!0,aTargets:[0]},{mRender:function(r,n,a){return a.CD_PACIENTE},visible:!0,aTargets:[1]},{mRender:function(r,n,a){return a.NM_PACIENTE},visible:!0,aTargets:[2],width:"60%"},{mRender:function(r,n,a){return a.EDAD},visible:!0,aTargets:[3]},{mRender:function(r,n,a){return a.TP_SEXO},visible:!0,aTargets:[4]},{mRender:function(r,n,a){return a.DT_NASCIMENTO},visible:!0,aTargets:[5]},{mRender:function(r,n,a){return"OPCIONES"},visible:!0,aTargets:[6]}],fnRowCallback:function(r,n,a,i){},drawCallback:function(r){r.aoData.map(function(n){o.mount(n.anCells[6],{view:function(){return[o("button.btn.btn-sm.btn-block.btn-primary[type='button']",{onclick:()=>{f.data.nhc=n._aData.CD_PACIENTE,f.data.patientId=n._aData.CD_PACIENTE,f.data.paciente=n._aData.NM_PACIENTE,f.data.patientName=n._aData.NM_PACIENTE,f.data.phoneNumber="0998785402",f.data.sexType=n._aData.TP_SEXO,f.data.dateBirth=moment(n._aData.DT_NASCIMENTO,"DD-MM-YYYY").format("DD/MM/YYYY"),f.data.email=n._aData.EMAIL,f.data.pn_paciente=f.data.nhc,f.data.pc_nm_paciente=f.data.patientName,f.data.pc_telefono=f.data.phoneNumber,f.data.pc_email=f.data.email,f.data.pc_fecha_nacimiento=f.data.dateBirth,f.buscarPacientes=!f.buscarPacientes}},"Seleccionar")]}})})}});return $(".dataTables_length select").select2({minimumResultsForSearch:1/0}),t}static fetchSearch(){$e.loader=!0,$e.data=[],o.request({method:"POST",url:"https://api.hospitalmetropolitano.org/v2/date/pacientes",body:{searchField:$e.searchField},headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){$e.loader=!1,$e.data=t.data,$e.loadPacientes()}).catch(function(t){})}view(){return[o("div.mg-t-10.pd-10.wd-100p",{class:$e.loader?"":"d-none"},o("div.placeholder-paragraph",[o("div.line"),o("div.line")])),o("div.mg-t-10.pd-10.wd-100p",{class:$e.loader?"d-none":""},o("table.table.table-sm.tx-11[id='table-pacientes'][width='100%']"))]}};let Se=$e;A(Se,"searchField",""),A(Se,"data",[]),A(Se,"loader",!1);const Q=class{static verCita(t){Q.data.id=t.id,Q.data.hashCita=t.id,Q.data.idCalendar=t.idCalendar,Q.data.start=t.start,Q.data.end=t.end,Q.data.paciente=t.title,Q.data.estudio=t.estudio,Q.data.prestador=t.prestador,Q.data.editable=t.editable,Q.data.comentarios=t.comentarios;let r=$("#modalCalendarEvent");r.modal("show"),r.find(".event-title").text(Q.data.paciente),r.find(".event-start-date").text(moment(t.start).format("LLL")),r.find(".event-end-date").text(moment(t.end).format("LLL")),r.find(".modal-header").css("backgroundColor",(t.borderColor,t.borderColor)),o.redraw()}static verUpdate(t){let r=$("#modalUpdateEvent");r.modal("show"),r.find(".modal-header").css("backgroundColor",(t.borderColor,t.borderColor)),o.redraw()}static crearCita(t,r){this.data.hashCita=t.format("YYYY-MM-DD HH:mm")+"."+r.format("YYYY-MM-DD HH:mm"),this.data.start=t.format("dddd, DD-MM-YYYY HH:mm"),this.data.end=r.format("dddd, DD-MM-YYYY HH:mm"),this.data.pn_inicio=t.format("DD/MM/YYYY HH:mm"),this.data.pn_fin=r.format("DD/MM/YYYY HH:mm"),$("#modalCreateEvent").modal("show"),$("#eventStartDate").val(moment(t).format("LLL")),$("#eventEndDate").val(moment(r).format("LLL")),$("#eventStartTime").val(moment(t).format("LT")).trigger("change"),$("#eventEndTime").val(moment(r).format("LT")).trigger("change"),o.redraw()}static agendarCitaHttp(){Q.loader=!0,Q.data.idCalendar=U.idCalendar,Q.data.calendarios=U.calendarios,o.request({method:"POST",url:"https://api.hospitalmetropolitano.org/v2/date/citas/call",body:Q.data,headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){Q.loader=!1,t.status?Q.agendarCita():U.showAlertCalendar("bg-danger",t.message)}).catch(function(t){U.showAlertCalendar("bg-danger",t)})}static trackReAgendar(){Q.loader=!0,o.request({method:"POST",url:"https://api.hospitalmetropolitano.org/v2/date/citas/reagendar",body:Q.data,headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){Q.loader=!1,t.status?(U.reloadFetchAgenda(),U.showAlertCalendar("bg-primary","Ahora puede reagendar este Cita.")):U.showAlertCalendar("bg-primary",t.message)}).catch(function(t){U.showAlertCalendar("bg-danger",t)})}static trackCancelReAgendar(){Q.loader=!0,o.request({method:"POST",url:"https://api.hospitalmetropolitano.org/v2/date/citas/reagendar/cancel",body:Q.data,headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){Q.loader=!1,t.status?(U.reloadFetchAgenda(),U.showAlertCalendar("bg-danger","El reagendamiento se cancel\xF3.")):U.showAlertCalendar("bg-danger",t.message)}).catch(function(t){U.showAlertCalendar("bg-danger",t)})}static agendarCita(){Q.loader=!0,Q.data.idCalendar=U.idCalendar,Q.data.calendarios=U.calendarios,o.request({method:"POST",url:"https://api.hospitalmetropolitano.org/v2/date/citas/nueva",body:Q.data,headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){Q.loader=!1,t.status?(U.showAlertCalendar("bg-success",t.message),$("#modalCreateEvent").modal("hide"),U.reloadFetchAgenda(),Q.data={}):U.showAlertCalendar("bg-danger",t.message)}).catch(function(t){U.showAlertCalendar("bg-danger",t)})}static reAgendarCita(){U.validarAgendamiento(),Q.loader=!0,o.request({method:"POST",url:"https://api.hospitalmetropolitano.org/v2/date/citas/update",body:Q.data,headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){Q.loader=!1,console.log(t),t.status?(U.showAlertCalendar("bg-success",t.message),$("#modalUpdateEvent").modal("hide"),U.reloadFetchAgenda()):U.showAlertCalendar("bg-danger",t.message)}).catch(function(t){U.showAlertCalendar("bg-danger",t)})}static cancelarCita(){Q.loader=!0,o.request({method:"POST",url:"https://api.hospitalmetropolitano.org/v2/date/citas/delete",body:Q.data,headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){Q.loader=!1,console.log(t),t.status?(U.showAlertCalendar("bg-success",t.message),$("#modalCalendarEvent").modal("hide"),U.reloadFetchAgenda(),Q.data={}):U.showAlertCalendar("bg-danger",t.message)}).catch(function(t){U.showAlertCalendar("bg-danger",t)})}};let f=Q;A(f,"buscarPacientes",!1),A(f,"buscarItems",!1),A(f,"loader",!1),A(f,"data",{});const L=class extends y{constructor(){super(),y.isAuthenticated()&&y.hasProfile("PERFIL_AG_GEST_ENDOSCOPIA")&&(y.setTitle("Agenda Centralizada Endoscop\xEDa"),this.view=L.page)}static vHeader(){return o(hd,{userName:y.userName})}static setSidebar(){$("#calendarInline").datepicker({showOtherMonths:!0,selectOtherMonths:!0,dateFormat:"yy-mm-dd",onSelect:function(t,r){$("#calendar").fullCalendar("gotoDate",t)},beforeShowDay:function(t){var r=t.getDate();return console.log(r),r<10?[!0,"zero  tx-danger "]:[!0," tx-danger"]}}),setTimeout(function(){new PerfectScrollbar("#calendarSidebarBody",{suppressScrollX:!0})},100),$("#calendarSidebarShow").on("click",function(t){t.preventDefault(),$("body").toggleClass("calendar-sidebar-show"),$(this).addClass("d-none"),$("#mainMenuOpen").removeClass("d-none")}),$(document).on("click touchstart",function(t){if(t.stopPropagation(),!$(t.target).closest(".burger-menu").length){var r=$(t.target).closest(".calendar-sidebar").length;r||($("body").removeClass("calendar-sidebar-show"),$("#mainMenuOpen").addClass("d-none"),$("#calendarSidebarShow").removeClass("d-none"))}}),$('[data-toggle="tooltip"]').tooltip({template:'<div class=" tooltip tooltip-dark " role="tooltip"><div class= "arrow" ></div><div class="tooltip-inner"></div></div > '})}static setCalendar(){$("#calendar").fullCalendar({height:"parent",header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listWeek"},navLinks:!0,selectable:!0,defaultDate:moment().format("YYYY-MM-DD"),selectLongPressDelay:100,nowIndicator:!0,editable:!1,defaultView:"listWeek",minTime:"07:00:00",maxTime:"17:55:00",slotDuration:"00:10:00",slotLabelInterval:10,slotLabelFormat:"HH:mma",slotMinutes:10,timeFormat:"HH:mma",views:{agenda:{columnHeaderHtml:function(r){return"<span>"+r.format("ddd")+"</span><span>"+r.format("DD")+"</span>"}},day:{columnHeader:!1},listMonth:{listDayFormat:"ddd DD",listDayAltFormat:!1},listWeek:{listDayFormat:"ddd DD",listDayAltFormat:!1},agendaThreeDay:{type:"agenda",duration:{days:3},titleFormat:"MMMM YYYY"}},eventSources:[L.citas.data],eventAfterAllRender:function(r){if(r.name==="listMonth"||r.name==="listWeek"){var n=r.el.find(".fc-list-heading-main");n.each(function(){var a=$(this).text().split(" "),i=moment().format("DD");$(this).html(a[0]+"<span>"+a[1]+"</span>"),i===a[1]&&$(this).addClass("now")})}console.log(r.el)},eventRender:function(r,n){let a=moment(r.pc_fecha_nacimiento),s=moment().diff(a,"years"),l=(r.borderColor,r.borderColor),u="";r.calendarios!==void 0&&r.calendarios.length!==0&&r.calendarios.map((g,v)=>{u+=v+1+".- "+g.CALENDAR+" <br> "}),n.find(".fc-title").attr("data-toggle","tooltip"),n.find(".fc-title").attr("data-html","true"),n.find(".fc-title").attr("data-placement","left"),r.tipo==1&&n.find(".fc-title").attr("title","<div class='wd-50px text-left'>Cita M\xE9dica:</div> <br> <div class='wd-50px text-left'>Paciente:</div> <div class='wd-50px text-left'>"+r.paciente+"  </div> <div class='wd-50px text-left'>"+s+" A\xF1os - "+(r.sexType=="M"?"Masculino":"Femenino")+"  </div> <br> <div class='wd-50px text-left'>Fecha Y Hora:</div> <div class='wd-50px text-right text-capitalize'>"+moment(r.pn_inicio,"DD/MM/YYYY HH:mm").format("HH:mm")+" - "+moment(r.pn_fin,"DD/MM/YYYY HH:mm").format("HH:mm")+" <br> "+moment(r.pn_fin,"DD/MM/YYYY HH:mm").format("dddd, DD/MM/YYYY")+"  </div> <br>  <div class='wd-50px text-left'>Agendas:</div> <div class='wd-50px text-left'>"+u+"</div>  "),r.editable?(n.find(".fc-content").css({"background-color":"#dc3545",color:"#fff"}),n.find(".fc-title").css({"background-color":"#dc3545",color:"#fff","font-size":"10px"})):(n.find(".fc-title").css({"font-size":"10px"}),n.find(".fc-list-item-time").css({color:l,borderColor:l}),n.find(".fc-list-item-title").css({borderColor:l}),n.css("borderLeftColor",l))},eventDrop:function(r){f.data.id=r.id,f.data.start=r.start.format("dddd, DD-MM-YYYY HH:mm"),f.data.end=r.end.format("dddd, DD-MM-YYYY HH:mm"),f.data.paciente=r.paciente,f.data.prestador=r.prestador,f.data.nhc=r.nhc,f.data.codMedico=r.codMedico,f.data.codItem=r.codItem,f.data.estudio=r.estudio,f.data.comentarios=r.comentarios,f.data.idCalendar=r.idCalendar,f.data.ubicacion=r.ubicacion,f.data.tipo=1,f.data.hashCita=r.hashCita,f.data.newHashCita=r.start.format("YYYY-MM-DD HH:mm")+"."+r.end.format("YYYY-MM-DD HH:mm"),f.verUpdate(r),L.validarAgendamiento()},eventResize:function(r){f.data.id=r.id,f.data.start=r.start.format("dddd, DD-MM-YYYY HH:mm"),f.data.end=r.end.format("dddd, DD-MM-YYYY HH:mm"),f.data.paciente=r.paciente,f.data.prestador=r.prestador,f.data.nhc=r.nhc,f.data.codMedico=r.codMedico,f.data.codItem=r.codItem,f.data.estudio=r.estudio,f.data.comentarios=r.comentarios,f.data.idCalendar=r.idCalendar,f.data.ubicacion=r.ubicacion,f.data.tipo=1,f.data.hashCita=r.hashCita,f.data.newHashCita=r.start.format("YYYY-MM-DD HH:mm")+"."+r.end.format("YYYY-MM-DD HH:mm"),f.verUpdate(r),L.validarAgendamiento()}});var t=$("#calendar").fullCalendar("getCalendar");window.matchMedia("(min-width: 576px)").matches&&t.changeView("agendaWeek"),window.matchMedia("(min-width: 992px)").matches&&t.changeView("agendaWeek"),t.option("windowResize",function(r){r.name==="listWeek"&&(window.matchMedia("(min-width: 992px)").matches?t.changeView("agendaWeek"):t.changeView("listWeek"))}),t.on("eventClick",function(r,n,a){r.tipo==1?f.verCita(r):r.tipo==3&&(f.data.tipo=1,f.crearCita(r.start,r.end))}),t.getDate(),t.option("select",function(r,n){f.data.tipo=1,f.crearCita(r,n)}),$(".select2-modal").select2({minimumResultsForSearch:1/0,dropdownCssClass:"select2-dropdown-modal"}),$(".calendar-add").on("click",function(r){r.preventDefault(),$("#modalCreateEvent").modal("show")})}static setColor(t){t=Number(t);let r=null;return r=L.citas.colorsCalendar[t],r!==void 0?r.borderColor:"bg-light"}static vMain(){return[o("div.calendar-wrapper",[o("div.calendar-sidebar",[o("div.calendar-sidebar-header",[o("i[data-feather='search']"),o("div.search-form",[o("input.form-control[type='search'][placeholder='Buscar por NHC o Apellidos y Nombres'][title='Buscar por NHC o Apellidos y Nombres']")]),o("a.btn btn-sm btn-primary btn-icon calendar-add",[o("div[data-toggle='tooltip']",[o("i.tx-white[data-feather='plus']")])])]),o("div.calendar-sidebar-body[id='calendarSidebarBody']",{},[o("div.calendar-inline",[o("div[id='calendarInline']")]),o("div.pd-t-0.pd-l-20.pd-r-20",[o("label.tx-uppercase.tx-sans.tx-10.tx-medium.tx-spacing-1.tx-color-03.mg-b-15","Filtro Agendas/Calendarios: "),!L.loader&&L.citas.status&&L.citas.data.length!==0?[o("div.schedule-group",o(Kt))]:[]]),o("div.pd-t-20.pd-l-20.pd-r-20",[o("label.tx-uppercase.tx-sans.tx-10.tx-medium.tx-spacing-1.tx-color-03.mg-b-15","Pr\xF3ximas Citas:"),o("div.schedule-group.mg-b-40",[!L.loader&&L.citas.status&&L.citas.data.length!==0?[o(pd)]:[]])])])]),o("div.calendar-content",[!L.loader&&L.citas.status&&L.citas.data.length!==0?[o("div.calendar-content-body[id='calendar']",{})]:!L.loader&&L.citas!==null&&(!L.citas.status||L.citas.status==null)?[o("div.pd-20",[o(Rt,{type:L.citas.status?0:1,error:L.citas})])]:[o("div.pd-20",[o(we)])]])]),o(".modal.calendar-modal-create[id='modalCreateEvent'][role='dialog'][aria-hidden='true']",o(".modal-dialog.modal-dialog-centered.modal-xl[role='document']",o("div.modal-content",[o("div.modal-header.tx-white.mg-0",{style:{"background-color":"rgb(50, 90, 152)"}},[o(".d-inline.tx-semibold.tx-18.event-title.tx-white.mg-0","Nueva Cita"),o("nav.nav.nav-modal-event",[o(".tx-14.d-inline.mg-0.tx-white","Agenda Centralizada MV v1.0")])]),o("div.modal-body.pd-20.pd-sm-30",[o("div.mg-t-10.pd-10.wd-100p",{class:f.loader?"":"d-none"},o("div.placeholder-paragraph",[o("div.line"),o("div.line")])),o("div",{class:f.loader?"d-none":""},[o("div",{class:f.buscarPacientes?"":"d-none"},[o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Buscar Pacientes:"),o("div.form-group",o("form",{onsubmit:t=>{t.preventDefault(),Se.searchField.length!==0?Se.fetchSearch():alert("Ingrese Apellidos y Nombres para continuar.")}},[o("div.input-group",[o("input.form-control[type='text'][placeholder='Apellidos y Nombres']",{oninput:t=>{Se.searchField=t.target.value}}),o("div.input-group-append",o("button.btn.btn-outline-light[type='button']",{onclick:t=>{Se.searchField.length!==0?Se.fetchSearch():alert("Ingrese Apellidos y Nombres para continuar.")}},"Buscar"),o("button.btn.btn-outline-light[type='button']",{onclick:t=>{f.buscarPacientes=!f.buscarPacientes}},o("i.fas.fa-times-circle")))])]),o("div.row",[o("div.col-12",o(Se))]))]),o("div",{class:f.buscarItems?"":"d-none"},[o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Buscar Items:"),o("div.form-group",o("form",{onsubmit:t=>{t.preventDefault(),Ee.searchField.length!==0?Ee.fetchSearch():alert("Ingrese alg\xFAn valor para continuar.")}},[o("div.input-group",[o("input.form-control[type='text'][placeholder='Buscar Items']",{oninput:t=>{Ee.searchField=t.target.value}}),o("div.input-group-append",o("button.btn.btn-outline-light[type='button']",{onclick:t=>{Ee.searchField.length!==0?Ee.fetchSearch():alert("Ingrese alg\xFAn valor para continuar.")}},"Buscar"),o("button.btn.btn-outline-light[type='button']",{onclick:t=>{f.buscarItems=!f.buscarItems}},o("i.fas.fa-times-circle")))])]),o("div.row",[o("div.col-12",o(Ee))]))]),o("div",{class:f.buscarPacientes||f.buscarItems?"d-none":""},[o("div.form-group.d-none",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Agendas:")),o("div.form-group",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Tipo:"),o("div.input-group",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='tipoCita1'][name='tipoCita']",{onclick:t=>{f.data.tipo=1,console.log(f.data)},oncreate:t=>{t.dom.checked=!0}}),o("label.custom-control-label[for='tipoCita1']","Cita M\xE9dica")]),o("div.custom-control.custom-radio.mg-l-20",[o("input.custom-control-input[type='radio'][id='tipoCita2'][name='tipoCita']",{onclick:t=>{f.data.tipo=2}}),o("label.custom-control-label[for='tipoCita2']","Evento")]),o("div.custom-control.custom-radio.mg-l-20",[o("input.custom-control-input[type='radio'][id='tipoCita3'][name='tipoCita']",{onclick:t=>{f.data.tipo=3}}),o("label.custom-control-label[for='tipoCita3']","Nota")])])),f.data.tipo==1&&f.data.codItem!==void 0?[o("div.form-group",[o("div.row.row-xs",[o("div.col-6",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Fecha y Hora de Inicio:"),o("input.form-control[id='eventStartDate'][type='text'][disabled='disabled']",{value:f.data.start})),o("div.col-6",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Fecha y Hora de Fin"),o("input.form-control[type='text'][id='eventEndDate'][disabled='disabled']",{value:f.data.end}))])])]:f.data.tipo>1?[o("div.form-group",[o("div.row.row-xs",[o("div.col-3",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Fecha de Inicio:"),o("input.form-control[id='eventStartDate'][type='text'][placeholder='DD/MM/YYYY']",{oncreate:t=>{setTimeout(()=>{new Cleave("#eventStartDate",{date:!0,datePattern:["d","m","Y"]})},100)},value:moment(f.data.pn_inicio,"DD/MM/YYYY HH:mm").format("DD/MM/YYYY")})),o("div.col-3",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Hora de Inicio:"),o("input.form-control[id='eventStartHourDate'][type='text'][placeholder='hh:mm']",{oncreate:t=>{setTimeout(()=>{new Cleave("#eventStartHourDate",{time:!0,timePattern:["h","m"]})},100)},value:moment(f.data.pn_inicio,"DD/MM/YYYY HH:mm").format("HH:mm")})),o("div.col-3",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Fecha de Fin"),o("input.form-control[id='eventEndDate'][type='text'][placeholder='DD/MM/YYYY']",{oncreate:t=>{setTimeout(()=>{new Cleave("#eventEndDate",{date:!0,datePattern:["d","m","Y"]})},100)},value:moment(f.data.pn_fin,"DD/MM/YYYY HH:mm").format("DD/MM/YYYY")})),o("div.col-3",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Hora de Fin"),o("input.form-control[id='eventEndHourDate'][type='text'][placeholder='hh:mm']",{oncreate:t=>{setTimeout(()=>{new Cleave("#eventEndHourDate",{time:!0,timePattern:["h","m"]})},100)},value:moment(f.data.pn_fin,"DD/MM/YYYY HH:mm").format("HH:mm")}))])])]:[],o("div.form-group",{class:f.data.tipo==2?"":"d-none"},o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Nombre Evento:"),o("div.input-group",[o("input.form-control[type='text'][placeholder='Nombre Evento']",{value:f.data.evento!==void 0?f.data.evento:"",oninput:t=>{f.data.evento=t.target.value}})])),o("div.form-group",{class:f.data.tipo==3?"":"d-none"},o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Nota:"),o("div.input-group",[o("input.form-control[type='text'][placeholder='Nota']",{value:f.data.nota!==void 0?f.data.evento:"",oninput:t=>{f.data.nota=t.target.value}})])),o("div.form-group",{class:f.data.tipo==1?"":"d-none"},o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Estudio:"),o("div.input-group",[o("input.form-control[type='text'][placeholder='Items/Estudio']",{value:f.data.codItem!==void 0?f.data.codItem+" - "+f.data.estudio:"",oninput:t=>{t.preventDefault()},disabled:f.data.codItem!==void 0?"disabled":""}),o("div.input-group-append",o("button.btn.btn-primary[type='button']",{onclick:t=>{f.buscarItems=!f.buscarItems}},[o("i.fas.fa-search.mg-r-2")," Buscar Estudios"]))])),o("div.form-group",{class:f.data.tipo==1?"":"d-none"},o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Historia Cl\xEDnica Paciente: ",o("div.d-inline.tx.semibold.tx-danger",{style:{cursor:"pointer"},onclick:()=>{f.data.sinDatos=!f.data.sinDatos}}," *Sin Historia Cl\xEDnica ")),o("div.input-group",{class:f.data.sinDatos?"d-none":""},[o("input.form-control[type='text'][placeholder='Numero de Historia Cl\xEDnica'][autofocus]",{value:f.data.paciente!==void 0?f.data.nhc+" - "+f.data.paciente:"",oninput:t=>{t.preventDefault()},disabled:f.data.paciente!==void 0?"disabled":""}),o("div.input-group-append",o("button.btn.btn-primary[type='button']",{onclick:t=>{f.buscarPacientes=!f.buscarPacientes}},[o("i.fas.fa-search.mg-r-2")," Buscar Pacientes "]))]),o("div.input-group",{class:f.data.sinDatos?"":"d-none"},[o("div.col-12.mg-b-10",[o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Apellidos y Nombres del Paciente:"),o("input.form-control[type='text'][placeholder='Apellidos y Nombres del Paciente'][autofocus]",{value:f.data.paciente!==void 0?f.data.paciente:"",oninput:t=>{f.data.paciente=t.target.value,f.data.pn_paciente=f.data.paciente}})])]),o("div.input-group",{class:f.data.sinDatos?"":"d-none"},[o("div.col-12.mg-b-10",[o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Fecha de Nacimiento:"),o("input.form-control[type='text'][id='dateBirth'][placeholder='DD/MM/YYYY']",{oninput:t=>{f.data.dateBirth=t.target.value,console.log(f.dateBirth)},oncreate:t=>{setTimeout(()=>{new Cleave("#dateBirth",{date:!0,datePattern:["d","m","Y"]})},100)}})])]),o("div.input-group",{class:f.data.sinDatos?"":"d-none"},[o("div.col-12.mg-b-10",[o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Sexo:"),o("select.tx-semibold",{onchange:t=>{f.data.sexType=t.target.value},class:"custom-select"},o("option","Seleccione..."),o('option[value="M"]',"Masculino"),o('option[value="F"]',"Femenino"))])]),o("div.input-group",{class:f.data.sinDatos?"":"d-none"},[o("div.col-12.mg-b-10",[o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Correo electr\xF3nico:"),o("input.form-control[type='text'][placeholder='Correo electr\xF3nico'][autofocus]",{value:f.data.pc_email!==void 0?f.data.pc_email:"",oninput:t=>{f.data.email=t.target.value,f.data.pc_email=t.target.value}})])]),o("div.input-group",{class:f.data.sinDatos?"":"d-none"},[o("div.col-12.mg-b-10",[o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Celular:"),o("input.form-control[type='text'][placeholder='Correo electr\xF3nico'][autofocus]",{value:f.data.pc_telefono!==void 0?f.data.pc_telefono:"",oninput:t=>{f.data.pc_telefono=t.target.value}})])])),o("div.form-group",[o("ul.nav.nav-tabs[id='myTab'][role='tablist']",[o("li.nav-item",o("a.nav-link.active[id='home-tab'][data-toggle='tab'][href='#home'][role='tab'][aria-controls='home'][aria-selected='true']","Comentarios")),o("li.nav-item",{class:f.data.tipo==1&&f.data.email!==void 0?"":"d-none"},o("a.nav-link[id='profile-tab'][data-toggle='tab'][href='#profile'][role='tab'][aria-controls='profile'][aria-selected='false']","Notificaci\xF3n al Correo"))]),o(".tab-content.bd.bd-gray-300.bd-t-0.pd-20[id='myTabContent']",[o(".tab-pane.fade.show.active[id='home'][role='tabpanel'][aria-labelledby='home-tab']",[o("div.form-group",[o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Comentarios: "),o("textarea.form-control[rows='2'][placeholder='Comentarios']",{oninput:t=>{f.data.comentarios=t.target.value}})])]),o(".tab-pane.fade[id='profile'][role='tabpanel'][aria-labelledby='profile-tab']",{class:f.data.tipo==1&&f.data.email!==void 0?"":"d-none"},[f.data.tipo==1&&f.data.email!==void 0?[o("div.form-group",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Correo electr\xF3nico: ",o("br"),o("span.tx-light.tx-5","*Se enviar\xE1 una notificaci\xF3n de correo a la(s) siguiente(s) direccione(s).")),o("div",o("input.form-control[id='correoCita'][type='text'][data-role='tagsinput']",{oncreate:t=>{let r=$("#correoCita");r.tagsinput({itemValue:"value",itemText:"text",typeaheadjs:{name:"correoCita",displayKey:"text",source:[]}}),r.tagsinput("add",{value:f.data.email,text:f.data.email})}})))]:[]])])])])])]),o("div.modal-footer",[o("button.btn.btn-primary.mg-r-5",{onclick:()=>{f.data.tipo==1?f.agendarCitaHttp():f.agendarCita()}},"Agendar Cita"),o("a.btn.btn-secondary[href=''][data-dismiss='modal']","Cerrar")])]))),o(".modal.calendar-modal-event[id='modalCalendarEvent'][role='dialog'][aria-hidden='true']",o(".modal-dialog.modal-dialog-centered.modal-xl[role='document']",o("div.modal-content",[o("div.modal-header",[o("h6.event-title"),o("nav.nav.nav-modal-event",[o(".tx-14.d-inline.mg-0.tx-white","Agenda Centralizada MV v1.0")])]),o("div.modal-body",[o("div.row",[o("div.col-sm-6",[o("label.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1.tx-color-03","Fecha Inicio"),o("p.event-start-date")]),o("div.col-sm-6",[o("label.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1.tx-color-03","Fecha Final"),o("p.event-end-date")])]),o("div.row.mg-b-50",[o("div.col-12",[o("label.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1.tx-color-03","Paciente:"),o("p",[f.data.paciente])]),o("div.col-6",[o("label.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1.tx-color-03","Estudio:"),o("p",[f.data.estudio])]),o("div.col-6",[o("label.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1.tx-color-03","Comentarios:"),o("p",[f.data.comentarios!==void 0&&f.data.comentarios.length>0?f.data.comentarios:"N/D"])])]),o("hr"),f.data.editable?[o("button.btn.btn-primary.mg-r-5[data-dismiss='modal']",{onclick:()=>{f.trackCancelReAgendar()}},"Cancelar Reagendamiento")]:[o("button.btn.btn-primary.mg-r-5[data-dismiss='modal']",{onclick:()=>{f.trackReAgendar()}},"Reagendar Cita")],o("button.btn.btn-danger.mg-r-5",{onclick:()=>{f.cancelarCita()}},"Cancelar Cita"),o("a.btn.btn-secondary.pd-x-20[href=''][data-dismiss='modal']","Cerrar")])]))),o(".modal.calendar-modal-create[id='modalUpdateEvent'][role='dialog'][aria-hidden='true']",o(".modal-dialog.modal-dialog-centered.modal-xl[role='document']",o("div.modal-content",[o("div.modal-header.tx-white.bg-primary",[o("h5.event-title.tx-white","Reagendar Cita"),o("nav.nav.nav-modal-event",[o(".tx-14.d-inline.mg-0.tx-white","Agenda Centralizada MV v1.0")])]),o("div.modal-body.pd-20.pd-sm-30",[o("div.mg-t-10.pd-10.wd-100p",{class:f.loader?"":"d-none"},o("div.placeholder-paragraph",[o("div.line"),o("div.line")])),o("div",{class:f.loader?"d-none":""},[o("div",{class:f.buscarPacientes?"":"d-none"},[o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Buscar Pacientes:"),o("div.form-group",o("form",{onsubmit:t=>{t.preventDefault(),Se.searchField.length!==0?Se.fetchSearch():alert("Ingrese Apellidos y Nombres para continuar.")}},[o("div.input-group",[o("input.form-control[type='text'][placeholder='Apellidos y Nombres']",{oninput:t=>{Se.searchField=t.target.value}}),o("div.input-group-append",o("button.btn.btn-outline-light[type='button']",{onclick:t=>{Se.searchField.length!==0?Se.fetchSearch():alert("Ingrese Apellidos y Nombres para continuar.")}},"Buscar"),o("button.btn.btn-outline-light[type='button']",{onclick:t=>{f.buscarPacientes=!f.buscarPacientes}},o("i.fas.fa-times-circle")))])]),o("div.row",[o("div.col-12",o(Se))]))]),o("div",{class:f.buscarItems?"":"d-none"},[o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Buscar Items:"),o("div.form-group",o("form",{onsubmit:t=>{t.preventDefault(),Ee.searchField.length!==0?Ee.fetchSearch():alert("Ingrese alg\xFAn valor para continuar.")}},[o("div.input-group",[o("input.form-control[type='text'][placeholder='Buscar Items']",{oninput:t=>{Ee.searchField=t.target.value}}),o("div.input-group-append",o("button.btn.btn-outline-light[type='button']",{onclick:t=>{Ee.searchField.length!==0?Ee.fetchSearch():alert("Ingrese alg\xFAn valor para continuar.")}},"Buscar"),o("button.btn.btn-outline-light[type='button']",{onclick:t=>{f.buscarItems=!f.buscarItems}},o("i.fas.fa-times-circle")))])]),o("div.row",[o("div.col-12",o(Ee))]))]),o("div",{class:f.buscarPacientes||f.buscarItems?"d-none":""},[o("div.form-group.d-none",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Tipo:"),o("div.input-group",[o("div.custom-control.custom-radio",[o("input.custom-control-input[type='radio'][id='tipoCitaUpdate1'][name='tipoCitaUpdate']",{onclick:t=>{f.data.tipo=1},onupdate:t=>{f.data.tipo==1&&(t.dom.checked=!0)}}),o("label.custom-control-label[for='tipoCitaUpdate1']","Cita M\xE9dica")]),o("div.custom-control.custom-radio.mg-l-20",[o("input.custom-control-input[type='radio'][id='tipoCitaUpdate2'][name='tipoCitaUpdate']",{onclick:t=>{f.data.tipo=2},onupdate:t=>{f.data.tipo==2&&(t.dom.checked=!0)}}),o("label.custom-control-label[for='tipoCitaUpdate2']","Evento")])])),o("div.form-group",[o("div.row.row-xs",[o("div.col-6",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Fecha y Hora de Inicio:"),o("input.form-control[id='eventStartDate'][type='text'][disabled='disabled']",{value:f.data.start})),o("div.col-6",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Fecha y Hora de Fin"),o("input.form-control[type='text'][value=''][disabled='disabled']",{value:f.data.end}))])]),o("div.form-group",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Historia Cl\xEDnica Paciente:"),o("div.input-group",[o("input.form-control[type='text'][placeholder='Numero de Historia Cl\xEDnica'][autofocus]",{value:f.data.paciente!==void 0?f.data.nhc+" - "+f.data.paciente:"",oninput:t=>{t.preventDefault()},disabled:f.data.paciente!==void 0?"disabled":""}),o("div.input-group-append",o("button.btn.btn-primary[type='button']",{onclick:t=>{f.buscarPacientes=!f.buscarPacientes}},[o("i.fas.fa-search.mg-r-2")," Buscar Pacientes "]))])),o("div.form-group",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Estudio:"),o("div.input-group",[o("input.form-control[type='text'][placeholder='Items/Estudio']",{value:f.data.codItem!==void 0?f.data.codItem+" - "+f.data.estudio:"",oninput:t=>{t.preventDefault()},disabled:f.data.codItem!==void 0?"disabled":""}),o("div.input-group-append",o("button.btn.btn-primary[type='button']",{onclick:t=>{f.buscarItems=!f.buscarItems}},[o("i.fas.fa-search.mg-r-2")," Buscar Estudios "]))])),o("div.form-group",o("ul.nav.nav-tabs[id='myTab'][role='tablist']",[o("li.nav-item",o("a.nav-link.active[id='home-tab'][data-toggle='tab'][href='#home'][role='tab'][aria-controls='home'][aria-selected='true']","Comentarios")),o("li.nav-item",{class:f.data.tipo==1&&f.data.email!==void 0?"":"d-none"},o("a.nav-link[id='profile-tab'][data-toggle='tab'][href='#profile'][role='tab'][aria-controls='profile'][aria-selected='false']","Notificaci\xF3n al Correo"))]),o(".tab-content.bd.bd-gray-300.bd-t-0.pd-20[id='myTabContent']",[o(".tab-pane.fade.show.active[id='home'][role='tabpanel'][aria-labelledby='home-tab']",[o("div.form-group",[o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Comentarios: "),o("textarea.form-control[rows='2'][placeholder='Comentarios']",{oninput:t=>{f.data.comentarios=t.target.value}})])]),o(".tab-pane.fade[id='profile'][role='tabpanel'][aria-labelledby='profile-tab']",{class:f.data.tipo==1&&f.data.email!==void 0?"":"d-none"},[f.data.tipo==1&&f.data.email!==void 0?[o("div.form-group",o("label.tx-semibold.tx-uppercase.tx-sans.tx-11.tx-medium.tx-spacing-1","Correo electr\xF3nico: ",o("br"),o("span.tx-light.tx-5","*Se enviar\xE1 una notificaci\xF3n de correo a la(s) siguiente(s) direccione(s).")),o("div",o("input.form-control[id='correoCita'][type='text'][data-role='tagsinput']",{oncreate:t=>{let r=$("#correoCita");r.tagsinput({itemValue:"value",itemText:"text",typeaheadjs:{name:"correoCita",displayKey:"text",source:[]}}),r.tagsinput("add",{value:f.data.email,text:f.data.email})}})))]:[]])]))])])]),o("div.modal-footer",[o("button.btn.btn-primary.mg-r-5",{onclick:()=>{f.reAgendarCita()}},"Reagendar Cita"),o("a.btn.btn-secondary[href=''][data-dismiss='modal']","Cerrar")])])))]}static vMenu(){return o(Jt)}static fetchAgendas(){L.idCalendar!==null&&(L.loader=!0,o.request({method:"GET",url:"https://api.hospitalmetropolitano.org/v2/date/citas/agendadas",params:{idCalendar:L.idCalendar},headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){L.loader=!1,L.citas={status:t.status,data:t.citasAgendadas,colorsCalendar:t.colorsCalendar},setTimeout(function(){L.setCalendar()},80),setTimeout(function(){L.setSidebar()},160)}).catch(function(t){L.loader=!1,L.citas={status:null,message:t}}))}static reloadFetchAgenda(){o.request({method:"GET",url:"https://api.hospitalmetropolitano.org/v2/date/citas/agendadas",params:{idCalendar:L.idCalendar},headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(t){L.citas={status:t.status,data:t.citasAgendadas,colorsCalendar:t.colorsCalendar},$("#calendar").fullCalendar("removeEvents"),$("#calendar").fullCalendar("addEventSource",L.citas.data),$("#calendar").fullCalendar("rerenderEvents"),Kt.selectDestroy(),$('[data-toggle="tooltip"]').tooltip({template:'<div class=" tooltip tooltip-dark " role="tooltip"><div class= "arrow" ></div><div class="tooltip-inner"></div></div > '})}).catch(function(t){})}static fetchPerfilAgenda(t){try{L.loader=!0,o.request({method:"POST",url:"https://api.hospitalmetropolitano.org/v2/date/citas/perfil",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:localStorage.userToken}}).then(function(r){r.status?(L.calendarios=r.data.calendarios,L.idCalendar==null&&(L.idCalendar=r.data.agendas),o.route.set("/endoscopia/agendas/calendario/",{idCalendar:encodeURIComponent(L.idCalendar)}),L.fetchAgendas()):(L.loader=!1,L.citas={status:r.status,message:r.message})}).catch(function(r){L.loader=!1,L.citas={status:null,message:r}})}catch{L.loader=!1,L.citas={status:null,message:e}}}static showAlertCalendar(t,r){L.typeAlert=t,L.messageAlert=r,$(".toast").toast("show"),o.redraw()}static validarAgendamiento(){let t=!0,r="",n="";if(L.citas.data.events.map((a,i)=>{moment(a.start).format("DD-MM-YYYY HH:mm")==moment(f.data.start,"dddd, DD-MM-YYYY HH:mm").format("DD-MM-YYYY HH:mm")&&(t=!1,r=moment(a.start).format("DD-MM-YYYY HH:mm"),n=moment(a.end).format("DD-MM-YYYY HH:mm")),moment(a.end).format("DD-MM-YYYY HH:mm")==moment(f.data.end,"dddd, DD-MM-YYYY HH:mm").format("DD-MM-YYYY HH:mm")&&(t=!1,r=moment(a.start).format("DD-MM-YYYY HH:mm"),n=moment(a.end).format("DD-MM-YYYY HH:mm"))}),!t)throw $("#modalCreateEvent").modal("hide"),L.showAlertCalendar("bg-danger","No se puede reagendar. Ya existe una cita agendada desde: "+r+" hasta: "+n),"custom error"}oninit(t){t.attrs.idCalendar!==void 0?(L.idCalendar=decodeURIComponent(t.attrs.idCalendar),L.fetchPerfilAgenda()):(L.idCalendar=null,L.fetchPerfilAgenda())}oncreate(){document.body.classList.add("app-calendar")}onupdate(t){t.attrs.idCalendar==null&&(L.showAlertCalendar("bg-danger","Es necesario un perfil de agendamiento v\xE1lido. Un momento por favor."),setTimeout(()=>{window.location.reload()},2e3))}static page(){return[L.vHeader(),L.vMain(),o(md)]}};let U=L;A(U,"loader",!1),A(U,"cita",null),A(U,"citas",null),A(U,"idCalendar",null),A(U,"calendarios",[]),A(U,"typeAlert",null),A(U,"messageAlert",null);class gd extends U{constructor(){super()}}const fd={"/":Sl,"/inicio":Pl,"/admisiones":Il,"/administracion":xl,"/administracion/metrovirtual":Hl,"/administracion/metroplus":Ul,"/hospitalizacion":ql,"/hospitalizacion/pasaportes":Kl,"/hospitalizacion/pasaporte":Bl,"/laboratorio":zl,"/laboratorio/flebotomista":P,"/step-passport":Yl,"/imagen":Xl,"/imagen/agendas":td,"/imagen/agendas/configuracion":od,"/imagen/agendas/calendario":Tt,"/endoscopia":ad,"/endoscopia/agendas":ld,"/endoscopia/agendas/configuracion":dd,"/endoscopia/agendas/calendario":gd,"/salir":Dl,"/sing-out":id},bd="/";o.route.prefix="";o.route(document.body.querySelector("#app"),bd,fd);
